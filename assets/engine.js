"use strict";!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e,t){var n=(t=t||$).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function r(e){var t=!!e&&"length"in e&&e.length,n=ae.type(e);return"function"!==n&&!ae.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,n){return ae.isFunction(t)?ae.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?ae.grep(e,function(e){return e===t!==n}):"string"!=typeof t?ae.grep(e,function(e){return ee.call(t,e)>-1!==n}):ve.test(t)?ae.filter(t,e,n):(t=ae.filter(t,e),ae.grep(e,function(e){return ee.call(t,e)>-1!==n&&1===e.nodeType}))}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){return e}function l(e){throw e}function u(e,t,n,r){var i;try{e&&ae.isFunction(i=e.promise)?i.call(e).done(t).fail(n):e&&ae.isFunction(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function c(){$.removeEventListener("DOMContentLoaded",c),e.removeEventListener("load",c),ae.ready()}function h(){this.expando=ae.expando+h.uid++}function d(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Oe,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Ae.test(e)?JSON.parse(e):e)}(n)}catch(e){}Me.set(e,t,n)}else n=void 0;return n}function p(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return ae.css(e,t,"")},l=a(),u=n&&n[3]||(ae.cssNumber[t]?"":"px"),c=(ae.cssNumber[t]||"px"!==u&&+l)&&Re.exec(ae.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do{c/=o=o||".5",ae.style(e,t,c+u)}while(o!==(o=a()/l)&&1!==o&&--s)}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}function f(e){var t,n=e.ownerDocument,r=e.nodeName,i=Ne[r];return i||(t=n.body.appendChild(n.createElement(r)),i=ae.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),Ne[r]=i,i)}function g(e,t){for(var n,r,i=[],o=0,s=e.length;o<s;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Pe.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ke(r)&&(i[o]=f(r))):"none"!==n&&(i[o]="none",Pe.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function m(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&i(e,t)?ae.merge([e],n):n}function v(e,t){for(var n=0,r=e.length;n<r;n++)Pe.set(e[n],"globalEval",!t||Pe.get(t[n],"globalEval"))}function y(e,t,n,r,i){for(var o,s,a,l,u,c,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===ae.type(o))ae.merge(d,o.nodeType?[o]:o);else if(Ge.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(Fe.exec(o)||["",""])[1].toLowerCase(),l=je[a]||je._default,s.innerHTML=l[1]+ae.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;ae.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(r&&ae.inArray(o,r)>-1)i&&i.push(o);else if(u=ae.contains(o.ownerDocument,o),s=m(h.appendChild(o),"script"),u&&v(s),n)for(c=0;o=s[c++];)Be.test(o.type||"")&&n.push(o);return h}function b(){return!0}function _(){return!1}function x(){try{return $.activeElement}catch(e){}}function w(e,t,n,r,i,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(a in t)w(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=_;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return ae().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=ae.guid++)),e.each(function(){ae.event.add(this,t,i,r,n)})}function T(e,t){return i(e,"table")&&i(11!==t.nodeType?t:t.firstChild,"tr")?ae(">tbody",e)[0]||e:e}function E(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function S(e){var t=$e.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function I(e,t){var n,r,i,o,s,a,l,u;if(1===t.nodeType){if(Pe.hasData(e)&&(o=Pe.access(e),s=Pe.set(t,o),u=o.events)){delete s.handle,s.events={};for(i in u)for(n=0,r=u[i].length;n<r;n++)ae.event.add(t,i,u[i][n])}Me.hasData(e)&&(a=Me.access(e),l=ae.extend({},a),Me.set(t,l))}}function P(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ue.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function M(e,t,r,i){t=J.apply([],t);var o,s,a,l,u,c,h=0,d=e.length,p=d-1,f=t[0],g=ae.isFunction(f);if(g||d>1&&"string"==typeof f&&!se.checkClone&&qe.test(f))return e.each(function(n){var o=e.eq(n);g&&(t[0]=f.call(this,n,o.html())),M(o,t,r,i)});if(d&&(o=y(t,e[0].ownerDocument,!1,e,i),s=o.firstChild,1===o.childNodes.length&&(o=s),s||i)){for(l=(a=ae.map(m(o,"script"),E)).length;h<d;h++)u=o,h!==p&&(u=ae.clone(u,!0,!0),l&&ae.merge(a,m(u,"script"))),r.call(e[h],u,h);if(l)for(c=a[a.length-1].ownerDocument,ae.map(a,S),h=0;h<l;h++)u=a[h],Be.test(u.type||"")&&!Pe.access(u,"globalEval")&&ae.contains(c,u)&&(u.src?ae._evalUrl&&ae._evalUrl(u.src):n(u.textContent.replace(Ke,""),c))}return e}function A(e,t,n){for(var r,i=t?ae.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ae.cleanData(m(r)),r.parentNode&&(n&&ae.contains(r.ownerDocument,r)&&v(m(r,"script")),r.parentNode.removeChild(r));return e}function O(e,t,n){var r,i,o,s,a=e.style;return(n=n||Qe(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||ae.contains(e.ownerDocument,e)||(s=ae.style(e,t)),!se.pixelMarginRight()&&Je.test(s)&&Ze.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function C(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function R(e){var t=ae.cssProps[e];return t||(t=ae.cssProps[e]=function(e){if(e in ot)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=it.length;n--;)if((e=it[n]+t)in ot)return e}(e)||e),t}function D(e,t,n){var r=Re.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function k(e,t,n,r,i){var o,s=0;for(o=n===(r?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===n&&(s+=ae.css(e,n+De[o],!0,i)),r?("content"===n&&(s-=ae.css(e,"padding"+De[o],!0,i)),"margin"!==n&&(s-=ae.css(e,"border"+De[o]+"Width",!0,i))):(s+=ae.css(e,"padding"+De[o],!0,i),"padding"!==n&&(s+=ae.css(e,"border"+De[o]+"Width",!0,i)));return s}function L(e,t,n){var r,i=Qe(e),o=O(e,t,i),s="border-box"===ae.css(e,"boxSizing",!1,i);return Je.test(o)?o:(r=s&&(se.boxSizingReliable()||o===e.style[t]),"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),(o=parseFloat(o)||0)+k(e,t,n||(s?"border":"content"),r,i)+"px")}function N(e,t,n,r,i){return new N.prototype.init(e,t,n,r,i)}function U(){at&&(!1===$.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(U):e.setTimeout(U,ae.fx.interval),ae.fx.tick())}function F(){return e.setTimeout(function(){st=void 0}),st=ae.now()}function B(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=De[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function j(e,t,n){for(var r,i=(G.tweeners[t]||[]).concat(G.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function G(e,t,n){var r,i,o=0,s=G.prefilters.length,a=ae.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=st||F(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(r);return a.notifyWith(e,[u,r,n]),r<1&&s?n:(s||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:ae.extend({},t),opts:ae.extend(!0,{specialEasing:{},easing:ae.easing._default},n),originalProperties:t,originalOptions:n,startTime:st||F(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ae.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,r,i,o,s;for(n in e)if(r=ae.camelCase(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=ae.cssHooks[r])&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}(c,u.opts.specialEasing);o<s;o++)if(r=G.prefilters[o].call(u,e,c,u.opts))return ae.isFunction(r.stop)&&(ae._queueHooks(u.elem,u.opts.queue).stop=ae.proxy(r.stop,r)),r;return ae.map(c,j,u),ae.isFunction(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),ae.fx.timer(ae.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}function X(e){return(e.match(we)||[]).join(" ")}function H(e){return e.getAttribute&&e.getAttribute("class")||""}function Y(e,t,n,r){var i;if(Array.isArray(t))ae.each(t,function(t,i){n||bt.test(e)?r(e,i):Y(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==ae.type(t))r(e,t);else for(i in t)Y(e+"["+i+"]",t[i],n,r)}function W(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(we)||[];if(ae.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function V(e,t,n,r){function i(a){var l;return o[a]=!0,ae.each(e[a]||[],function(e,a){var u=a(t,n,r);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},s=e===Ot;return i(t.dataTypes[0])||!o["*"]&&i("*")}function z(e,t){var n,r,i=ae.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ae.extend(!0,e,r),e}var q=[],$=e.document,K=Object.getPrototypeOf,Z=q.slice,J=q.concat,Q=q.push,ee=q.indexOf,te={},ne=te.toString,re=te.hasOwnProperty,ie=re.toString,oe=ie.call(Object),se={},ae=function(e,t){return new ae.fn.init(e,t)},le=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ue=/^-ms-/,ce=/-([a-z])/g,he=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:"3.2.1",constructor:ae,length:0,toArray:function(){return Z.call(this)},get:function(e){return null==e?Z.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ae.each(this,e)},map:function(e){return this.pushStack(ae.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Q,sort:q.sort,splice:q.splice},ae.extend=ae.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||ae.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],s!==(r=e[t])&&(u&&r&&(ae.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&ae.isPlainObject(n)?n:{},s[t]=ae.extend(u,o,r)):void 0!==r&&(s[t]=r));return s},ae.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ae.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ne.call(e))&&(!(t=K(e))||"function"==typeof(n=re.call(t,"constructor")&&t.constructor)&&ie.call(n)===oe)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?te[ne.call(e)]||"object":typeof e},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(ue,"ms-").replace(ce,he)},each:function(e,t){var n,i=0;if(r(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(le,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?ae.merge(n,"string"==typeof e?[e]:e):Q.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ee.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,n){var i,o,s=0,a=[];if(r(e))for(i=e.length;s<i;s++)null!=(o=t(e[s],s,n))&&a.push(o);else for(s in e)null!=(o=t(e[s],s,n))&&a.push(o);return J.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),ae.isFunction(e))return r=Z.call(arguments,2),i=function(){return e.apply(t||this,r.concat(Z.call(arguments)))},i.guid=e.guid=e.guid||ae.guid++,i},now:Date.now,support:se}),"function"==typeof Symbol&&(ae.fn[Symbol.iterator]=q[Symbol.iterator]),ae.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){te["[object "+t+"]"]=t.toLowerCase()});var de=function(e){function t(e,t,n,r){var i,o,s,a,l,u,c,d=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!r&&((t?t.ownerDocument||t:B)!==C&&O(t),t=t||C,D)){if(11!==f&&(l=ge.exec(e)))if(i=l[1]){if(9===f){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(d&&(s=d.getElementById(i))&&U(t,s)&&s.id===i)return n.push(s),n}else{if(l[2])return K.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&_.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(i)),n}if(_.qsa&&!Y[e+" "]&&(!k||!k.test(e))){if(1!==f)d=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(be,_e):t.setAttribute("id",a=F),o=(u=E(e)).length;o--;)u[o]="#"+a+" "+p(u[o]);c=u.join(","),d=me.test(e)&&h(t.parentNode)||t}if(c)try{return K.apply(n,d.querySelectorAll(c)),n}catch(e){}finally{a===F&&t.removeAttribute("id")}}}return I(e.replace(oe,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function i(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)x.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&we(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function h(e){return e&&void 0!==e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,i=t.next,o=i||r,s=n&&"parentNode"===o,a=G++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,i);return!1}:function(t,n,l){var u,c,h,d=[j,a];if(l){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(h=t[F]||(t[F]={}),c=h[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[o])&&u[0]===j&&u[1]===a)return d[2]=u[2];if(c[o]=d,d[2]=e(t,n,l))return!0}return!1}}function g(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,t,n,r,i){for(var o,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),u&&t.push(a)));return s}function v(e,n,i,o,s,a){return o&&!o[F]&&(o=v(o)),s&&!s[F]&&(s=v(s,a)),r(function(r,a,l,u){var c,h,d,p=[],f=[],g=a.length,v=r||function(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}(n||"*",l.nodeType?[l]:l,[]),y=!e||!r&&n?v:m(v,p,e,l,u),b=i?s||(r?e:g||o)?[]:a:y;if(i&&i(y,b,l,u),o)for(c=m(b,f),o(c,[],l,u),h=c.length;h--;)(d=c[h])&&(b[f[h]]=!(y[f[h]]=d));if(r){if(s||e){if(s){for(c=[],h=b.length;h--;)(d=b[h])&&c.push(y[h]=d);s(null,b=[],c,u)}for(h=b.length;h--;)(d=b[h])&&(c=s?J(r,d):p[h])>-1&&(r[c]=!(a[c]=d))}}else b=m(b===a?b.splice(g,b.length):b),s?s(null,a,b,u):K.apply(a,b)})}function y(e){for(var t,n,r,i=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,l=f(function(e){return e===t},s,!0),u=f(function(e){return J(t,e)>-1},s,!0),c=[function(e,n,r){var i=!o&&(r||n!==P)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,i}];a<i;a++)if(n=x.relative[e[a].type])c=[f(g(c),n)];else{if((n=x.filter[e[a].type].apply(null,e[a].matches))[F]){for(r=++a;r<i&&!x.relative[e[r].type];r++);return v(a>1&&g(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(oe,"$1"),n,a<r&&y(e.slice(a,r)),r<i&&y(e=e.slice(r)),r<i&&p(e))}c.push(n)}return g(c)}var b,_,x,w,T,E,S,I,P,M,A,O,C,R,D,k,L,N,U,F="sizzle"+1*new Date,B=e.document,j=0,G=0,X=n(),H=n(),Y=n(),W=function(e,t){return e===t&&(A=!0),0},V={}.hasOwnProperty,z=[],q=z.pop,$=z.push,K=z.push,Z=z.slice,J=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",ie=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),se=new RegExp("^"+ee+"*,"+ee+"*"),ae=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(re),ce=new RegExp("^"+te+"$"),he={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,fe=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/[+~]/,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_e=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},xe=function(){O()},we=f(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{K.apply(z=Z.call(B.childNodes),B.childNodes),z[B.childNodes.length].nodeType}catch(e){K={apply:z.length?function(e,t){$.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}_=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:B;return r!==C&&9===r.nodeType&&r.documentElement?(C=r,R=C.documentElement,D=!T(C),B!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),_.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=i(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=fe.test(C.getElementsByClassName),_.getById=i(function(e){return R.appendChild(e).id=F,!C.getElementsByName||!C.getElementsByName(F).length}),_.getById?(x.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){return e.getAttribute("id")===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&D){var n=t.getElementById(e);return n?[n]:[]}}):(x.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&D){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),x.find.TAG=_.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):_.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},x.find.CLASS=_.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&D)return t.getElementsByClassName(e)},L=[],k=[],(_.qsa=fe.test(C.querySelectorAll))&&(i(function(e){R.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&k.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||k.push("\\["+ee+"*(?:value|"+Q+")"),e.querySelectorAll("[id~="+F+"-]").length||k.push("~="),e.querySelectorAll(":checked").length||k.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||k.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&k.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&k.push(":enabled",":disabled"),R.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&k.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),k.push(",.*:")})),(_.matchesSelector=fe.test(N=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&i(function(e){_.disconnectedMatch=N.call(e,"*"),N.call(e,"[s!='']:x"),L.push("!=",re)}),k=k.length&&new RegExp(k.join("|")),L=L.length&&new RegExp(L.join("|")),t=fe.test(R.compareDocumentPosition),U=t||fe.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!_.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===B&&U(B,e)?-1:t===C||t.ownerDocument===B&&U(B,t)?1:M?J(M,e)-J(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],l=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:M?J(M,e)-J(M,t):0;if(i===o)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[r]===l[r];)r++;return r?s(a[r],l[r]):a[r]===B?-1:l[r]===B?1:0},C):C},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==C&&O(e),n=n.replace(le,"='$1']"),_.matchesSelector&&D&&!Y[n+" "]&&(!L||!L.test(n))&&(!k||!k.test(n)))try{var r=N.call(e,n);if(r||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,C,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==C&&O(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==C&&O(e);var n=x.attrHandle[t.toLowerCase()],r=n&&V.call(x.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==r?r:_.attributes||!D?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(be,_e)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!_.detectDuplicates,M=!_.sortStable&&e.slice(0),e.sort(W),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return M=null,e},w=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=w(t);return n},(x=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=X[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&X(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ie," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(b=(p=(u=(c=(h=(d=m)[F]||(d[F]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===j&&u[1])&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[j,p,b];break}}else if(y&&(b=p=(u=(c=(h=(d=t)[F]||(d[F]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===j&&u[1]),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((c=(h=d[F]||(d[F]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[j,b]),d!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(n):o.length>1?(i=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)e[r=J(e,i[s])]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=S(e.replace(oe,"$1"));return i[F]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ve,ye),function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),lang:r(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,ye).toLowerCase(),function(t){var n;do{if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=l(b);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,E=t.tokenize=function(e,n){var r,i,o,s,a,l,u,c=H[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],u=x.preFilter;a;){r&&!(i=se.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),r=!1,(i=ae.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(oe," ")}),a=a.slice(r.length));for(s in x.filter)!(i=he[s].exec(a))||u[s]&&!(i=u[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):H(e,l).slice(0)},S=t.compile=function(e,n){var i,o=[],s=[],a=Y[e+" "];if(!a){for(n||(n=E(e)),i=n.length;i--;)(a=y(n[i]))[F]?o.push(a):s.push(a);(a=Y(e,function(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,l,u){var c,h,d,p=0,f="0",g=r&&[],v=[],y=P,b=r||o&&x.find.TAG("*",u),_=j+=null==y?1:Math.random()||.1,w=b.length;for(u&&(P=s===C||s||u);f!==w&&null!=(c=b[f]);f++){if(o&&c){for(h=0,s||c.ownerDocument===C||(O(c),a=!D);d=e[h++];)if(d(c,s||C,a)){l.push(c);break}u&&(j=_)}i&&((c=!d&&c)&&p--,r&&g.push(c))}if(p+=f,i&&f!==p){for(h=0;d=n[h++];)d(g,v,s,a);if(r){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=q.call(l));v=m(v)}K.apply(l,v),u&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(j=_,P=y),g};return i?r(s):s}(s,o))).selector=e}return a},I=t.select=function(e,t,n,r){var i,o,s,a,l,u="function"==typeof e&&e,c=!r&&E(e=u.selector||e);if(n=n||[],1===c.length){if((o=c[0]=c[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&9===t.nodeType&&D&&x.relative[o[1].type]){if(!(t=(x.find.ID(s.matches[0].replace(ve,ye),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(s=o[i],!x.relative[a=s.type]);)if((l=x.find[a])&&(r=l(s.matches[0].replace(ve,ye),me.test(o[0].type)&&h(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&p(o)))return K.apply(n,r),n;break}}return(u||S(e,c))(r,t,!D,n,!t||me.test(e)&&h(t.parentNode)||t),n},_.sortStable=F.split("").sort(W).join("")===F,_.detectDuplicates=!!A,O(),_.sortDetached=i(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(Q,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ae.find=de,ae.expr=de.selectors,ae.expr[":"]=ae.expr.pseudos,ae.uniqueSort=ae.unique=de.uniqueSort,ae.text=de.getText,ae.isXMLDoc=de.isXML,ae.contains=de.contains,ae.escapeSelector=de.escape;var pe=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&ae(e).is(n))break;r.push(e)}return r},fe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ge=ae.expr.match.needsContext,me=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,ve=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ae.find.matchesSelector(r,e)?[r]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(t=0;t<r;t++)if(ae.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ae.find(e,i[t],n);return r>1?ae.uniqueSort(n):n},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&ge.test(e)?ae(e):e||[],!1).length}});var ye,be=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ae.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||ye,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:be.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:$,!0)),me.test(r[1])&&ae.isPlainObject(t))for(r in t)ae.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=$.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ae.isFunction(e)?void 0!==n.ready?n.ready(e):e(ae):ae.makeArray(e,this)}).prototype=ae.fn,ye=ae($);var _e=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};ae.fn.extend({has:function(e){var t=ae(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ae.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],s="string"!=typeof e&&ae(e);if(!ge.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ae.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ae.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ee.call(ae(e),this[0]):ee.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.uniqueSort(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return pe(e,"parentNode")},parentsUntil:function(e,t,n){return pe(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return pe(e,"nextSibling")},prevAll:function(e){return pe(e,"previousSibling")},nextUntil:function(e,t,n){return pe(e,"nextSibling",n)},prevUntil:function(e,t,n){return pe(e,"previousSibling",n)},siblings:function(e){return fe((e.parentNode||{}).firstChild,e)},children:function(e){return fe(e.firstChild)},contents:function(e){return i(e,"iframe")?e.contentDocument:(i(e,"template")&&(e=e.content||e),ae.merge([],e.childNodes))}},function(e,t){ae.fn[e]=function(n,r){var i=ae.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ae.filter(r,i)),this.length>1&&(xe[e]||ae.uniqueSort(i),_e.test(e)&&i.reverse()),this.pushStack(i)}});var we=/[^\x20\t\r\n\f]+/g;ae.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return ae.each(e.match(we)||[],function(e,n){t[n]=!0}),t}(e):ae.extend({},e);var t,n,r,i,o=[],s=[],a=-1,l=function(){for(i=i||e.once,r=t=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(a=o.length-1,s.push(n)),function t(n){ae.each(n,function(n,r){ae.isFunction(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==ae.type(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return ae.each(arguments,function(e,t){for(var n;(n=ae.inArray(t,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(e){return e?ae.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},ae.extend({Deferred:function(t){var n=[["notify","progress",ae.Callbacks("memory"),ae.Callbacks("memory"),2],["resolve","done",ae.Callbacks("once memory"),ae.Callbacks("once memory"),0,"resolved"],["reject","fail",ae.Callbacks("once memory"),ae.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return ae.Deferred(function(t){ae.each(n,function(n,r){var i=ae.isFunction(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){function o(t,n,r,i){return function(){var u=this,c=arguments,h=function(){var e,h;if(!(t<s)){if((e=r.apply(u,c))===n.promise())throw new TypeError("Thenable self-resolution");h=e&&("object"==typeof e||"function"==typeof e)&&e.then,ae.isFunction(h)?i?h.call(e,o(s,n,a,i),o(s,n,l,i)):(s++,h.call(e,o(s,n,a,i),o(s,n,l,i),o(s,n,a,n.notifyWith))):(r!==a&&(u=void 0,c=[e]),(i||n.resolveWith)(u,c))}},d=i?h:function(){try{h()}catch(e){ae.Deferred.exceptionHook&&ae.Deferred.exceptionHook(e,d.stackTrace),t+1>=s&&(r!==l&&(u=void 0,c=[e]),n.rejectWith(u,c))}};t?d():(ae.Deferred.getStackHook&&(d.stackTrace=ae.Deferred.getStackHook()),e.setTimeout(d))}}var s=0;return ae.Deferred(function(e){n[0][3].add(o(0,e,ae.isFunction(i)?i:a,e.notifyWith)),n[1][3].add(o(0,e,ae.isFunction(t)?t:a)),n[2][3].add(o(0,e,ae.isFunction(r)?r:l))}).promise()},promise:function(e){return null!=e?ae.extend(e,i):i}},o={};return ae.each(n,function(e,t){var s=t[2],a=t[5];i[t[1]]=s.add,a&&s.add(function(){r=a},n[3-e][2].disable,n[0][2].lock),s.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=Z.call(arguments),o=ae.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?Z.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(u(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||ae.isFunction(i[n]&&i[n].then)))return o.then();for(;n--;)u(i[n],s(n),o.reject);return o.promise()}});var Te=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ae.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Te.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},ae.readyException=function(t){e.setTimeout(function(){throw t})};var Ee=ae.Deferred();ae.fn.ready=function(e){return Ee.then(e).catch(function(e){ae.readyException(e)}),this},ae.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ae.readyWait:ae.isReady)||(ae.isReady=!0,!0!==e&&--ae.readyWait>0||Ee.resolveWith($,[ae]))}}),ae.ready.then=Ee.then,"complete"===$.readyState||"loading"!==$.readyState&&!$.documentElement.doScroll?e.setTimeout(ae.ready):($.addEventListener("DOMContentLoaded",c),e.addEventListener("load",c));var Se=function(e,t,n,r,i,o,s){var a=0,l=e.length,u=null==n;if("object"===ae.type(n)){i=!0;for(a in n)Se(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,ae.isFunction(r)||(s=!0),u&&(s?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ae(e),n)})),t))for(;a<l;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:u?t.call(e):l?t(e[0],n):o},Ie=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};h.uid=1,h.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ie(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[ae.camelCase(t)]=n;else for(r in t)i[ae.camelCase(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ae.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ae.camelCase):(t=ae.camelCase(t))in r?[t]:t.match(we)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||ae.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ae.isEmptyObject(t)}};var Pe=new h,Me=new h,Ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/[A-Z]/g;ae.extend({hasData:function(e){return Me.hasData(e)||Pe.hasData(e)},data:function(e,t,n){return Me.access(e,t,n)},removeData:function(e,t){Me.remove(e,t)},_data:function(e,t,n){return Pe.access(e,t,n)},_removeData:function(e,t){Pe.remove(e,t)}}),ae.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=Me.get(o),1===o.nodeType&&!Pe.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=ae.camelCase(r.slice(5)),d(o,r,i[r]));Pe.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Me.set(this,e)}):Se(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=Me.get(o,e)))return n;if(void 0!==(n=d(o,e)))return n}else this.each(function(){Me.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Me.remove(this,e)})}}),ae.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Pe.get(e,t),n&&(!r||Array.isArray(n)?r=Pe.access(e,t,ae.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ae.queue(e,t),r=n.length,i=n.shift(),o=ae._queueHooks(e,t),s=function(){ae.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Pe.get(e,n)||Pe.access(e,n,{empty:ae.Callbacks("once memory").add(function(){Pe.remove(e,[t+"queue",n])})})}}),ae.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ae.queue(this[0],e):void 0===t?this:this.each(function(){var n=ae.queue(this,e,t);ae._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ae.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Pe.get(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Re=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),De=["Top","Right","Bottom","Left"],ke=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae.contains(e.ownerDocument,e)&&"none"===ae.css(e,"display")},Le=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i},Ne={};ae.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?ae(this).show():ae(this).hide()})}});var Ue=/^(?:checkbox|radio)$/i,Fe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Be=/^$|\/(?:java|ecma)script/i,je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};je.optgroup=je.option,je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td;var Ge=/<|&#?\w+;/;!function(){var e=$.createDocumentFragment().appendChild($.createElement("div")),t=$.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),se.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",se.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Xe=$.documentElement,He=/^key/,Ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,We=/^([^.]*)(?:\.(.+)|)/;ae.event={global:{},add:function(e,t,n,r,i){var o,s,a,l,u,c,h,d,p,f,g,m=Pe.get(e);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&ae.find.matchesSelector(Xe,i),n.guid||(n.guid=ae.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(t){return void 0!==ae&&ae.event.triggered!==t.type?ae.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(we)||[""]).length;u--;)p=g=(a=We.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=ae.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=ae.event.special[p]||{},c=ae.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ae.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,f,s)||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),ae.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,s,a,l,u,c,h,d,p,f,g,m=Pe.hasData(e)&&Pe.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(we)||[""]).length;u--;)if(a=We.exec(t[u])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=ae.event.special[p]||{},d=l[p=(r?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,m.handle)||ae.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)ae.event.remove(e,p+t[u],n,r,!0);ae.isEmptyObject(l)&&Pe.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,s,a=ae.event.fix(e),l=new Array(arguments.length),u=(Pe.get(this,"events")||{})[a.type]||[],c=ae.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=ae.event.handlers.call(this,a,u),t=0;(i=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(r=((ae.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,r,i,o,s,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[i=(r=t[n]).selector+" "]&&(s[i]=r.needsContext?ae(i,this).index(u)>-1:ae.find(i,this,null,[u]).length),s[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(ae.Event.prototype,e,{enumerable:!0,configurable:!0,get:ae.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ae.expando]?e:new ae.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==x()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===x()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&i(this,"input"))return this.click(),!1},_default:function(e){return i(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ae.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ae.Event=function(e,t){if(!(this instanceof ae.Event))return new ae.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?b:_,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),this[ae.expando]=!0},ae.Event.prototype={constructor:ae.Event,isDefaultPrevented:_,isPropagationStopped:_,isImmediatePropagationStopped:_,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=b,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=b,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=b,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ae.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&He.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ae.event.addProp),ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||ae.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),ae.fn.extend({on:function(e,t,n,r){return w(this,e,t,n,r)},one:function(e,t,n,r){return w(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ae(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=_),this.each(function(){ae.event.remove(this,e,n,t)})}});var Ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ze=/<script|<style|<link/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,$e=/^true\/(.*)/,Ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ae.extend({htmlPrefilter:function(e){return e.replace(Ve,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),l=ae.contains(e.ownerDocument,e);if(!(se.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ae.isXMLDoc(e)))for(s=m(a),r=0,i=(o=m(e)).length;r<i;r++)P(o[r],s[r]);if(t)if(n)for(o=o||m(e),s=s||m(a),r=0,i=o.length;r<i;r++)I(o[r],s[r]);else I(e,a);return(s=m(a,"script")).length>0&&v(s,!l&&m(e,"script")),a},cleanData:function(e){for(var t,n,r,i=ae.event.special,o=0;void 0!==(n=e[o]);o++)if(Ie(n)){if(t=n[Pe.expando]){if(t.events)for(r in t.events)i[r]?ae.event.remove(n,r):ae.removeEvent(n,r,t.handle);n[Pe.expando]=void 0}n[Me.expando]&&(n[Me.expando]=void 0)}}}),ae.fn.extend({detach:function(e){return A(this,e,!0)},remove:function(e){return A(this,e)},text:function(e){return Se(this,function(e){return void 0===e?ae.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return M(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){T(this,e).appendChild(e)}})},prepend:function(){return M(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return M(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return M(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ae.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return Se(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ze.test(e)&&!je[(Fe.exec(e)||["",""])[1].toLowerCase()]){e=ae.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ae.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return M(this,arguments,function(t){var n=this.parentNode;ae.inArray(this,e)<0&&(ae.cleanData(m(this)),n&&n.replaceChild(t,this))},e)}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ae.fn[e]=function(e){for(var n,r=[],i=ae(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),ae(i[s])[t](n),Q.apply(r,n.get());return this.pushStack(r)}});var Ze=/^margin/,Je=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),Qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Xe.appendChild(s);var t=e.getComputedStyle(a);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,a.style.marginRight="50%",i="4px"===t.marginRight,Xe.removeChild(s),a=null}}var n,r,i,o,s=$.createElement("div"),a=$.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",se.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),ae.extend(se,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),r},pixelMarginRight:function(){return t(),i},reliableMarginLeft:function(){return t(),o}}))}();var et=/^(none|table(?!-c[ea]).+)/,tt=/^--/,nt={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"},it=["Webkit","Moz","ms"],ot=$.createElement("div").style;ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=O(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=ae.camelCase(t),l=tt.test(t),u=e.style;if(l||(t=R(a)),s=ae.cssHooks[t]||ae.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t];"string"==(o=typeof n)&&(i=Re.exec(n))&&i[1]&&(n=p(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(ae.cssNumber[a]?"":"px")),se.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o,s,a=ae.camelCase(t);return tt.test(t)||(t=R(a)),(s=ae.cssHooks[t]||ae.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=O(e,t,r)),"normal"===i&&t in rt&&(i=rt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ae.each(["height","width"],function(e,t){ae.cssHooks[t]={get:function(e,n,r){if(n)return!et.test(ae.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?L(e,t,r):Le(e,nt,function(){return L(e,t,r)})},set:function(e,n,r){var i,o=r&&Qe(e),s=r&&k(e,t,r,"border-box"===ae.css(e,"boxSizing",!1,o),o);return s&&(i=Re.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=ae.css(e,t)),D(0,n,s)}}}),ae.cssHooks.marginLeft=C(se.reliableMarginLeft,function(e,t){if(t)return(parseFloat(O(e,"marginLeft"))||e.getBoundingClientRect().left-Le(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ae.each({margin:"",padding:"",border:"Width"},function(e,t){ae.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+De[r]+t]=o[r]||o[r-2]||o[0];return i}},Ze.test(e)||(ae.cssHooks[e+t].set=D)}),ae.fn.extend({css:function(e,t){return Se(this,function(e,t,n){var r,i,o={},s=0;if(Array.isArray(t)){for(r=Qe(e),i=t.length;s<i;s++)o[t[s]]=ae.css(e,t[s],!1,r);return o}return void 0!==n?ae.style(e,t,n):ae.css(e,t)},e,t,arguments.length>1)}}),ae.Tween=N,(N.prototype={constructor:N,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ae.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ae.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.options.duration?this.pos=t=ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}}).init.prototype=N.prototype,(N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ae.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ae.cssProps[e.prop]]&&!ae.cssHooks[e.prop]?e.elem[e.prop]=e.now:ae.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ae.fx=N.prototype.init,ae.fx.step={};var st,at,lt=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;ae.Animation=ae.extend(G,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return p(n.elem,e,Re.exec(t),n),n}]},tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,r=0,i=e.length;r<i;r++)n=e[r],G.tweeners[n]=G.tweeners[n]||[],G.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,s,a,l,u,c,h="width"in t||"height"in t,d=this,p={},f=e.style,m=e.nodeType&&ke(e),v=Pe.get(e,"fxshow");n.queue||(null==(s=ae._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,ae.queue(e,"fx").length||s.empty.fire()})}));for(r in t)if(i=t[r],lt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;m=!0}p[r]=v&&v[r]||ae.style(e,r)}if((l=!ae.isEmptyObject(t))||!ae.isEmptyObject(p)){h&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=v&&v.display)&&(u=Pe.get(e,"display")),"none"===(c=ae.css(e,"display"))&&(u?c=u:(g([e],!0),u=e.style.display||u,c=ae.css(e,"display"),g([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===ae.css(e,"float")&&(l||(d.done(function(){f.display=u}),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1;for(r in p)l||(v?"hidden"in v&&(m=v.hidden):v=Pe.access(e,"fxshow",{display:u}),o&&(v.hidden=!m),m&&g([e],!0),d.done(function(){m||g([e]),Pe.remove(e,"fxshow");for(r in p)ae.style(e,r,p[r])})),l=j(m?v[r]:0,r,d),r in v||(v[r]=l.start,m&&(l.end=l.start,l.start=0))}}],prefilter:function(e,t){t?G.prefilters.unshift(e):G.prefilters.push(e)}}),ae.speed=function(e,t,n){var r=e&&"object"==typeof e?ae.extend({},e):{complete:n||!n&&t||ae.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ae.isFunction(t)&&t};return ae.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in ae.fx.speeds?r.duration=ae.fx.speeds[r.duration]:r.duration=ae.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ae.isFunction(r.old)&&r.old.call(this),r.queue&&ae.dequeue(this,r.queue)},r},ae.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ae.isEmptyObject(e),o=ae.speed(t,n,r),s=function(){var t=G(this,ae.extend({},e),o);(i||Pe.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ae.timers,s=Pe.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ut.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||ae.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Pe.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ae.timers,s=r?r.length:0;for(n.finish=!0,ae.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ae.each(["toggle","show","hide"],function(e,t){var n=ae.fn[t];ae.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(B(t,!0),e,r,i)}}),ae.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ae.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ae.timers=[],ae.fx.tick=function(){var e,t=0,n=ae.timers;for(st=ae.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ae.fx.stop(),st=void 0},ae.fx.timer=function(e){ae.timers.push(e),ae.fx.start()},ae.fx.interval=13,ae.fx.start=function(){at||(at=!0,U())},ae.fx.stop=function(){at=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(t,n){return t=ae.fx?ae.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=$.createElement("input"),t=$.createElement("select").appendChild($.createElement("option"));e.type="checkbox",se.checkOn=""!==e.value,se.optSelected=t.selected,(e=$.createElement("input")).value="t",e.type="radio",se.radioValue="t"===e.value}();var ct,ht=ae.expr.attrHandle;ae.fn.extend({attr:function(e,t){return Se(this,ae.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?ae.prop(e,t,n):(1===o&&ae.isXMLDoc(e)||(i=ae.attrHooks[t.toLowerCase()]||(ae.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void ae.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=ae.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!se.radioValue&&"radio"===t&&i(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(we);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?ae.removeAttr(e,n):e.setAttribute(n,n),n}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||ae.find.attr;ht[t]=function(e,t,r){var i,o,s=t.toLowerCase();return r||(o=ht[s],ht[s]=i,i=null!=n(e,t,r)?s:null,ht[s]=o),i}});var dt=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return Se(this,ae.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ae.propFix[e]||e]})}}),ae.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ae.isXMLDoc(e)||(t=ae.propFix[t]||t,i=ae.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),se.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this}),ae.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,l=0;if(ae.isFunction(e))return this.each(function(t){ae(this).addClass(e.call(this,t,H(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(i=H(n),r=1===n.nodeType&&" "+X(i)+" "){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=X(r))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,l=0;if(ae.isFunction(e))return this.each(function(t){ae(this).removeClass(e.call(this,t,H(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(i=H(n),r=1===n.nodeType&&" "+X(i)+" "){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(a=X(r))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ae.isFunction(e)?this.each(function(n){ae(this).toggleClass(e.call(this,n,H(this),t),t)}):this.each(function(){var t,r,i,o;if("string"===n)for(r=0,i=ae(this),o=e.match(we)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=H(this))&&Pe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Pe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+X(H(n))+" ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g;ae.fn.extend({val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=ae.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,ae(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=ae.map(i,function(e){return null==e?"":e+""})),(t=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=ae.valHooks[i.type]||ae.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ft,""):null==n?"":n}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null!=t?t:X(ae.text(e))}},select:{get:function(e){var t,n,r,o=e.options,s=e.selectedIndex,a="select-one"===e.type,l=a?null:[],u=a?s+1:o.length;for(r=s<0?u:a?s:0;r<u;r++)if(((n=o[r]).selected||r===s)&&!n.disabled&&(!n.parentNode.disabled||!i(n.parentNode,"optgroup"))){if(t=ae(n).val(),a)return t;l.push(t)}return l},set:function(e,t){for(var n,r,i=e.options,o=ae.makeArray(t),s=i.length;s--;)((r=i[s]).selected=ae.inArray(ae.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=ae.inArray(ae(e).val(),t)>-1}},se.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var gt=/^(?:focusinfocus|focusoutblur)$/;ae.extend(ae.event,{trigger:function(t,n,r,i){var o,s,a,l,u,c,h,d=[r||$],p=re.call(t,"type")?t.type:t,f=re.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||$,3!==r.nodeType&&8!==r.nodeType&&!gt.test(p+ae.event.triggered)&&(p.indexOf(".")>-1&&(p=(f=p.split(".")).shift(),f.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[ae.expando]?t:new ae.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ae.makeArray(n,[t]),h=ae.event.special[p]||{},i||!h.trigger||!1!==h.trigger.apply(r,n))){if(!i&&!h.noBubble&&!ae.isWindow(r)){for(l=h.delegateType||p,gt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(r.ownerDocument||$)&&d.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=d[o++])&&!t.isPropagationStopped();)t.type=o>1?l:h.bindType||p,(c=(Pe.get(s,"events")||{})[t.type]&&Pe.get(s,"handle"))&&c.apply(s,n),(c=u&&s[u])&&c.apply&&Ie(s)&&(t.result=c.apply(s,n),!1===t.result&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),n)||!Ie(r)||u&&ae.isFunction(r[p])&&!ae.isWindow(r)&&((a=r[u])&&(r[u]=null),ae.event.triggered=p,r[p](),ae.event.triggered=void 0,a&&(r[u]=a)),t.result}},simulate:function(e,t,n){var r=ae.extend(new ae.Event,n,{type:e,isSimulated:!0});ae.event.trigger(r,null,t)}}),ae.fn.extend({trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ae.event.trigger(e,t,n,!0)}}),ae.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ae.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),se.focusin="onfocusin"in e,se.focusin||ae.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ae.event.simulate(t,e.target,ae.event.fix(e))};ae.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Pe.access(r,t);i||r.addEventListener(e,n,!0),Pe.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Pe.access(r,t)-1;i?Pe.access(r,t,i):(r.removeEventListener(e,n,!0),Pe.remove(r,t))}}});var mt=e.location,vt=ae.now(),yt=/\?/;ae.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ae.error("Invalid XML: "+t),n};var bt=/\[\]$/,_t=/\r?\n/g,xt=/^(?:submit|button|image|reset|file)$/i,wt=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var n,r=[],i=function(e,t){var n=ae.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){i(this.name,this.value)});else for(n in e)Y(n,e[n],t,i);return r.join("&")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&wt.test(this.nodeName)&&!xt.test(e)&&(this.checked||!Ue.test(e))}).map(function(e,t){var n=ae(this).val();return null==n?null:Array.isArray(n)?ae.map(n,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:n.replace(_t,"\r\n")}}).get()}});var Tt=/%20/g,Et=/#.*$/,St=/([?&])_=[^&]*/,It=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Mt=/^\/\//,At={},Ot={},Ct="*/".concat("*"),Rt=$.createElement("a");Rt.href=mt.href,ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ct,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,ae.ajaxSettings),t):z(ae.ajaxSettings,e)},ajaxPrefilter:W(At),ajaxTransport:W(Ot),ajax:function(t,n){function r(t,n,r,a){var u,d,p,_,x,w=n;c||(c=!0,l&&e.clearTimeout(l),i=void 0,s=a||"",T.readyState=t>0?4:0,u=t>=200&&t<300||304===t,r&&(_=function(e,t,n){for(var r,i,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,T,r)),_=function(e,t,n,r){var i,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,_,T,u),u?(f.ifModified&&((x=T.getResponseHeader("Last-Modified"))&&(ae.lastModified[o]=x),(x=T.getResponseHeader("etag"))&&(ae.etag[o]=x)),204===t||"HEAD"===f.type?w="nocontent":304===t?w="notmodified":(w=_.state,d=_.data,u=!(p=_.error))):(p=w,!t&&w||(w="error",t<0&&(t=0))),T.status=t,T.statusText=(n||w)+"",u?v.resolveWith(g,[d,w,T]):v.rejectWith(g,[T,w,p]),T.statusCode(b),b=void 0,h&&m.trigger(u?"ajaxSuccess":"ajaxError",[T,f,u?d:p]),y.fireWith(g,[T,w]),h&&(m.trigger("ajaxComplete",[T,f]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,s,a,l,u,c,h,d,p,f=ae.ajaxSetup({},n),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?ae(g):ae.event,v=ae.Deferred(),y=ae.Callbacks("once memory"),b=f.statusCode||{},_={},x={},w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=It.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||w;return i&&i.abort(t),r(0,t),this}};if(v.promise(T),f.url=((t||f.url||mt.href)+"").replace(Mt,mt.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(we)||[""],null==f.crossDomain){u=$.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Rt.protocol+"//"+Rt.host!=u.protocol+"//"+u.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ae.param(f.data,f.traditional)),V(At,f,n,T),c)return T;(h=ae.event&&f.global)&&0==ae.active++&&ae.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Pt.test(f.type),o=f.url.replace(Et,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Tt,"+")):(p=f.url.slice(o.length),f.data&&(o+=(yt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(St,"$1"),p=(yt.test(o)?"&":"?")+"_="+vt+++p),f.url=o+p),f.ifModified&&(ae.lastModified[o]&&T.setRequestHeader("If-Modified-Since",ae.lastModified[o]),ae.etag[o]&&T.setRequestHeader("If-None-Match",ae.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ct+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)T.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(g,T,f)||c))return T.abort();if(w="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),i=V(Ot,f,n,T)){if(T.readyState=1,h&&m.trigger("ajaxSend",[T,f]),c)return T;f.async&&f.timeout>0&&(l=e.setTimeout(function(){T.abort("timeout")},f.timeout));try{c=!1,i.send(_,r)}catch(e){if(c)throw e;r(-1,e)}}else r(-1,"No Transport");return T},getJSON:function(e,t,n){return ae.get(e,t,n,"json")},getScript:function(e,t){return ae.get(e,void 0,t,"script")}}),ae.each(["get","post"],function(e,t){ae[t]=function(e,n,r,i){return ae.isFunction(n)&&(i=i||r,r=n,n=void 0),ae.ajax(ae.extend({url:e,type:t,dataType:i,data:n,success:r},ae.isPlainObject(e)&&e))}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ae.fn.extend({wrapAll:function(e){var t;return this[0]&&(ae.isFunction(e)&&(e=e.call(this[0])),t=ae(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ae.isFunction(e)?this.each(function(t){ae(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ae(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ae.isFunction(e);return this.each(function(n){ae(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ae(this).replaceWith(this.childNodes)}),this}}),ae.expr.pseudos.hidden=function(e){return!ae.expr.pseudos.visible(e)},ae.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ae.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},kt=ae.ajaxSettings.xhr();se.cors=!!kt&&"withCredentials"in kt,se.ajax=kt=!!kt,ae.ajaxTransport(function(t){var n,r;if(se.cors||kt&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)a.setRequestHeader(s,i[s]);n=function(e){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Dt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),ae.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ae.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=ae("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),$.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Lt=[],Nt=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||ae.expando+"_"+vt++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=!1!==t.jsonp&&(Nt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Nt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=ae.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Nt,"$1"+i):!1!==t.jsonp&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||ae.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){void 0===o?ae(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Lt.push(i)),s&&ae.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),se.createHTMLDocument=function(){var e=$.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ae.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(se.createHTMLDocument?((r=(t=$.implementation.createHTMLDocument("")).createElement("base")).href=$.location.href,t.head.appendChild(r)):t=$),i=me.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=y([e],t,o),o&&o.length&&ae(o).remove(),ae.merge([],i.childNodes))},ae.fn.load=function(e,t,n){var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=X(e.slice(a)),e=e.slice(0,a)),ae.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&ae.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?ae("<div>").append(ae.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae.expr.pseudos.animated=function(e){return ae.grep(ae.timers,function(t){return e===t.elem}).length},ae.offset={setOffset:function(e,t,n){var r,i,o,s,a,l,u=ae.css(e,"position"),c=ae(e),h={};"static"===u&&(e.style.position="relative"),a=c.offset(),o=ae.css(e,"top"),l=ae.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(s=(r=c.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),ae.isFunction(t)&&(t=t.call(e,n,ae.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):c.css(h)}},ae.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ae.offset.setOffset(this,e,t)});var t,n,r,i,o=this[0];if(o)return o.getClientRects().length?(r=o.getBoundingClientRect(),t=o.ownerDocument,n=t.documentElement,i=t.defaultView,{top:r.top+i.pageYOffset-n.clientTop,left:r.left+i.pageXOffset-n.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===ae.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),i(e[0],"html")||(r=e.offset()),r={top:r.top+ae.css(e[0],"borderTopWidth",!0),left:r.left+ae.css(e[0],"borderLeftWidth",!0)}),{top:t.top-r.top-ae.css(n,"marginTop",!0),left:t.left-r.left-ae.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||Xe})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ae.fn[e]=function(r){return Se(this,function(e,r,i){var o;if(ae.isWindow(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),ae.each(["top","left"],function(e,t){ae.cssHooks[t]=C(se.pixelPosition,function(e,n){if(n)return n=O(e,t),Je.test(n)?ae(e).position()[t]+"px":n})}),ae.each({Height:"height",Width:"width"},function(e,t){ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ae.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return Se(this,function(t,n,i){var o;return ae.isWindow(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?ae.css(t,n,a):ae.style(t,n,i,a)},t,s?i:void 0,s)}})}),ae.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ae.holdReady=function(e){e?ae.readyWait++:ae.ready(!0)},ae.isArray=Array.isArray,ae.parseJSON=JSON.parse,ae.nodeName=i,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var Ut=e.jQuery,Ft=e.$;return ae.noConflict=function(t){return e.$===ae&&(e.$=Ft),t&&e.jQuery===ae&&(e.jQuery=Ut),ae},t||(e.jQuery=e.$=ae),ae}),function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){function r(e){e.fn.perfectScrollbar=function(e){return this.each(function(){if("object"==typeof e||void 0===e){var t=e;o.get(this)||i.initialize(this,t)}else{var n=e;"update"===n?i.update(this):"destroy"===n&&i.destroy(this)}})}}var i=e("../main"),o=e("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],r);else{var s=window.jQuery?window.jQuery:window.$;void 0!==s&&r(s)}t.exports=r},{"../main":6,"../plugin/instances":17}],2:[function(e,t,n){var r={};r.create=function(e,t){var n=document.createElement(e);return n.className=t,n},r.appendTo=function(e,t){return t.appendChild(e),e},r.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}(e,t):void 0===n?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},r.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},r.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return r.matches(e,t)})},t.exports=r},{}],3:[function(e,t,n){var r=function(e){this.element=e,this.events={}};r.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},r.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter(function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new r(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},i.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},t.exports=i},{}],4:[function(e,t,n){t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],5:[function(e,t,n){function r(e){var t;return t=void 0===e?["ps--x","ps--y"]:["ps--"+e],["ps--in-scrolling"].concat(t)}var i=e("./dom"),o=n.toInt=function(e){return parseInt(e,10)||0};n.isEditable=function(e){return i.matches(e,"input,[contenteditable]")||i.matches(e,"select,[contenteditable]")||i.matches(e,"textarea,[contenteditable]")||i.matches(e,"button,[contenteditable]")},n.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];0===n.indexOf("ps-")&&e.classList.remove(n)}},n.outerWidth=function(e){return o(i.css(e,"width"))+o(i.css(e,"paddingLeft"))+o(i.css(e,"paddingRight"))+o(i.css(e,"borderLeftWidth"))+o(i.css(e,"borderRightWidth"))},n.startScrolling=function(e,t){for(var n=r(t),i=0;i<n.length;i++)e.classList.add(n[i])},n.stopScrolling=function(e,t){for(var n=r(t),i=0;i<n.length;i++)e.classList.remove(n[i])},n.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./dom":2}],6:[function(e,t,n){var r=e("./plugin/destroy"),i=e("./plugin/initialize"),o=e("./plugin/update");t.exports={initialize:i,update:o,destroy:r}},{"./plugin/destroy":8,"./plugin/initialize":16,"./plugin/update":20}],7:[function(e,t,n){t.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},{}],8:[function(e,t,n){var r=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances");t.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),o.remove(e))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17}],9:[function(e,t,n){var r=e("../instances"),i=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",function(r){var s=r.pageY-window.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;o(e,"top",e.scrollTop+s*t.containerHeight),i(e),r.stopPropagation()}),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",function(r){var s=r.pageX-window.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;o(e,"left",e.scrollLeft+s*t.containerWidth),i(e),r.stopPropagation()})}(e,r.get(e))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],10:[function(e,t,n){function r(e,t){var n=null,r=null,i=function(i){!function(r){var i=n+r*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=i<0?0:i>s?s:i;var a=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;u(e,"left",a)}(i.pageX-r),l(e),i.stopPropagation(),i.preventDefault()},a=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",i)};t.event.bind(t.scrollbarX,"mousedown",function(l){r=l.pageX,n=o.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",a),l.stopPropagation(),l.preventDefault()})}function i(e,t){var n=null,r=null,i=function(i){!function(r){var i=n+r*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=i<0?0:i>s?s:i;var a=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));u(e,"top",a)}(i.pageY-r),l(e),i.stopPropagation(),i.preventDefault()},a=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",i)};t.event.bind(t.scrollbarY,"mousedown",function(l){r=l.pageY,n=o.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",a),l.stopPropagation(),l.preventDefault()})}var o=e("../../lib/helper"),s=e("../../lib/dom"),a=e("../instances"),l=e("../update-geometry"),u=e("../update-scroll");t.exports=function(e){var t=a.get(e);r(e,t),i(e,t)}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],11:[function(e,t,n){function r(e,t){var n=!1;t.event.bind(e,"mouseenter",function(){n=!0}),t.event.bind(e,"mouseleave",function(){n=!1});var r=!1;t.event.bind(t.ownerDocument,"keydown",function(s){if(!(s.isDefaultPrevented&&s.isDefaultPrevented()||s.defaultPrevented)){var u=o.matches(t.scrollbarX,":focus")||o.matches(t.scrollbarY,":focus");if(n||u){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){if("IFRAME"===c.tagName)c=c.contentDocument.activeElement;else for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(i.isEditable(c))return}var h=0,d=0;switch(s.which){case 37:h=s.metaKey?-t.contentWidth:s.altKey?-t.containerWidth:-30;break;case 38:d=s.metaKey?t.contentHeight:s.altKey?t.containerHeight:30;break;case 39:h=s.metaKey?t.contentWidth:s.altKey?t.containerWidth:30;break;case 40:d=s.metaKey?-t.contentHeight:s.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=s.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=s.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=s.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-d),l(e,"left",e.scrollLeft+h),a(e),(r=function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(h,d))&&s.preventDefault()}}})}var i=e("../../lib/helper"),o=e("../../lib/dom"),s=e("../instances"),a=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){r(e,s.get(e))}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],12:[function(e,t,n){function r(e,t){function n(n){var i=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),a=i[0],l=i[1];(function(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){var i=window.getComputedStyle(r);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&n>0||r.scrollTop===o&&n<0))return!0;var s=r.scrollLeft-r.clientWidth;if(s>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===s&&t>0))return!0}return!1})(a,l)||(r=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(l?s(e,"top",e.scrollTop-l*t.settings.wheelSpeed):s(e,"top",e.scrollTop+a*t.settings.wheelSpeed),r=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a?s(e,"left",e.scrollLeft+a*t.settings.wheelSpeed):s(e,"left",e.scrollLeft-l*t.settings.wheelSpeed),r=!0):(s(e,"top",e.scrollTop-l*t.settings.wheelSpeed),s(e,"left",e.scrollLeft+a*t.settings.wheelSpeed)),o(e),(r=r||function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(a,l))&&(n.stopPropagation(),n.preventDefault()))}var r=!1;void 0!==window.onwheel?t.event.bind(e,"wheel",n):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",n)}var i=e("../instances"),o=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){r(e,i.get(e))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],13:[function(e,t,n){var r=e("../instances"),i=e("../update-geometry");t.exports=function(e){!function(e,t){t.event.bind(e,"scroll",function(){i(e)})}(e,r.get(e))}},{"../instances":17,"../update-geometry":18}],14:[function(e,t,n){function r(e,t){function n(){r&&(clearInterval(r),r=null),i.stopScrolling(e)}var r=null,l={top:0,left:0},u=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(function(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}())?u=!0:(u=!1,n())}),t.event.bind(window,"mouseup",function(){u&&(u=!1,n())}),t.event.bind(window,"keyup",function(){u&&(u=!1,n())}),t.event.bind(window,"mousemove",function(t){if(u){var c={x:t.pageX,y:t.pageY},h={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};c.x<h.left+3?(l.left=-5,i.startScrolling(e,"x")):c.x>h.right-3?(l.left=5,i.startScrolling(e,"x")):l.left=0,c.y<h.top+3?(l.top=h.top+3-c.y<5?-5:-20,i.startScrolling(e,"y")):c.y>h.bottom-3?(l.top=c.y-h.bottom+3<5?5:20,i.startScrolling(e,"y")):l.top=0,0===l.top&&0===l.left?n():r||(r=setInterval(function(){o.get(e)?(a(e,"top",e.scrollTop+l.top),a(e,"left",e.scrollLeft+l.left),s(e)):clearInterval(r)},50))}})}var i=e("../../lib/helper"),o=e("../instances"),s=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){r(e,o.get(e))}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],15:[function(e,t,n){function r(e,t,n,r){function i(t,n){a(e,"top",e.scrollTop-n),a(e,"left",e.scrollLeft-t),s(e)}function l(){b=!0}function u(){b=!1}function c(e){return e.targetTouches?e.targetTouches[0]:e}function h(e){return(!e.pointerType||"pen"!==e.pointerType||0!==e.buttons)&&(!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function d(e){if(h(e)){_=!0;var t=c(e);g.pageX=t.pageX,g.pageY=t.pageY,m=(new Date).getTime(),null!==y&&clearInterval(y),e.stopPropagation()}}function p(n){if(!_&&t.settings.swipePropagation&&d(n),!b&&_&&h(n)){var r=c(n),o={pageX:r.pageX,pageY:r.pageY},s=o.pageX-g.pageX,a=o.pageY-g.pageY;i(s,a),g=o;var l=(new Date).getTime(),u=l-m;u>0&&(v.x=s/u,v.y=a/u,m=l),function(n,r){var i=e.scrollTop,o=e.scrollLeft,s=Math.abs(n),a=Math.abs(r);if(a>s){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(s>a&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}(s,a)&&(n.stopPropagation(),n.preventDefault())}}function f(){!b&&_&&(_=!1,t.settings.swipeEasing&&(clearInterval(y),y=setInterval(function(){o.get(e)&&(v.x||v.y)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?clearInterval(y):(i(30*v.x,30*v.y),v.x*=.8,v.y*=.8):clearInterval(y)},10)))}var g={},m=0,v={},y=null,b=!1,_=!1;n?(t.event.bind(window,"touchstart",l),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",d),t.event.bind(e,"touchmove",p),t.event.bind(e,"touchend",f)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",l),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",d),t.event.bind(e,"pointermove",p),t.event.bind(e,"pointerup",f)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",l),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",d),t.event.bind(e,"MSPointerMove",p),t.event.bind(e,"MSPointerUp",f)))}var i=e("../../lib/helper"),o=e("../instances"),s=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){if(i.env.supportsTouch||i.env.supportsIePointer){r(e,o.get(e),i.env.supportsTouch,i.env.supportsIePointer)}}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],16:[function(e,t,n){var r=e("./instances"),i=e("./update-geometry"),o={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},s=e("./handler/native-scroll");t.exports=function(e,t){e.classList.add("ps");var n=r.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+n.settings.theme),n.settings.handlers.forEach(function(t){o[t](e)}),s(e),i(e)}},{"./handler/click-rail":9,"./handler/drag-scrollbar":10,"./handler/keyboard":11,"./handler/mouse-wheel":12,"./handler/native-scroll":13,"./handler/selection":14,"./handler/touch":15,"./instances":17,"./update-geometry":18}],17:[function(e,t,n){function r(e){return e.getAttribute("data-ps-id")}var i=e("../lib/helper"),o=e("./default-setting"),s=e("../lib/dom"),a=e("../lib/event-manager"),l=e("../lib/guid"),u={};n.add=function(e,t){var n=l();return function(e,t){e.setAttribute("data-ps-id",t)}(e,n),u[n]=new function(e,t){function n(){e.classList.add("ps--focus")}function r(){e.classList.remove("ps--focus")}this.settings=o();for(var l in t)this.settings[l]=t[l];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null,this.isRtl="rtl"===s.css(e,"direction"),this.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new a,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=s.appendTo(s.create("div","ps__scrollbar-x-rail"),e),this.scrollbarX=s.appendTo(s.create("div","ps__scrollbar-x"),this.scrollbarXRail),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",n),this.event.bind(this.scrollbarX,"blur",r),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null,this.scrollbarXBottom=i.toInt(s.css(this.scrollbarXRail,"bottom")),this.isScrollbarXUsingBottom=this.scrollbarXBottom==this.scrollbarXBottom,this.scrollbarXTop=this.isScrollbarXUsingBottom?null:i.toInt(s.css(this.scrollbarXRail,"top")),this.railBorderXWidth=i.toInt(s.css(this.scrollbarXRail,"borderLeftWidth"))+i.toInt(s.css(this.scrollbarXRail,"borderRightWidth")),s.css(this.scrollbarXRail,"display","block"),this.railXMarginWidth=i.toInt(s.css(this.scrollbarXRail,"marginLeft"))+i.toInt(s.css(this.scrollbarXRail,"marginRight")),s.css(this.scrollbarXRail,"display",""),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=s.appendTo(s.create("div","ps__scrollbar-y-rail"),e),this.scrollbarY=s.appendTo(s.create("div","ps__scrollbar-y"),this.scrollbarYRail),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",n),this.event.bind(this.scrollbarY,"blur",r),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null,this.scrollbarYRight=i.toInt(s.css(this.scrollbarYRail,"right")),this.isScrollbarYUsingRight=this.scrollbarYRight==this.scrollbarYRight,this.scrollbarYLeft=this.isScrollbarYUsingRight?null:i.toInt(s.css(this.scrollbarYRail,"left")),this.scrollbarYOuterWidth=this.isRtl?i.outerWidth(this.scrollbarY):null,this.railBorderYWidth=i.toInt(s.css(this.scrollbarYRail,"borderTopWidth"))+i.toInt(s.css(this.scrollbarYRail,"borderBottomWidth")),s.css(this.scrollbarYRail,"display","block"),this.railYMarginHeight=i.toInt(s.css(this.scrollbarYRail,"marginTop"))+i.toInt(s.css(this.scrollbarYRail,"marginBottom")),s.css(this.scrollbarYRail,"display",""),this.railYHeight=null,this.railYRatio=null}(e,t),u[n]},n.remove=function(e){delete u[r(e)],function(e){e.removeAttribute("data-ps-id")}(e)},n.get=function(e){return u[r(e)]}},{"../lib/dom":2,"../lib/event-manager":3,"../lib/guid":4,"../lib/helper":5,"./default-setting":7}],18:[function(e,t,n){function r(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}var i=e("../lib/helper"),o=e("../lib/dom"),s=e("./instances"),a=e("./update-scroll");t.exports=function(e){var t=s.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||((n=o.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&n.forEach(function(e){o.remove(e)}),o.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||((n=o.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&n.forEach(function(e){o.remove(e)}),o.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=r(t,i.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=i.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=r(t,i.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=i.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,o.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,o.css(t.scrollbarYRail,r),o.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),o.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,t),t.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,a(e,"left",0)),t.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,a(e,"top",0))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-scroll":19}],19:[function(e,t,n){var r=e("./instances"),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};t.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var o=r.get(e);"top"===t&&n>=o.contentHeight-o.containerHeight&&((n=o.contentHeight-o.containerHeight)-e.scrollTop<=2?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=o.contentWidth-o.containerWidth&&((n=o.contentWidth-o.containerWidth)-e.scrollLeft<=2?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),void 0===o.lastTop&&(o.lastTop=e.scrollTop),void 0===o.lastLeft&&(o.lastLeft=e.scrollLeft),"top"===t&&n<o.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>o.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<o.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>o.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&n!==o.lastTop&&(e.scrollTop=o.lastTop=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&n!==o.lastLeft&&(e.scrollLeft=o.lastLeft=n,e.dispatchEvent(i("ps-scroll-x")))}},{"./instances":17}],20:[function(e,t,n){var r=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances"),s=e("./update-geometry"),a=e("./update-scroll");t.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),s(e),a(e,"top",e.scrollTop),a(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-geometry":18,"./update-scroll":19}]},{},[1]),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PIXI=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use restrict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(e){return(e>0)-(e<0)},n.abs=function(e){var t=e>>31;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,(t|=n)|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),n.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],2:[function(e,t,n){function r(e,t,n){n=n||2;var r=t&&t.length,l=r?t[0]*n:e.length,c=i(e,0,l,n,!0),h=[];if(!c)return h;var d,g,m,v,y,b,_;if(r&&(c=function(e,t,n,r){var s,l,c,h,d,g=[];for(s=0,l=t.length;s<l;s++)c=t[s]*r,h=s<l-1?t[s+1]*r:e.length,(d=i(e,c,h,r,!1))===d.next&&(d.steiner=!0),g.push(function(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}(d));for(g.sort(a),s=0;s<g.length;s++)!function(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===s)return n.prev;var l,c=n,h=n.x,d=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=h&&u(o<d?i:s,o,h,d,o<d?s:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&p(r,e)&&(n=r,f=l),r=r.next;return n}(e,t)){var n=f(t,e);o(n,n.next)}}(g[s],n),n=o(n,n.next);return n}(e,t,c,n)),e.length>80*n){d=m=e[0],g=v=e[1];for(var x=n;x<l;x+=n)y=e[x],b=e[x+1],y<d&&(d=y),b<g&&(g=b),y>m&&(m=y),b>v&&(v=b);_=Math.max(m-d,v-g)}return s(c,h,n,d,g,_),h}function i(e,t,n,r,i){var o,s;if(i===y(e,t,n,r)>0)for(o=t;o<n;o+=r)s=g(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=g(o,e[o],e[o+1],s);return s&&h(s,s.next)&&(m(s),s=s.next),s}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!h(r,r.next)&&0!==c(r.prev,r,r.next))r=r.next;else{if(m(r),(r=t=r.prev)===r.next)return null;n=!0}}while(n||r!==t);return t}function s(e,t,n,r,i,a,g){if(e){!g&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=l(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,l,u=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<u&&(a++,r=r.nextZ);t++);for(l=u;a>0||l>0&&r;)0===a?(i=r,r=r.nextZ,l--):0!==l&&r?n.z<=r.z?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--):(i=n,n=n.nextZ,a--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}(e,r,i,a);for(var v,y,b=e;e.prev!==e.next;)if(v=e.prev,y=e.next,a?function(e,t,n,r){var i=e.prev,o=e,s=e.next;if(c(i,o,s)>=0)return!1;var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,h=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,d=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,p=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,f=l(a,h,t,n,r),g=l(d,p,t,n,r),m=e.nextZ;for(;m&&m.z<=g;){if(m!==e.prev&&m!==e.next&&u(i.x,i.y,o.x,o.y,s.x,s.y,m.x,m.y)&&c(m.prev,m,m.next)>=0)return!1;m=m.nextZ}m=e.prevZ;for(;m&&m.z>=f;){if(m!==e.prev&&m!==e.next&&u(i.x,i.y,o.x,o.y,s.x,s.y,m.x,m.y)&&c(m.prev,m,m.next)>=0)return!1;m=m.prevZ}return!0}(e,r,i,a):function(e){var t=e.prev,n=e,r=e.next;if(c(t,n,r)>=0)return!1;var i=e.next.next;for(;i!==e.prev;){if(u(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&c(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(e))t.push(v.i/n),t.push(e.i/n),t.push(y.i/n),m(e),e=y.next,b=y.next;else if((e=y)===b){g?1===g?s(e=function(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!h(i,o)&&d(i,r,r.next,o)&&p(i,o)&&p(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),m(r),m(r.next),r=e=o),r=r.next}while(r!==e);return r}(e,t,n),t,n,r,i,a,2):2===g&&function(e,t,n,r,i,a){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&d(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&p(e,t)&&p(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}(l,u)){var c=f(l,u);return l=o(l,l.next),c=o(c,c.next),s(l,t,n,r,i,a),void s(c,t,n,r,i,a)}u=u.next}l=l.next}while(l!==e)}(e,t,n,r,i,a):s(o(e),t,n,r,i,a,1);break}}}function a(e,t){return e.x-t.x}function l(e,t,n,r,i){return e=32767*(e-n)/i,t=32767*(t-r)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function u(e,t,n,r,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function c(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function h(e,t){return e.x===t.x&&e.y===t.y}function d(e,t,n,r){return!!(h(e,t)&&h(n,r)||h(e,r)&&h(n,t))||c(e,t,n)>0!=c(e,t,r)>0&&c(n,r,e)>0!=c(n,r,t)>0}function p(e,t){return c(e.prev,e,e.next)<0?c(e,t,e.next)>=0&&c(e,e.prev,t)>=0:c(e,t,e.prev)<0||c(e,e.next,t)<0}function f(e,t){var n=new v(e.i,e.x,e.y),r=new v(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function g(e,t,n,r){var i=new v(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function m(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function v(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}t.exports=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(y(e,0,o,n));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*n,c=a<l-1?t[a+1]*n:e.length;s-=Math.abs(y(e,u,c,n))}var h=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,p=r[a+1]*n,f=r[a+2]*n;h+=Math.abs((e[d]-e[f])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[f+1]-e[d+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},{}],3:[function(e,t,n){function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(a=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)s.call(e,t)&&n.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e,t){var n=a?a+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},o.prototype.emit=function(e,t,n,r,i,o){var s=a?a+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,i),!0;case 6:return c.fn.call(c.context,t,n,r,i,o),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,n){var r=new i(t,n||this),o=a?a+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.once=function(e,t,n){var r=new i(t,n||this,!0),o=a?a+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.removeListener=function(e,t,n,i){var o=a?a+e:e;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[o]);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||n&&s[l].context!==n)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new r:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,void 0!==t&&(t.exports=o)},{}],4:[function(e,t,n){!function(e){var n=/iPhone/i,r=/iPod/i,i=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,a=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,u=/Windows Phone/i,c=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,h=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,f=/(CriOS|Chrome)(?=.*\bMobile\b)/i,g=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),v=function(e,t){return e.test(t)},y=function(e){var t=e||navigator.userAgent,y=t.split("[FBAN");if(void 0!==y[1]&&(t=y[0]),void 0!==(y=t.split("Twitter"))[1]&&(t=y[0]),this.apple={phone:v(n,t),ipod:v(r,t),tablet:!v(n,t)&&v(i,t),device:v(n,t)||v(r,t)||v(i,t)},this.amazon={phone:v(a,t),tablet:!v(a,t)&&v(l,t),device:v(a,t)||v(l,t)},this.android={phone:v(a,t)||v(o,t),tablet:!v(a,t)&&!v(o,t)&&(v(l,t)||v(s,t)),device:v(a,t)||v(l,t)||v(o,t)||v(s,t)},this.windows={phone:v(u,t),tablet:v(c,t),device:v(u,t)||v(c,t)},this.other={blackberry:v(h,t),blackberry10:v(d,t),opera:v(p,t),firefox:v(g,t),chrome:v(f,t),device:v(h,t)||v(d,t)||v(p,t)||v(g,t)||v(f,t)},this.seven_inch=v(m,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},b=function(){var e=new y;return e.Class=y,e};void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=y:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=b():e.isMobile=b()}(this)},{}],5:[function(e,t,n){var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)i.call(n,u)&&(a[u]=n[u]);if(r){s=r(n);for(var c=0;c<s.length;c++)o.call(n,s[c])&&(a[s[c]]=n[s[c]])}}return a}},{}],6:[function(e,t,n){var r=new ArrayBuffer(0),i=function(e,t,n,i){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=i||e.STATIC_DRAW,this.data=r,n&&this.upload(n),this._updateID=0};i.prototype.upload=function(e,t,n){n||this.bind();var r=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?r.bufferSubData(this.type,t,e):r.bufferData(this.type,e,this.drawType),this.data=e},i.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(e,t,n){return new i(e,e.ARRAY_BUFFER,t,n)},i.createIndexBuffer=function(e,t,n){return new i(e,e.ELEMENT_ARRAY_BUFFER,t,n)},i.create=function(e,t,n,r){return new i(e,t,n,r)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=i},{}],7:[function(e,t,n){var r=e("./GLTexture"),i=function(e,t,n){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=n||100};i.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new r(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(e,t,n,r){this.bind();var i=this.gl;i.clearColor(e,t,n,r),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},i.prototype.resize=function(e,t){var n=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t))},i.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(e,t,n,o){var s=r.fromData(e,null,t,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(e,t,n);return a.enableTexture(s),a.unbind(),a},i.createFloat32=function(e,t,n,o){var s=new r.fromData(e,o,t,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(e,t,n);return a.enableTexture(s),a.unbind(),a},t.exports=i},{"./GLTexture":9}],8:[function(e,t,n){var r=e("./shader/compileProgram"),i=e("./shader/extractAttributes"),o=e("./shader/extractUniforms"),s=e("./shader/setPrecision"),a=e("./shader/generateUniformAccessObject"),l=function(e,t,n,l,u){this.gl=e,l&&(t=s(t,l),n=s(n,l)),this.program=r(e,t,n,u),this.attributes=i(e,this.program),this.uniformData=o(e,this.program),this.uniforms=a(e,this.uniformData)};l.prototype.bind=function(){this.gl.useProgram(this.program)},l.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;this.gl.deleteProgram(this.program)},t.exports=l},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18,"./shader/setPrecision":22}],9:[function(e,t,n){var r=function(e,t,n,r,i){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=n||-1,this.format=r||e.RGBA,this.type=i||e.UNSIGNED_BYTE};r.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var n=e.videoWidth||e.width,r=e.videoHeight||e.height;r!==this.height||n!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=n,this.height=r};var i=!1;r.prototype.uploadData=function(e,t,n){this.bind();var r=this.gl;if(e instanceof Float32Array){if(!i){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||n!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,t,n,0,this.format,this.type,e||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,t,n,this.format,this.type,e||null),this.width=t,this.height=n},r.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},r.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},r.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},r.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},r.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},r.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},r.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},r.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},r.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},r.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},r.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},r.fromSource=function(e,t,n){var i=new r(e);return i.premultiplyAlpha=n||!1,i.upload(t),i},r.fromData=function(e,t,n,i){var o=new r(e);return o.uploadData(t,n,i),o},t.exports=r},{}],10:[function(e,t,n){function r(e,t){if(this.nativeVaoExtension=null,r.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var n=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(n),attribState:new Array(n)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=e("./setVertexAttribArrays");r.prototype.constructor=r,t.exports=r,r.FORCE_NATIVE=!1,r.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},r.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},r.prototype.activate=function(){for(var e=this.gl,t=null,n=0;n<this.attributes.length;n++){var r=this.attributes[n];t!==r.buffer&&(r.buffer.bind(),t=r.buffer),e.vertexAttribPointer(r.attribute.location,r.attribute.size,r.type||e.FLOAT,r.normalized||!1,r.stride||0,r.start||0)}return i(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},r.prototype.addAttribute=function(e,t,n,r,i,o){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:n||this.gl.FLOAT,normalized:r||!1,stride:i||0,start:o||0}),this.dirty=!0,this},r.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},r.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},r.prototype.draw=function(e,t,n){var r=this.gl;return this.indexBuffer?r.drawElements(e,t||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(n||0)):r.drawArrays(e,n,t||this.getSize()),this},r.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},r.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},{"./setVertexAttribArrays":13}],11:[function(e,t,n){t.exports=function(e,t){var n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!n)throw new Error("This browser does not support webGL. Try using the canvas renderer");return n}},{}],12:[function(e,t,n){var r={createContext:e("./createContext"),setVertexAttribArrays:e("./setVertexAttribArrays"),GLBuffer:e("./GLBuffer"),GLFramebuffer:e("./GLFramebuffer"),GLShader:e("./GLShader"),GLTexture:e("./GLTexture"),VertexArrayObject:e("./VertexArrayObject"),shader:e("./shader")};void 0!==t&&t.exports&&(t.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(e,t,n){t.exports=function(e,t,n){var r;if(n){var i=n.tempAttribState,o=n.attribState;for(r=0;r<i.length;r++)i[r]=!1;for(r=0;r<t.length;r++)i[t[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==i[r]&&(o[r]=i[r],n.attribState[r]?e.enableVertexAttribArray(r):e.disableVertexAttribArray(r))}else for(r=0;r<t.length;r++){var s=t[r];e.enableVertexAttribArray(s.attribute.location)}}},{}],14:[function(e,t,n){var r=function(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log(e.getShaderInfoLog(r)),null)};t.exports=function(e,t,n,i){var o=r(e,e.VERTEX_SHADER,t),s=r(e,e.FRAGMENT_SHADER,n),a=e.createProgram();if(e.attachShader(a,o),e.attachShader(a,s),i)for(var l in i)e.bindAttribLocation(a,i[l],l);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(a,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(a)),e.deleteProgram(a),a=null),e.deleteShader(o),e.deleteShader(s),a}},{}],15:[function(e,t,n){var r=function(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t};t.exports=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return r(2*t);case"bvec3":return r(3*t);case"bvec4":return r(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],16:[function(e,t,n){var r=e("./mapType"),i=e("./mapSize"),o=function(e,t,n,r){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,n||0,r||0)};t.exports=function(e,t){for(var n={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var l=e.getActiveAttrib(t,a),u=r(e,l.type);n[l.name]={type:u,size:i(u),location:e.getAttribLocation(t,l.name),pointer:o}}return n}},{"./mapSize":20,"./mapType":21}],17:[function(e,t,n){var r=e("./mapType"),i=e("./defaultValue");t.exports=function(e,t){for(var n={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=e.getActiveUniform(t,s),l=a.name.replace(/\[.*?\]/,""),u=r(e,a.type);n[l]={type:u,size:a.size,location:e.getUniformLocation(t,l),value:i(u,a.size)}}return n}},{"./defaultValue":15,"./mapType":21}],18:[function(e,t,n){var r=function(e){var t=s.replace("%%",e);return new Function(t)},i=function(e,t){var n,r=a.replace(/%%/g,e);return(n=1===t.size?l[t.type]:u[t.type])&&(r+="\nthis.gl."+n+";"),new Function("value",r)},o=function(e,t){for(var n=t,r=0;r<e.length-1;r++){var i=n[e[r]]||{data:{}};n[e[r]]=i,n=i}return n},s=["return this.data.%%.value;"].join("\n"),a=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),l={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},u={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};t.exports=function(e,t){var n={data:{}};n.gl=e;for(var s=Object.keys(t),a=0;a<s.length;a++){var l=s[a],u=l.split("."),c=u[u.length-1],h=o(u,n),d=t[l];h.data[c]=d,h.gl=e,Object.defineProperty(h,c,{get:r(c),set:i(c,d)})}return n}},{}],19:[function(e,t,n){t.exports={compileProgram:e("./compileProgram"),defaultValue:e("./defaultValue"),extractAttributes:e("./extractAttributes"),extractUniforms:e("./extractUniforms"),generateUniformAccessObject:e("./generateUniformAccessObject"),setPrecision:e("./setPrecision"),mapSize:e("./mapSize"),mapType:e("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21,"./setPrecision":22}],20:[function(e,t,n){var r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(e){return r[e]}},{}],21:[function(e,t,n){var r=null,i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(e,t){if(!r){var n=Object.keys(i);r={};for(var o=0;o<n.length;++o){var s=n[o];r[e[s]]=i[s]}}return r[t]}},{}],22:[function(e,t,n){t.exports=function(e,t){return"precision"!==e.substring(0,9)?"precision "+t+" float;\n"+e:e}},{}],23:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,i="/"===s.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===s(e,-1);return(e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),s=Math.min(i.length,o.length),a=s,l=0;l<s;l++)if(i[l]!==o[l]){a=l;break}var u=[];for(l=a;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:24}],24:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(){g&&p&&(g=!1,p.length?f=p.concat(f):m=-1,f.length&&a())}function a(){if(!g){var e=o(s);g=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;)p&&p[m].run();m=-1,t=f.length}p=null,g=!1,function(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,h,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,f=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||g||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],25:[function(e,t,n){(function(e){!function(r){function i(e){throw new RangeError(C[e])}function o(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]);return r+o((e=e.replace(O,".")).split("."),t).join(".")}function a(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function l(e){return o(e,function(e){var t="";return e>65535&&(t+=k((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=k(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?D(e/E):e>>1,e+=D(e/t);e>R*w>>1;r+=_)e=D(e/R);return D(r+(R+1)*e/(e+T))}function d(e){var t,n,r,o,s,a,c,d,p,f,g=[],m=e.length,v=0,y=I,T=S;for((n=e.lastIndexOf(P))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),g.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<m;){for(s=v,a=1,c=_;o>=m&&i("invalid-input"),((d=u(e.charCodeAt(o++)))>=_||d>D((b-v)/a))&&i("overflow"),v+=d*a,p=c<=T?x:c>=T+w?w:c-T,!(d<p);c+=_)a>D(b/(f=_-p))&&i("overflow"),a*=f;T=h(v-s,t=g.length+1,0==s),D(v/t)>b-y&&i("overflow"),y+=D(v/t),v%=t,g.splice(v++,0,y)}return l(g)}function p(e){var t,n,r,o,s,l,u,d,p,f,g,m,v,y,T,E=[];for(m=(e=a(e)).length,t=I,n=0,s=S,l=0;l<m;++l)(g=e[l])<128&&E.push(k(g));for(r=o=E.length,o&&E.push(P);r<m;){for(u=b,l=0;l<m;++l)(g=e[l])>=t&&g<u&&(u=g);for(u-t>D((b-n)/(v=r+1))&&i("overflow"),n+=(u-t)*v,t=u,l=0;l<m;++l)if((g=e[l])<t&&++n>b&&i("overflow"),g==t){for(d=n,p=_;f=p<=s?x:p>=s+w?w:p-s,!(d<f);p+=_)T=d-f,y=_-f,E.push(k(c(f+T%y,0))),d=D(T/y);E.push(k(c(d,0))),s=h(n,v,r==o),n=0,++r}++n,++t}return E.join("")}var f="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof t&&t&&!t.nodeType&&t,m="object"==typeof e&&e;m.global!==m&&m.window!==m&&m.self!==m||(r=m);var v,y,b=2147483647,_=36,x=1,w=26,T=38,E=700,S=72,I=128,P="-",M=/^xn--/,A=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=_-x,D=Math.floor,k=String.fromCharCode;if(v={version:"1.4.1",ucs2:{decode:a,encode:l},decode:d,encode:p,toASCII:function(e){return s(e,function(e){return A.test(e)?"xn--"+p(e):e})},toUnicode:function(e){return s(e,function(e){return M.test(e)?d(e.slice(4).toLowerCase()):e})}},f&&g)if(t.exports==f)g.exports=v;else for(y in v)v.hasOwnProperty(y)&&(f[y]=v[y]);else r.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var h,d,p,f,g=e[c].replace(a,"%20"),m=g.indexOf(n);m>=0?(h=g.substr(0,m),d=g.substr(m+1)):(h=g,d=""),p=decodeURIComponent(h),f=decodeURIComponent(d),r(s,p)?i(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],27:[function(e,t,n){function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(s(e),function(s){var a=encodeURIComponent(i(s))+n;return o(e[s])?r(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],28:[function(e,t,n){n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":26,"./encode":27}],29:[function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&s.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}var o=e("punycode"),s=e("./util");n.parse=i,n.resolve=function(e,t){return i(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},n.format=function(e){return s.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)},n.Url=r;var a=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(c),d=["%","/","?",";","#"].concat(h),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=e("querystring");r.prototype.parse=function(e,t,n){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",l=e.split(i);l[0]=l[0].replace(/\\/g,"/");var c=e=l.join(i);if(c=c.trim(),!n&&1===e.split("#").length){var _=u.exec(c);if(_)return this.path=c,this.href=c,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=a.exec(c);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,c=c.substr(x.length)}if(n||x||c.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===c.substr(0,2);!T||x&&v[x]||(c=c.substr(2),this.slashes=!0)}if(!v[x]&&(T||x&&!y[x])){for(var E=-1,S=0;S<p.length;S++){-1!==(M=c.indexOf(p[S]))&&(-1===E||M<E)&&(E=M)}var I,P;-1!==(P=-1===E?c.lastIndexOf("@"):c.lastIndexOf("@",E))&&(I=c.slice(0,P),c=c.slice(P+1),this.auth=decodeURIComponent(I)),E=-1;for(S=0;S<d.length;S++){var M;-1!==(M=c.indexOf(d[S]))&&(-1===E||M<E)&&(E=M)}-1===E&&(E=c.length),this.host=c.slice(0,E),c=c.slice(E),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var O=this.hostname.split(/\./),C=(S=0,O.length);S<C;S++){var R=O[S];if(R&&!R.match(f)){for(var D="",k=0,L=R.length;k<L;k++)R.charCodeAt(k)>127?D+="x":D+=R[k];if(!D.match(f)){var N=O.slice(0,S),U=O.slice(S+1),F=R.match(g);F&&(N.push(F[1]),U.unshift(F[2])),U.length&&(c="/"+U.join(".")+c),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=o.toASCII(this.hostname));var B=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+B,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==c[0]&&(c="/"+c))}if(!m[w])for(S=0,C=h.length;S<C;S++){var G=h[S];if(-1!==c.indexOf(G)){var X=encodeURIComponent(G);X===G&&(X=escape(G)),c=c.split(G).join(X)}}var H=c.indexOf("#");-1!==H&&(this.hash=c.substr(H),c=c.slice(0,H));var Y=c.indexOf("?");if(-1!==Y?(this.search=c.substr(Y),this.query=c.substr(Y+1),t&&(this.query=b.parse(this.query)),c=c.slice(0,Y)):t&&(this.search="",this.query={}),c&&(this.pathname=c),y[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var W=this.search||"";this.path=B+W}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(s.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=e[c])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var p=h[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=_||b||n.host&&e.pathname,w=x,T=n.pathname&&n.pathname.split("/")||[],E=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),x=x&&(""===f[0]||""===T[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),n.search=e.search,n.query=e.query;else if(!s.isNullOrUndefined(e.search)){if(E){n.hostname=n.host=T.shift();(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return n.search=e.search,n.query=e.query,s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=T.slice(-1)[0],I=(n.host||e.host||T.length>1)&&("."===S||".."===S)||""===S,P=0,M=T.length;M>=0;M--)"."===(S=T[M])?T.splice(M,1):".."===S?(T.splice(M,1),P++):P&&(T.splice(M,1),P--);if(!x&&!w)for(;P--;P)T.unshift("..");!x||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),I&&"/"!==T.join("/").substr(-1)&&T.push("");var A=""===T[0]||T[0]&&"/"===T[0].charAt(0);if(E){n.hostname=n.host=A?"":T.length?T.shift():"";var O;(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return(x=x||n.host&&T.length)&&!A&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":30,punycode:25,querystring:28}],30:[function(e,t,n){t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],31:[function(e,t,n){t.exports=function(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}}},{}],32:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(e("mini-signals")),s=r(e("parse-uri")),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./async")),l=r(e("./Resource")),u=/(#[\w-]+)?$/,c=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,n){return t._loadResource(e,n)},this._queue=a.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default}return e.prototype.add=function(e,t,n,r){if(Array.isArray(e)){for(var o=0;o<e.length;++o)this.add(e[o]);return this}if("object"===(void 0===e?"undefined":i(e))&&(r=t||e.callback||e.onComplete,n=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(r=n,n=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new l.default(e,t,n),"function"==typeof r&&this.resources[e].onAfterMiddleware.once(r),this.loading){for(var s=n.parentResource,a=[],u=0;u<s.children.length;++u)s.children[u].isComplete||a.push(s.children[u]);var c=s.progressChunk*(a.length+1)/(a.length+2);s.children.push(this.resources[e]),s.progressChunk=c;for(var h=0;h<a.length;++h)a[h].progressChunk=c;this.resources[e].progressChunk=c}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;for(var t=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=t;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},e.prototype._prepareUrl=function(e){var t=(0,s.default)(e,{strictMode:!0}),n=void 0;if(n=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var r=u.exec(n)[0];-1!==(n=n.substr(0,n.length-r.length)).indexOf("?")?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=r}return n},e.prototype._loadResource=function(e,t){var n=this;e._dequeue=t,a.eachSeries(this._beforeMiddleware,function(t,r){t.call(n,e,function(){r(e.isComplete?{}:null)})},function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())},!0)},e.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),a.eachSeries(this._afterMiddleware,function(n,r){n.call(t,e,r)},function(){e.onAfterMiddleware.dispatch(e),t.progress+=e.progressChunk,t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&(t.progress=100,t._onComplete())},!0)},e}();n.default=c},{"./Resource":33,"./async":34,"mini-signals":38,"parse-uri":39}],33:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){}function o(e,t,n){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=n)}function s(e){return e.toString().replace("object ","")}n.__esModule=!0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=r(e("parse-uri")),u=r(e("mini-signals")),c=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),h=null,d=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=t,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=i,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new u.default,this.onProgress=new u.default,this.onComplete=new u.default,this.onAfterMiddleware=new u.default}return e.setExtensionLoadType=function(t,n){o(e._loadTypeMap,t,n)},e.setExtensionXhrType=function(t,n){o(e._xhrTypeMap,t,n)},e.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},e.prototype.load=function(t){var n=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(n)},1);else switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:c&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e.prototype._hasFlag=function(e){return!!(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(t)?t[n]:t));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},e.prototype._createSource=function(e,t,n){n||(n=e+"/"+this._getExtension(t));var r=document.createElement("source");return r.src=t,r.type=n,r},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(s(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnAbort=function(){this.abort(s(this.xhr)+" Request was aborted by the user.")},e.prototype._xdrOnTimeout=function(){this.abort(s(this.xhr)+" Request timed out.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,n="",r=void 0===t.status?200:t.status;""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(n=t.responseText),0===r&&n.length>0?r=200:1223===r&&(r=204);if(2===(r/100|0)){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||n;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,h||(h=document.createElement("a")),h.href=e;var n=!(e=(0,l.default)(h.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,r=e.protocol?e.protocol+":":"";return e.host===t.hostname&&n&&r===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var r=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(r>-1?r:e.length,i>-1?i:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},a(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();n.default=d,d.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},d.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},d.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},d.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},d._loadTypeMap={gif:d.LOAD_TYPE.IMAGE,png:d.LOAD_TYPE.IMAGE,bmp:d.LOAD_TYPE.IMAGE,jpg:d.LOAD_TYPE.IMAGE,jpeg:d.LOAD_TYPE.IMAGE,tif:d.LOAD_TYPE.IMAGE,tiff:d.LOAD_TYPE.IMAGE,webp:d.LOAD_TYPE.IMAGE,tga:d.LOAD_TYPE.IMAGE,svg:d.LOAD_TYPE.IMAGE,"svg+xml":d.LOAD_TYPE.IMAGE,mp3:d.LOAD_TYPE.AUDIO,ogg:d.LOAD_TYPE.AUDIO,wav:d.LOAD_TYPE.AUDIO,mp4:d.LOAD_TYPE.VIDEO,webm:d.LOAD_TYPE.VIDEO},d._xhrTypeMap={xhtml:d.XHR_RESPONSE_TYPE.DOCUMENT,html:d.XHR_RESPONSE_TYPE.DOCUMENT,htm:d.XHR_RESPONSE_TYPE.DOCUMENT,xml:d.XHR_RESPONSE_TYPE.DOCUMENT,tmx:d.XHR_RESPONSE_TYPE.DOCUMENT,svg:d.XHR_RESPONSE_TYPE.DOCUMENT,tsx:d.XHR_RESPONSE_TYPE.DOCUMENT,gif:d.XHR_RESPONSE_TYPE.BLOB,png:d.XHR_RESPONSE_TYPE.BLOB,bmp:d.XHR_RESPONSE_TYPE.BLOB,jpg:d.XHR_RESPONSE_TYPE.BLOB,jpeg:d.XHR_RESPONSE_TYPE.BLOB,tif:d.XHR_RESPONSE_TYPE.BLOB,tiff:d.XHR_RESPONSE_TYPE.BLOB,webp:d.XHR_RESPONSE_TYPE.BLOB,tga:d.XHR_RESPONSE_TYPE.BLOB,json:d.XHR_RESPONSE_TYPE.JSON,text:d.XHR_RESPONSE_TYPE.TEXT,txt:d.XHR_RESPONSE_TYPE.TEXT,ttf:d.XHR_RESPONSE_TYPE.BUFFER,otf:d.XHR_RESPONSE_TYPE.BUFFER},d.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":38,"parse-uri":39}],34:[function(e,t,n){function r(){}function i(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}n.__esModule=!0,n.eachSeries=function(e,t,n,r){var i=0,o=e.length;!function s(a){a||i===o?n&&n(a):r?setTimeout(function(){t(e[i++],s)},1):t(e[i++],s)}()},n.queue=function(e,t){function n(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(s.started=!0,null==e&&s.idle())setTimeout(function(){return s.drain()},1);else{var i={data:e,callback:"function"==typeof n?n:r};t?s._tasks.unshift(i):s._tasks.push(i),setTimeout(function(){return s.process()},1)}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var o=0,s={_tasks:[],concurrency:t,saturated:r,unsaturated:r,buffer:t/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){o=0,s.drain=r,s.started=!1,s._tasks=[]},unshift:function(e,t){n(e,!0,t)},process:function(){for(;!s.paused&&o<s.concurrency&&s._tasks.length;){var t=s._tasks.shift();0===s._tasks.length&&s.empty(),(o+=1)===s.concurrency&&s.saturated(),e(t.data,i(function(e){return function(){o-=1,e.callback.apply(e,arguments),null!=arguments[0]&&s.error(arguments[0],e.data),o<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}(t)))}},length:function(){return s._tasks.length},running:function(){return o},idle:function(){return s._tasks.length+o===0},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var e=1;e<=s.concurrency;e++)s.process()}}};return s}},{}],35:[function(e,t,n){n.__esModule=!0,n.encodeBinary=function(e){for(var t="",n=0;n<e.length;){for(var i=[0,0,0],o=[0,0,0,0],s=0;s<i.length;++s)n<e.length?i[s]=255&e.charCodeAt(n++):i[s]=0;switch(o[0]=i[0]>>2,o[1]=(3&i[0])<<4|i[1]>>4,o[2]=(15&i[1])<<2|i[2]>>6,o[3]=63&i[2],n-(e.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var a=0;a<o.length;++a)t+=r.charAt(o[a])}return t};var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(e,t,n){var r=e("./Loader").default,i=e("./Resource").default,o=e("./async"),s=e("./b64");r.Resource=i,r.async=o,r.base64=s,t.exports=r,t.exports.default=r},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.blobMiddlewareFactory=function(){return function(e,t){if(e.data){if(e.xhr&&e.xhrType===o.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var n=function(){var n=a.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=n,e.type=o.default.TYPE.IMAGE,e.data.onload=function(){a.revokeObjectURL(n),e.data.onload=null,t()},{v:void 0}}();if("object"===(void 0===n?"undefined":i(n)))return n.v}}else{var r=e.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return e.data=new Image,e.data.src="data:"+r+";base64,"+s.default.encodeBinary(e.xhr.responseText),e.type=o.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}};var o=r(e("../../Resource")),s=r(e("../../b64")),a=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t,n,i){void 0===n&&(n=!1),r(this,e),this._fn=t,this._once=n,this._thisArg=i,this._next=this._prev=this._owner=null}return o(e,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),e}(),a=function(){function e(){r(this,e),this._head=this._tail=void 0}return o(e,[{key:"handlers",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this._head;if(e)return!!t;for(var n=[];t;)n.push(t),t=t._next;return n}},{key:"has",value:function(e){if(!(e instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return i(this,new s(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return i(this,new s(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();a.MiniSignalBinding=s,n.default=a,t.exports=n.default},{}],39:[function(e,t,n){t.exports=function(e,t){t=t||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(i[n.q.name][t]=r)}),i}},{}],40:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),o=r(e("ismobilejs")),s=r(e("./accessibleTarget"));i.utils.mixins.delayMixin(i.DisplayObject.prototype,s.default);var a=100,l=0,u=0,c=2,h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!o.default.tablet&&!o.default.phone||navigator.isCocoonJS||this.createTouchHook();var n=document.createElement("div");n.style.width=a+"px",n.style.height=a+"px",n.style.position="absolute",n.style.top=l+"px",n.style.left=u+"px",n.style.zIndex=c,this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,n=t.length-1;n>=0;n--)this.updateAccessibleObjects(t[n])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,n=e.height/this.renderer.height,r=this.div;r.style.left=e.left+"px",r.style.top=e.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,i.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{r=s._accessibleDiv;var a=s.hitArea,l=s.worldTransform;s.hitArea?(r.style.left=(l.tx+a.x*l.a)*t+"px",r.style.top=(l.ty+a.y*l.d)*n+"px",r.style.width=a.width*l.a*t+"px",r.style.height=a.height*l.d*n+"px"):(a=s.getBounds(),this.capHitArea(a),r.style.left=a.x*t+"px",r.style.top=a.y*n+"px",r.style.width=a.width*t+"px",r.style.height=a.height*n+"px")}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width=a+"px",t.style.height=a+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=c,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleTitle||e.accessibleHint||(t.title="displayObject "+this.tabIndex),e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},e.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(){this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();n.default=h,i.WebGLRenderer.registerPlugin("accessibility",h),i.CanvasRenderer.registerPlugin("accessibility",h)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(e,t,n){n.__esModule=!0,n.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("./accessibleTarget");Object.defineProperty(n,"accessibleTarget",{enumerable:!0,get:function(){return r(i).default}});var o=e("./AccessibilityManager");Object.defineProperty(n,"AccessibilityManager",{enumerable:!0,get:function(){return r(o).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./autoDetectRenderer"),s=r(e("./display/Container")),a=e("./ticker"),l=r(e("./settings")),u=e("./const"),c=function(){function e(t,n,r,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"number"==typeof t&&(t=Object.assign({width:t,height:n||l.default.RENDER_OPTIONS.height,forceCanvas:!!i,sharedTicker:!!u},r)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,o.autoDetectRenderer)(t),this.stage=new s.default,this._ticker=null,this.ticker=t.sharedTicker?a.shared:new a.Ticker,t.autoStart&&this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e){var t=this._ticker;this.ticker=null,t.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},i(e,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,u.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}();n.default=c},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":120}],44:[function(e,t,n){function r(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var n=e.slice(0);return n.unshift("precision "+t+" float;"),n}}else if("precision"!==e.substring(0,9))return"precision "+t+" float;\n"+e;return e}n.__esModule=!0;var i=e("pixi-gl-core"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./settings")),s=function(e){function t(n,i,s){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r(i,o.default.PRECISION_VERTEX),r(s,o.default.PRECISION_FRAGMENT)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.GLShader);n.default=s},{"./settings":101,"pixi-gl-core":12}],45:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.autoDetectRenderer=function(e,t,n,r){var a=e&&e.forceCanvas;return void 0!==r&&(a=r),!a&&i.isWebGLSupported()?new s.default(e,t,n):new o.default(e,t,n)};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils")),o=r(e("./renderers/canvas/CanvasRenderer")),s=r(e("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":124}],46:[function(e,t,n){n.__esModule=!0;n.VERSION="4.5.6",n.PI_2=2*Math.PI,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},n.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},n.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},n.SCALE_MODES={LINEAR:0,NEAREST:1},n.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},n.GC_MODES={AUTO:0,MANUAL:1},n.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,n.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,n.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,n.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},n.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},n.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},n.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},n.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(e,t,n){n.__esModule=!0;var r=e("../math"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(e=e||new r.Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=e[0],s=e[1];t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=e[2],s=e[3],t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=e[4],s=e[5],t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=e[6],s=e[7],t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},e.prototype.addFrame=function(e,t,n,r,i){var o=e.worldTransform,s=o.a,a=o.b,l=o.c,u=o.d,c=o.tx,h=o.ty,d=this.minX,p=this.minY,f=this.maxX,g=this.maxY,m=s*t+l*n+c,v=a*t+u*n+h;d=m<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,v=a*r+u*n+h,d=(m=s*r+l*n+c)<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,v=a*t+u*i+h,d=(m=s*t+l*i+c)<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,v=a*r+u*i+h,d=(m=s*r+l*i+c)<d?m:d,p=v<p?v:p,f=m>f?m:f,g=v>g?v:g,this.minX=d,this.minY=p,this.maxX=f,this.maxY=g},e.prototype.addVertices=function(e,t,n,r){for(var i=e.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=this.minX,d=this.minY,p=this.maxX,f=this.maxY,g=n;g<r;g+=2){var m=t[g],v=t[g+1],y=o*m+a*v+u,b=l*v+s*m+c;h=y<h?y:h,d=b<d?b:d,p=y>p?y:p,f=b>f?b:f}this.minX=h,this.minY=d,this.maxX=p,this.maxY=f},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},e}();n.default=i},{"../math":70}],48:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("../utils"),o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n.children=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)this.addChild(arguments[n]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(e);(0,i.removeItems)(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,(0,i.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,i.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=e,r="number"==typeof t?t:this.children.length,i=r-n,o=void 0;if(i>0&&i<=r){o=this.children.splice(n,i);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}n&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(e);e.flush(),n&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var n="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(t)},r(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./DisplayObject")).default);n.default=o,o.prototype.containerUpdateTransform=o.prototype.updateTransform},{"../utils":124,"./DisplayObject":49}],49:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(e("eventemitter3")),s=e("../const"),a=r(e("../settings")),l=r(e("./TransformStatic")),u=r(e("./Transform")),c=r(e("./Bounds")),h=e("../math"),d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this)),r=a.default.TRANSFORM_MODE===s.TRANSFORM_MODE.STATIC?l.default:u.default;return n.tempDisplayObjectParent=null,n.transform=new r,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n.filterArea=null,n._filters=null,n._enabledFilters=null,n._bounds=new c.default,n._boundsID=0,n._lastBoundsID=-1,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new h.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect);var r=this.getBounds(!1,e);return this.parent=n,this.transform=t,r},t.prototype.toGlobal=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.renderWebGL=function(e){},t.prototype.renderCanvas=function(e){},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i(t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),t}(o.default);n.default=d,d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("../math"),o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n.position=new i.Point(0,0),n.scale=new i.Point(1,1),n.skew=new i.ObservablePoint(n.updateSkew,n,0,0),n.pivot=new i.Point(0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},t.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._worldID++},t.prototype.setFromMatrix=function(e){e.decompose(this)},r(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./TransformBase")).default);n.default=o},{"../math":70,"./TransformBase":51}],51:[function(e,t,n){n.__esModule=!0;var r=e("../math"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(e){var t=e.worldTransform,n=this.worldTransform,r=this.localTransform;n.a=r.a*t.a+r.b*t.c,n.b=r.a*t.b+r.b*t.d,n.c=r.c*t.a+r.d*t.c,n.d=r.c*t.b+r.d*t.d,n.tx=r.tx*t.a+r.ty*t.c+t.tx,n.ty=r.tx*t.b+r.ty*t.d+t.ty,this._worldID++},e}();n.default=i,i.prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},{"../math":70}],52:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("../math"),o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return n.position=new i.ObservablePoint(n.onChange,n,0,0),n.scale=new i.ObservablePoint(n.onChange,n,1,1),n.pivot=new i.ObservablePoint(n.onChange,n,0,0),n.skew=new i.ObservablePoint(n.updateSkew,n,0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n._localID=0,n._currentLocalID=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},r(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./TransformBase")).default);n.default=o},{"../math":70,"./TransformBase":51}],53:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("../display/Container")),o=r(e("../textures/RenderTexture")),s=r(e("../textures/Texture")),a=r(e("./GraphicsData")),l=r(e("../sprites/Sprite")),u=e("../math"),c=e("../utils"),h=e("../const"),d=r(e("../display/Bounds")),p=r(e("./utils/bezierCurveTo")),f=r(e("../renderers/canvas/CanvasRenderer")),g=void 0,m=new u.Matrix,v=new u.Point,y=new Float32Array(4),b=new Float32Array(4),_=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=n,r.lineColor=0,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=h.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new d.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.clone=function(){var e=new t;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var n=0;n<this.graphicsData.length;++n)e.graphicsData.push(this.graphicsData[n].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},t.prototype.lineStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=n,this.currentPath)if(this.currentPath.shape.points.length){var r=new u.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},t.prototype.moveTo=function(e,t){var n=new u.Polygon([e,t]);return n.closed=!1,this.drawShape(n),this},t.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty++,this},t.prototype.quadraticCurveTo=function(e,t,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=this.currentPath.shape.points,o=0,s=0;0===i.length&&this.moveTo(0,0);for(var a=i[i.length-2],l=i[i.length-1],u=1;u<=20;++u){var c=u/20;o=a+(e-a)*c,s=l+(t-l)*c,i.push(o+(e+(n-e)*c-o)*c,s+(t+(r-t)*c-s)*c)}return this.dirty++,this},t.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],l=s[s.length-1];return s.length-=2,(0,p.default)(a,l,e,t,n,r,i,o,s),this.dirty++,this},t.prototype.arcTo=function(e,t,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-t,l=s-e,u=r-t,c=n-e,h=Math.abs(a*c-l*u);if(h<1e-8||0===i)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var d=a*a+l*l,p=u*u+c*c,f=a*u+l*c,g=i*Math.sqrt(d)/h,m=i*Math.sqrt(p)/h,v=g*f/d,y=m*f/p,b=g*c+m*l,_=g*u+m*a,x=l*(m+v),w=a*(m+v),T=c*(g+y),E=u*(g+y),S=Math.atan2(w-_,x-b),I=Math.atan2(E-_,T-b);this.arc(b+e,_+t,i,S,I,l*u>c*a)}return this.dirty++,this},t.prototype.arc=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===i)return this;!o&&i<=r?i+=2*Math.PI:o&&r<=i&&(r+=2*Math.PI);var s=i-r,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0===s)return this;var l=e+Math.cos(r)*n,u=t+Math.sin(r)*n,c=this.currentPath?this.currentPath.shape.points:null;c?c[c.length-2]===l&&c[c.length-1]===u||c.push(l,u):(this.moveTo(l,u),c=this.currentPath.shape.points);for(var h=s/(2*a),d=2*h,p=Math.cos(h),f=Math.sin(h),g=a-1,m=g%1/g,v=0;v<=g;++v){var y=h+r+d*(v+m*v),b=Math.cos(y),_=-Math.sin(y);c.push((p*b+f*_)*n+e,(p*-_+f*b)*n+t)}return this.dirty++,this},t.prototype.beginFill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.prototype.drawRect=function(e,t,n,r){return this.drawShape(new u.Rectangle(e,t,n,r)),this},t.prototype.drawRoundedRect=function(e,t,n,r,i){return this.drawShape(new u.RoundedRectangle(e,t,n,r,i)),this},t.prototype.drawCircle=function(e,t,n){return this.drawShape(new u.Circle(e,t,n)),this},t.prototype.drawEllipse=function(e,t,n,r){return this.drawShape(new u.Ellipse(e,t,n,r)),this},t.prototype.drawPolygon=function(e){var t=e,n=!0;if(t instanceof u.Polygon&&(n=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var r=0;r<t.length;++r)t[r]=arguments[r]}var i=new u.Polygon(t);return i.closed=n,this.drawShape(i),this},t.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},t.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===h.SHAPES.RECT&&!this.graphicsData[0].lineWidth},t.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},t.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new l.default(new s.default(s.default.WHITE)));var n=this._spriteRect;if(16777215===this.tint)n.tint=this.graphicsData[0].fillColor;else{var r=y,i=b;(0,c.hex2rgb)(this.graphicsData[0].fillColor,r),(0,c.hex2rgb)(this.tint,i),r[0]*=i[0],r[1]*=i[1],r[2]*=i[2],n.tint=(0,c.rgb2hex)(r)}n.alpha=this.graphicsData[0].fillAlpha,n.worldAlpha=this.worldAlpha*n.alpha,n.blendMode=this.blendMode,n._texture._frame.width=t.width,n._texture._frame.height=t.height,n.transform.worldTransform=this.transform.worldTransform,n.anchor.set(-t.x/t.width,-t.y/t.height),n._onAnchorUpdate(),n._renderWebGL(e)},t.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},t.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,v);for(var t=this.graphicsData,n=0;n<t.length;++n){var r=t[n];if(r.fill&&(r.shape&&r.shape.contains(v.x,v.y))){if(r.holes)for(var i=0;i<r.holes.length;i++){if(r.holes[i].contains(v.x,v.y))return!1}return!0}}return!1},t.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0;if(this.graphicsData.length)for(var i=0,o=0,s=0,a=0,l=0,u=0;u<this.graphicsData.length;u++){var c=this.graphicsData[u],d=c.type,p=c.lineWidth;if(i=c.shape,d===h.SHAPES.RECT||d===h.SHAPES.RREC)o=i.x-p/2,s=i.y-p/2,a=i.width+p,l=i.height+p,e=o<e?o:e,t=o+a>t?o+a:t,n=s<n?s:n,r=s+l>r?s+l:r;else if(d===h.SHAPES.CIRC)o=i.x,s=i.y,a=i.radius+p/2,l=i.radius+p/2,e=o-a<e?o-a:e,t=o+a>t?o+a:t,n=s-l<n?s-l:n,r=s+l>r?s+l:r;else if(d===h.SHAPES.ELIP)o=i.x,s=i.y,a=i.width+p/2,l=i.height+p/2,e=o-a<e?o-a:e,t=o+a>t?o+a:t,n=s-l<n?s-l:n,r=s+l>r?s+l:r;else for(var f=i.points,g=0,m=0,v=0,y=0,b=0,_=0,x=0,w=0,T=0;T+2<f.length;T+=2)o=f[T],s=f[T+1],g=f[T+2],m=f[T+3],v=Math.abs(g-o),y=Math.abs(m-s),l=p,(a=Math.sqrt(v*v+y*y))<1e-9||(_=(l/a*v+y)/2,w=(m+s)/2,e=(x=(g+o)/2)-(b=(l/a*y+v)/2)<e?x-b:e,t=x+b>t?x+b:t,n=w-_<n?w-_:n,r=w+_>r?w+_:r)}else e=0,t=0,n=0,r=0;var E=this.boundsPadding;this._localBounds.minX=e-E,this._localBounds.maxX=t+E,this._localBounds.minY=n-E,this._localBounds.maxY=r+E},t.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new a.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e);return this.graphicsData.push(t),t.type===h.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty++,t},t.prototype.generateCanvasTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getLocalBounds(),r=o.default.create(n.width,n.height,e,t);g||(g=new f.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(m),m.invert(),m.tx-=n.x,m.ty-=n.y,g.render(this,r,!0,m);var i=s.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,e,"graphics");return i.baseTexture.resolution=t,i.baseTexture.update(),i},t.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},t.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();for(var r in this._webgl)for(var i=0;i<this._webgl[r].data.length;++i)this._webgl[r].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},t}(i.default);n.default=_,_._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":124,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(e,t,n){n.__esModule=!0;var r=function(){function e(t,n,r,i,o,s,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lineWidth=t,this.nativeLines=a,this.lineColor=n,this.lineAlpha=r,this._lineTint=n,this.fillColor=i,this.fillAlpha=o,this._fillTint=i,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return e.prototype.clone=function(){return new e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},e.prototype.addHole=function(e){this.holes.push(e)},e.prototype.destroy=function(){this.shape=null,this.holes=null},e}();n.default=r},{}],55:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../../renderers/canvas/CanvasRenderer")),i=e("../../const"),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,n=t.context,r=e.worldAlpha,o=e.transform.worldTransform,s=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),n.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1),t.setBlendMode(e.blendMode);for(var a=0;a<e.graphicsData.length;a++){var l=e.graphicsData[a],u=l.shape,c=l._fillTint,h=l._lineTint;if(n.lineWidth=l.lineWidth,l.type===i.SHAPES.POLY){n.beginPath(),this.renderPolygon(u.points,u.closed,n);for(var d=0;d<l.holes.length;d++)this.renderPolygon(l.holes[d].points,!0,n);l.fill&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(l.type===i.SHAPES.RECT)(l.fillColor||0===l.fillColor)&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fillRect(u.x,u.y,u.width,u.height)),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.strokeRect(u.x,u.y,u.width,u.height));else if(l.type===i.SHAPES.CIRC)n.beginPath(),n.arc(u.x,u.y,u.radius,0,2*Math.PI),n.closePath(),l.fill&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke());else if(l.type===i.SHAPES.ELIP){var p=2*u.width,f=2*u.height,g=u.x-p/2,m=u.y-f/2;n.beginPath();var v=p/2*.5522848,y=f/2*.5522848,b=g+p,_=m+f,x=g+p/2,w=m+f/2;n.moveTo(g,w),n.bezierCurveTo(g,w-y,x-v,m,x,m),n.bezierCurveTo(x+v,m,b,w-y,b,w),n.bezierCurveTo(b,w+y,x+v,_,x,_),n.bezierCurveTo(x-v,_,g,w+y,g,w),n.closePath(),l.fill&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(l.type===i.SHAPES.RREC){var T=u.x,E=u.y,S=u.width,I=u.height,P=u.radius,M=Math.min(S,I)/2|0;P=P>M?M:P,n.beginPath(),n.moveTo(T,E+P),n.lineTo(T,E+I-P),n.quadraticCurveTo(T,E+I,T+P,E+I),n.lineTo(T+S-P,E+I),n.quadraticCurveTo(T+S,E+I,T+S,E+I-P),n.lineTo(T+S,E+P),n.quadraticCurveTo(T+S,E,T+S-P,E),n.lineTo(T+P,E),n.quadraticCurveTo(T,E,T,E+P),n.closePath(),(l.fillColor||0===l.fillColor)&&(n.globalAlpha=l.fillAlpha*r,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),l.lineWidth&&(n.globalAlpha=l.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,n=(e.tint>>8&255)/255,r=(255&e.tint)/255,i=0;i<e.graphicsData.length;++i){var o=e.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255}},e.prototype.renderPolygon=function(e,t,n){n.moveTo(e[0],e[1]);for(var r=1;r<e.length/2;++r)n.lineTo(e[2*r],e[2*r+1]);t&&n.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();n.default=o,r.default.registerPlugin("graphics",o)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(e,t,n){n.__esModule=!0,n.default=function(e,t,n,r,i,o,s,a){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=0,c=0,h=0,d=0,p=0;l.push(e,t);for(var f=1,g=0;f<=20;++f)h=(c=(u=1-(g=f/20))*u)*u,p=(d=g*g)*g,l.push(h*e+3*c*g*n+3*u*d*i+p*s,h*t+3*c*g*r+3*u*d*o+p*a);return l}},{}],57:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../../utils"),o=e("../../const"),s=r(e("../../renderers/webgl/utils/ObjectRenderer")),a=r(e("../../renderers/webgl/WebGLRenderer")),l=r(e("./WebGLGraphicsData")),u=r(e("./shaders/PrimitiveShader")),c=r(e("./utils/buildPoly")),h=r(e("./utils/buildRectangle")),d=r(e("./utils/buildRoundedRectangle")),p=r(e("./utils/buildCircle")),f=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=n.gl,r.CONTEXT_UID=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new u.default(this.gl)},t.prototype.destroy=function(){s.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(e){var t=this.renderer,n=t.gl,r=void 0,o=e._webGL[this.CONTEXT_UID];o&&e.dirty===o.dirty||(this.updateGraphics(e),o=e._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;t.bindShader(s),t.state.setBlendMode(e.blendMode);for(var a=0,l=o.data.length;a<l;a++){var u=(r=o.data[a]).shader;t.bindShader(u),u.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,i.hex2rgb)(e.tint),u.uniforms.alpha=e.worldAlpha,t.bindVao(r.vao),r.nativeLines?n.drawArrays(n.LINES,0,r.points.length/6):r.vao.draw(n.TRIANGLE_STRIP,r.indices.length)}},t.prototype.updateGraphics=function(e){var t=this.renderer.gl,n=e._webGL[this.CONTEXT_UID];if(n||(n=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),n.dirty=e.dirty,e.clearDirty!==n.clearDirty){n.clearDirty=e.clearDirty;for(var r=0;r<n.data.length;r++)this.graphicsDataPool.push(n.data[r]);n.data.length=0,n.lastIndex=0}for(var i=void 0,s=void 0,a=n.lastIndex;a<e.graphicsData.length;a++){var l=e.graphicsData[a];i=this.getWebGLData(n,0),l.nativeLines&&l.lineWidth&&(s=this.getWebGLData(n,0,!0),n.lastIndex++),l.type===o.SHAPES.POLY&&(0,c.default)(l,i,s),l.type===o.SHAPES.RECT?(0,h.default)(l,i,s):l.type===o.SHAPES.CIRC||l.type===o.SHAPES.ELIP?(0,p.default)(l,i,s):l.type===o.SHAPES.RREC&&(0,d.default)(l,i,s),n.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<n.data.length;u++)(i=n.data[u]).dirty&&i.upload()},t.prototype.getWebGLData=function(e,t,n){var r=e.data[e.data.length-1];return(!r||r.nativeLines!==n||r.points.length>32e4)&&((r=this.graphicsDataPool.pop()||new l.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=n,r.reset(t),e.data.push(r)),r.dirty=!0,r},t}(s.default);n.default=f,a.default.registerPlugin("graphics",f)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":124,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("pixi-gl-core")),i=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=r.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=n,this.vao=new r.default.VertexArrayObject(t,i).addIndex(this.indexBuffer).addAttribute(this.buffer,n.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,n.attributes.aColor,t.FLOAT,!1,24,8)}return e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},e}();n.default=i},{"pixi-gl-core":12}],59:[function(e,t,n){n.__esModule=!0;var r=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../../../Shader")).default);n.default=r},{"../../../Shader":44}],60:[function(e,t,n){n.__esModule=!0,n.default=function(e,t,n){var s=e.shape,a=s.x,l=s.y,u=void 0,c=void 0;if(e.type===i.SHAPES.CIRC?(u=s.radius,c=s.radius):(u=s.width,c=s.height),0!==u&&0!==c){var h=Math.floor(30*Math.sqrt(s.radius))||Math.floor(15*Math.sqrt(s.width+s.height)),d=2*Math.PI/h;if(e.fill){var p=(0,o.hex2rgb)(e.fillColor),f=e.fillAlpha,g=p[0]*f,m=p[1]*f,v=p[2]*f,y=t.points,b=t.indices,_=y.length/6;b.push(_);for(var x=0;x<h+1;x++)y.push(a,l,g,m,v,f),y.push(a+Math.sin(d*x)*u,l+Math.cos(d*x)*c,g,m,v,f),b.push(_++,_++);b.push(_-1)}if(e.lineWidth){var w=e.points;e.points=[];for(var T=0;T<h+1;T++)e.points.push(a+Math.sin(d*T)*u,l+Math.cos(d*T)*c);(0,r.default)(e,t,n),e.points=w}}};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./buildLine")),i=e("../../../const"),o=e("../../../utils")},{"../../../const":46,"../../../utils":124,"./buildLine":61}],61:[function(e,t,n){n.__esModule=!0,n.default=function(e,t,n){e.nativeLines?function(e,t){var n=0,r=e.points;if(0!==r.length){var o=t.points,s=r.length/2,a=(0,i.hex2rgb)(e.lineColor),l=e.lineAlpha,u=a[0]*l,c=a[1]*l,h=a[2]*l;for(n=1;n<s;n++){var d=r[2*(n-1)],p=r[2*(n-1)+1],f=r[2*n],g=r[2*n+1];o.push(d,p),o.push(u,c,h,l),o.push(f,g),o.push(u,c,h,l)}}}(e,n):function(e,t){var n=e.points;if(0!==n.length){var o=new r.Point(n[0],n[1]),s=new r.Point(n[n.length-2],n[n.length-1]);if(o.x===s.x&&o.y===s.y){(n=n.slice()).pop(),n.pop();var a=(s=new r.Point(n[n.length-2],n[n.length-1])).x+.5*(o.x-s.x),l=s.y+.5*(o.y-s.y);n.unshift(a,l),n.push(a,l)}var u=t.points,c=t.indices,h=n.length/2,d=n.length,p=u.length/6,f=e.lineWidth/2,g=(0,i.hex2rgb)(e.lineColor),m=e.lineAlpha,v=g[0]*m,y=g[1]*m,b=g[2]*m,_=n[0],x=n[1],w=n[2],T=n[3],E=0,S=0,I=-(x-T),P=_-w,M=0,A=0,O=0,C=0,R=Math.sqrt(I*I+P*P);I/=R,P/=R,I*=f,P*=f,u.push(_-I,x-P,v,y,b,m),u.push(_+I,x+P,v,y,b,m);for(var D=1;D<h-1;++D){_=n[2*(D-1)],x=n[2*(D-1)+1],w=n[2*D],T=n[2*D+1],E=n[2*(D+1)],S=n[2*(D+1)+1],I=-(x-T),P=_-w,I/=R=Math.sqrt(I*I+P*P),P/=R,I*=f,P*=f,M=-(T-S),A=w-E,M/=R=Math.sqrt(M*M+A*A),A/=R;var k=-P+x-(-P+T),L=-I+w-(-I+_),N=(-I+_)*(-P+T)-(-I+w)*(-P+x),U=-(A*=f)+S-(-A+T),F=-(M*=f)+w-(-M+E),B=(-M+E)*(-A+T)-(-M+w)*(-A+S),j=k*F-U*L;if(Math.abs(j)<.1)j+=10.1,u.push(w-I,T-P,v,y,b,m),u.push(w+I,T+P,v,y,b,m);else{var G=(L*B-F*N)/j,X=(U*N-k*B)/j;(G-w)*(G-w)+(X-T)*(X-T)>196*f*f?(O=I-M,C=P-A,O/=R=Math.sqrt(O*O+C*C),C/=R,O*=f,C*=f,u.push(w-O,T-C),u.push(v,y,b,m),u.push(w+O,T+C),u.push(v,y,b,m),u.push(w-O,T-C),u.push(v,y,b,m),d++):(u.push(G,X),u.push(v,y,b,m),u.push(w-(G-w),T-(X-T)),u.push(v,y,b,m))}}_=n[2*(h-2)],x=n[2*(h-2)+1],w=n[2*(h-1)],I=-(x-(T=n[2*(h-1)+1])),P=_-w,I/=R=Math.sqrt(I*I+P*P),P/=R,I*=f,P*=f,u.push(w-I,T-P),u.push(v,y,b,m),u.push(w+I,T+P),u.push(v,y,b,m),c.push(p);for(var H=0;H<d;++H)c.push(p++);c.push(p-1)}}(e,t)};var r=e("../../../math"),i=e("../../../utils")},{"../../../math":70,"../../../utils":124}],62:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.default=function(e,t,n){e.points=e.shape.points.slice();var r=e.points;if(e.fill&&r.length>=6){for(var a=[],l=e.holes,u=0;u<l.length;u++){var c=l[u];a.push(r.length/2),r=r.concat(c.points)}var h=t.points,d=t.indices,p=r.length/2,f=(0,o.hex2rgb)(e.fillColor),g=e.fillAlpha,m=f[0]*g,v=f[1]*g,y=f[2]*g,b=(0,s.default)(r,a,2);if(!b)return;for(var _=h.length/6,x=0;x<b.length;x+=3)d.push(b[x]+_),d.push(b[x]+_),d.push(b[x+1]+_),d.push(b[x+2]+_),d.push(b[x+2]+_);for(var w=0;w<p;w++)h.push(r[2*w],r[2*w+1],m,v,y,g)}e.lineWidth>0&&(0,i.default)(e,t,n)};var i=r(e("./buildLine")),o=e("../../../utils"),s=r(e("earcut"))},{"../../../utils":124,"./buildLine":61,earcut:2}],63:[function(e,t,n){n.__esModule=!0,n.default=function(e,t,n){var o=e.shape,s=o.x,a=o.y,l=o.width,u=o.height;if(e.fill){var c=(0,i.hex2rgb)(e.fillColor),h=e.fillAlpha,d=c[0]*h,p=c[1]*h,f=c[2]*h,g=t.points,m=t.indices,v=g.length/6;g.push(s,a),g.push(d,p,f,h),g.push(s+l,a),g.push(d,p,f,h),g.push(s,a+u),g.push(d,p,f,h),g.push(s+l,a+u),g.push(d,p,f,h),m.push(v,v,v+1,v+2,v+3,v+3)}if(e.lineWidth){var y=e.points;e.points=[s,a,s+l,a,s+l,a+u,s,a+u,s,a],(0,r.default)(e,t,n),e.points=y}};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./buildLine")),i=e("../../../utils")},{"../../../utils":124,"./buildLine":61}],64:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return e+(t-e)*n}function o(e,t,n,r,o,s){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=0,u=0,c=0,h=0,d=0,p=0,f=0,g=0;f<=20;++f)l=i(e,n,g=f/20),u=i(t,r,g),c=i(n,o,g),h=i(r,s,g),d=i(l,c,g),p=i(u,h,g),a.push(d,p);return a}n.__esModule=!0,n.default=function(e,t,n){var r=e.shape,i=r.x,u=r.y,c=r.width,h=r.height,d=r.radius,p=[];if(p.push(i,u+d),o(i,u+h-d,i,u+h,i+d,u+h,p),o(i+c-d,u+h,i+c,u+h,i+c,u+h-d,p),o(i+c,u+d,i+c,u,i+c-d,u,p),o(i+d,u,i,u,i,u+d+1e-10,p),e.fill){for(var f=(0,l.hex2rgb)(e.fillColor),g=e.fillAlpha,m=f[0]*g,v=f[1]*g,y=f[2]*g,b=t.points,_=t.indices,x=b.length/6,w=(0,s.default)(p,null,2),T=0,E=w.length;T<E;T+=3)_.push(w[T]+x),_.push(w[T]+x),_.push(w[T+1]+x),_.push(w[T+2]+x),_.push(w[T+2]+x);for(var S=0,I=p.length;S<I;S++)b.push(p[S],p[++S],m,v,y,g)}if(e.lineWidth){var P=e.points;e.points=p,(0,a.default)(e,t,n),e.points=P}};var s=r(e("earcut")),a=r(e("./buildLine")),l=e("../../../utils")},{"../../../utils":124,"./buildLine":61,earcut:2}],65:[function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.autoDetectRenderer=n.Application=n.Filter=n.SpriteMaskFilter=n.Quad=n.RenderTarget=n.ObjectRenderer=n.WebGLManager=n.Shader=n.CanvasRenderTarget=n.TextureUvs=n.VideoBaseTexture=n.BaseRenderTexture=n.RenderTexture=n.BaseTexture=n.Texture=n.Spritesheet=n.CanvasGraphicsRenderer=n.GraphicsRenderer=n.GraphicsData=n.Graphics=n.TextMetrics=n.TextStyle=n.Text=n.SpriteRenderer=n.CanvasTinter=n.CanvasSpriteRenderer=n.Sprite=n.TransformBase=n.TransformStatic=n.Transform=n.Container=n.DisplayObject=n.Bounds=n.glCore=n.WebGLRenderer=n.CanvasRenderer=n.ticker=n.utils=n.settings=void 0;var o=e("./const");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var s=e("./math");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var a=e("pixi-gl-core");Object.defineProperty(n,"glCore",{enumerable:!0,get:function(){return i(a).default}});var l=e("./display/Bounds");Object.defineProperty(n,"Bounds",{enumerable:!0,get:function(){return i(l).default}});var u=e("./display/DisplayObject");Object.defineProperty(n,"DisplayObject",{enumerable:!0,get:function(){return i(u).default}});var c=e("./display/Container");Object.defineProperty(n,"Container",{enumerable:!0,get:function(){return i(c).default}});var h=e("./display/Transform");Object.defineProperty(n,"Transform",{enumerable:!0,get:function(){return i(h).default}});var d=e("./display/TransformStatic");Object.defineProperty(n,"TransformStatic",{enumerable:!0,get:function(){return i(d).default}});var p=e("./display/TransformBase");Object.defineProperty(n,"TransformBase",{enumerable:!0,get:function(){return i(p).default}});var f=e("./sprites/Sprite");Object.defineProperty(n,"Sprite",{enumerable:!0,get:function(){return i(f).default}});var g=e("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(n,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return i(g).default}});var m=e("./sprites/canvas/CanvasTinter");Object.defineProperty(n,"CanvasTinter",{enumerable:!0,get:function(){return i(m).default}});var v=e("./sprites/webgl/SpriteRenderer");Object.defineProperty(n,"SpriteRenderer",{enumerable:!0,get:function(){return i(v).default}});var y=e("./text/Text");Object.defineProperty(n,"Text",{enumerable:!0,get:function(){return i(y).default}});var b=e("./text/TextStyle");Object.defineProperty(n,"TextStyle",{enumerable:!0,get:function(){return i(b).default}});var _=e("./text/TextMetrics");Object.defineProperty(n,"TextMetrics",{enumerable:!0,get:function(){return i(_).default}});var x=e("./graphics/Graphics");Object.defineProperty(n,"Graphics",{enumerable:!0,get:function(){return i(x).default}});var w=e("./graphics/GraphicsData");Object.defineProperty(n,"GraphicsData",{enumerable:!0,get:function(){return i(w).default}});var T=e("./graphics/webgl/GraphicsRenderer");Object.defineProperty(n,"GraphicsRenderer",{enumerable:!0,get:function(){return i(T).default}});var E=e("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(n,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return i(E).default}});var S=e("./textures/Spritesheet");Object.defineProperty(n,"Spritesheet",{enumerable:!0,get:function(){return i(S).default}});var I=e("./textures/Texture");Object.defineProperty(n,"Texture",{enumerable:!0,get:function(){return i(I).default}});var P=e("./textures/BaseTexture");Object.defineProperty(n,"BaseTexture",{enumerable:!0,get:function(){return i(P).default}});var M=e("./textures/RenderTexture");Object.defineProperty(n,"RenderTexture",{enumerable:!0,get:function(){return i(M).default}});var A=e("./textures/BaseRenderTexture");Object.defineProperty(n,"BaseRenderTexture",{enumerable:!0,get:function(){return i(A).default}});var O=e("./textures/VideoBaseTexture");Object.defineProperty(n,"VideoBaseTexture",{enumerable:!0,get:function(){return i(O).default}});var C=e("./textures/TextureUvs");Object.defineProperty(n,"TextureUvs",{enumerable:!0,get:function(){return i(C).default}});var R=e("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(n,"CanvasRenderTarget",{enumerable:!0,get:function(){return i(R).default}});var D=e("./Shader");Object.defineProperty(n,"Shader",{enumerable:!0,get:function(){return i(D).default}});var k=e("./renderers/webgl/managers/WebGLManager");Object.defineProperty(n,"WebGLManager",{enumerable:!0,get:function(){return i(k).default}});var L=e("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(n,"ObjectRenderer",{enumerable:!0,get:function(){return i(L).default}});var N=e("./renderers/webgl/utils/RenderTarget");Object.defineProperty(n,"RenderTarget",{enumerable:!0,get:function(){return i(N).default}});var U=e("./renderers/webgl/utils/Quad");Object.defineProperty(n,"Quad",{enumerable:!0,get:function(){return i(U).default}});var F=e("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(n,"SpriteMaskFilter",{enumerable:!0,get:function(){return i(F).default}});var B=e("./renderers/webgl/filters/Filter");Object.defineProperty(n,"Filter",{enumerable:!0,get:function(){return i(B).default}});var j=e("./Application");Object.defineProperty(n,"Application",{enumerable:!0,get:function(){return i(j).default}});var G=e("./autoDetectRenderer");Object.defineProperty(n,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var X=r(e("./utils")),H=r(e("./ticker")),Y=i(e("./settings")),W=i(e("./renderers/canvas/CanvasRenderer")),V=i(e("./renderers/webgl/WebGLRenderer"));n.settings=Y.default,n.utils=X,n.ticker=H,n.CanvasRenderer=W.default,n.WebGLRenderer=V.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureUvs":116,"./textures/VideoBaseTexture":117,"./ticker":120,"./utils":124,"pixi-gl-core":12}],66:[function(e,t,n){function r(e){return e<0?-1:e>0?1:0}n.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./Matrix")),o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],l=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],c=[];!function(){for(var e=0;e<16;e++){var t=[];c.push(t);for(var n=0;n<16;n++)for(var h=r(o[e]*o[n]+a[e]*s[n]),d=r(s[e]*o[n]+l[e]*s[n]),p=r(o[e]*a[n]+a[e]*l[n]),f=r(s[e]*a[n]+l[e]*l[n]),g=0;g<16;g++)if(o[g]===h&&s[g]===d&&a[g]===p&&l[g]===f){t.push(g);break}}for(var m=0;m<16;m++){var v=new i.default;v.set(o[m],s[m],a[m],l[m],0,0),u.push(v)}}();var h={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return o[e]},uY:function(e){return s[e]},vX:function(e){return a[e]},vY:function(e){return l[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return c[e][t]},sub:function(e,t){return c[e][h.inv(t)]},rotate180:function(e){return 4^e},isSwapWidthHeight:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?h.S:h.N:2*Math.abs(t)<=Math.abs(e)?e>0?h.E:h.W:t>0?e>0?h.SE:h.SW:e>0?h.NE:h.NW},matrixAppendRotationInv:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=u[h.inv(t)];i.tx=n,i.ty=r,e.append(i)}};n.default=h},{"./Matrix":67}],67:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(e("./Point")),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.a=t,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=s,this.array=null}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,n,r,i,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(e,t){t=t||new i.default;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new i.default;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,o=e.y;return t.x=this.d*n*r+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*o+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},e.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},e.prototype.setTransform=function(e,t,n,r,i,o,s,a,l){var u=Math.sin(s),c=Math.cos(s),h=Math.cos(l),d=Math.sin(l),p=-Math.sin(a),f=Math.cos(a),g=c*i,m=u*i,v=-u*o,y=c*o;return this.a=h*g+d*v,this.b=h*m+d*y,this.c=p*g+f*v,this.d=p*m+f*y,this.tx=e+(n*g+r*v),this.ty=t+(n*m+r*y),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),s=Math.atan2(n,t);return Math.abs(o+s)<1e-5?(e.rotation=s,t<0&&i>=0&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skew.x=e.skew.y=0):(e.skew.x=o,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(e*this.ty-t*i)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r(e,null,[{key:"IDENTITY",get:function(){return new e}},{key:"TEMP_MATRIX",get:function(){return new e}}]),e}();n.default=o},{"./Point":69}],68:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._x=r,this._y=i,this.cb=t,this.scope=n}return e.prototype.set=function(e,t){var n=e||0,r=t||(0!==t?n:0);this._x===n&&this._y===r||(this._x=n,this._y=r,this.cb.call(this.scope))},e.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},r(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),e}();n.default=i},{}],69:[function(e,t,n){n.__esModule=!0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(e){this.set(e.x,e.y)},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},e}();n.default=r},{}],70:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("./Point");Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return r(i).default}});var o=e("./ObservablePoint");Object.defineProperty(n,"ObservablePoint",{enumerable:!0,get:function(){return r(o).default}});var s=e("./Matrix");Object.defineProperty(n,"Matrix",{enumerable:!0,get:function(){return r(s).default}});var a=e("./GroupD8");Object.defineProperty(n,"GroupD8",{enumerable:!0,get:function(){return r(a).default}});var l=e("./shapes/Circle");Object.defineProperty(n,"Circle",{enumerable:!0,get:function(){return r(l).default}});var u=e("./shapes/Ellipse");Object.defineProperty(n,"Ellipse",{enumerable:!0,get:function(){return r(u).default}});var c=e("./shapes/Polygon");Object.defineProperty(n,"Polygon",{enumerable:!0,get:function(){return r(c).default}});var h=e("./shapes/Rectangle");Object.defineProperty(n,"Rectangle",{enumerable:!0,get:function(){return r(h).default}});var d=e("./shapes/RoundedRectangle");Object.defineProperty(n,"RoundedRectangle",{enumerable:!0,get:function(){return r(d).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./Rectangle")),i=e("../../const"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.radius=r,this.type=i.SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,i=this.y-t;return r*=r,i*=i,r+i<=n},e.prototype.getBounds=function(){return new r.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}();n.default=o},{"../../const":46,"./Rectangle":74}],72:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./Rectangle")),i=e("../../const"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.width=r,this.height=o,this.type=i.SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return n*=n,r*=r,n+r<=1},e.prototype.getBounds=function(){return new r.default(this.x-this.width,this.y-this.height,this.width,this.height)},e}();n.default=o},{"../../const":46,"./Rectangle":74}],73:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../Point")),i=e("../../const"),o=function(){function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Array.isArray(n[0])&&(n=n[0]),n[0]instanceof r.default){for(var s=[],a=0,l=n.length;a<l;a++)s.push(n[a].x,n[a].y);n=s}this.closed=!0,this.points=n,this.type=i.SHAPES.POLY}return e.prototype.clone=function(){return new e(this.points.slice())},e.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},e.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var s=this.points[2*i],a=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1];a>t!=u>t&&e<(t-a)/(u-a)*(l-s)+s&&(n=!n)}return n},e}();n.default=o},{"../../const":46,"../Point":69}],74:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("../../const"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=Number(t),this.y=Number(n),this.width=Number(r),this.height=Number(o),this.type=i.SHAPES.RECT}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},e.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},e.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,this.height<0&&(this.height=0))},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=n-t,this.y=r,this.height=i-r},r(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new e(0,0,0,0)}}]),e}();n.default=o},{"../../const":46}],75:[function(e,t,n){n.__esModule=!0;var r=e("../../const"),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.width=i,this.height=o,this.radius=s,this.type=r.SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var n=e-(this.x+this.radius),r=t-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i)return!0;if((n=e-(this.x+this.width-this.radius))*n+r*r<=i)return!0;if(r=t-(this.y+this.height-this.radius),n*n+r*r<=i)return!0;if((n=e-(this.x+this.radius))*n+r*r<=i)return!0}return!1},e}();n.default=i},{"../../const":46}],76:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../utils"),s=e("../math"),a=e("../const"),l=r(e("../settings")),u=r(e("../display/Container")),c=r(e("../textures/RenderTexture")),h=r(e("eventemitter3")),d=new s.Matrix,p=function(e){function t(n,r,i,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return(0,o.sayHello)(n),"number"==typeof r&&(r=Object.assign({width:r,height:i||l.default.RENDER_OPTIONS.height},c)),r=Object.assign({},l.default.RENDER_OPTIONS,r),h.options=r,h.type=a.RENDERER_TYPE.UNKNOWN,h.screen=new s.Rectangle(0,0,r.width,r.height),h.view=r.view||document.createElement("canvas"),h.resolution=r.resolution||l.default.RESOLUTION,h.transparent=r.transparent,h.autoResize=r.autoResize||!1,h.blendModes=null,h.preserveDrawingBuffer=r.preserveDrawingBuffer,h.clearBeforeRender=r.clearBeforeRender,h.roundPixels=r.roundPixels,h._backgroundColor=0,h._backgroundColorRgba=[0,0,0,0],h._backgroundColorString="#000000",h.backgroundColor=r.backgroundColor||h._backgroundColor,h._tempDisplayObjectParent=new u.default,h._lastObjectRendered=h._tempDisplayObjectParent,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(e,t,n){var r=e.getLocalBounds(),i=c.default.create(0|r.width,0|r.height,t,n);return d.tx=-r.x,d.ty=-r.y,this.render(e,i,!1,d,!0),i},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},i(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,o.hex2string)(e),(0,o.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(h.default);n.default=p},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":124,eventemitter3:3}],77:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("../SystemRenderer")),o=r(e("./utils/CanvasMaskManager")),s=r(e("./utils/CanvasRenderTarget")),a=r(e("./utils/mapCanvasBlendModesToPixi")),l=e("../../utils"),u=e("../../const"),c=r(e("../../settings")),h=function(e){function t(n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"Canvas",n,r,i));return s.type=u.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext("2d",{alpha:s.transparent}),s.context=s.rootContext,s.refresh=!0,s.maskManager=new o.default(s),s.smoothProperty="imageSmoothingEnabled",s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty="webkitImageSmoothingEnabled":s.rootContext.mozImageSmoothingEnabled?s.smoothProperty="mozImageSmoothingEnabled":s.rootContext.oImageSmoothingEnabled?s.smoothProperty="oImageSmoothingEnabled":s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty="msImageSmoothingEnabled")),s.initPlugins(),s.blendModes=(0,a.default)(),s._activeBlendMode=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(e,t,n,r,i){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var o=this.resolution;t?((t=t.baseTexture||t)._canvasRenderTarget||(t._canvasRenderTarget=new s.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(t||(this._lastObjectRendered=e),!i){var l=e.parent,c=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(c),this._tempDisplayObjectParent.transform._worldID=-1):c.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=l}a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=u.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=a,e.renderCanvas(this),this.context=h,this.resolution=o,this.emit("postrender")}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=c.default.SCALE_MODE===u.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(i.default);n.default=h,l.pluginTarget.mixin(h)},{"../../const":46,"../../settings":101,"../../utils":124,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(e,t,n){n.__esModule=!0;var r=e("../../../const"),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var n=e.alpha,r=e.transform.worldTransform,i=t.resolution;t.context.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=n},e.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,n=e.graphicsData.length;if(0!==n){t.beginPath();for(var i=0;i<n;i++){var o=e.graphicsData[i],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points;t.moveTo(a[0],a[1]);for(var l=1;l<a.length/2;l++)t.lineTo(a[2*l],a[2*l+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(o.type===r.SHAPES.RECT)t.rect(s.x,s.y,s.width,s.height),t.closePath();else if(o.type===r.SHAPES.CIRC)t.arc(s.x,s.y,s.radius,0,2*Math.PI),t.closePath();else if(o.type===r.SHAPES.ELIP){var u=2*s.width,c=2*s.height,h=s.x-u/2,d=s.y-c/2,p=u/2*.5522848,f=c/2*.5522848,g=h+u,m=d+c,v=h+u/2,y=d+c/2;t.moveTo(h,y),t.bezierCurveTo(h,y-f,v-p,d,v,d),t.bezierCurveTo(v+p,d,g,y-f,g,y),t.bezierCurveTo(g,y+f,v+p,m,v,m),t.bezierCurveTo(v-p,m,h,y+f,h,y),t.closePath()}else if(o.type===r.SHAPES.RREC){var b=s.x,_=s.y,x=s.width,w=s.height,T=s.radius,E=Math.min(x,w)/2|0;T=T>E?E:T,t.moveTo(b,_+T),t.lineTo(b,_+w-T),t.quadraticCurveTo(b,_+w,b+T,_+w),t.lineTo(b+x-T,_+w),t.quadraticCurveTo(b+x,_+w,b+x,_+w-T),t.lineTo(b+x,_+T),t.quadraticCurveTo(b+x,_,b+x-T,_),t.lineTo(b+T,_),t.quadraticCurveTo(b,_,b,_+T),t.closePath()}}}},e.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},e.prototype.destroy=function(){},e}();n.default=i},{"../../../const":46}],79:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../../settings")),o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||i.default.RESOLUTION,this.resize(t,n)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},r(e,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),e}();n.default=o},{"../../../settings":101}],80:[function(e,t,n){function r(e){var t=document.createElement("canvas");t.width=6,t.height=1;var n=t.getContext("2d");return n.fillStyle=e,n.fillRect(0,0,6,1),t}n.__esModule=!0,n.default=function(){if("undefined"==typeof document)return!1;var e=r("#ff00ff"),t=r("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var i=n.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(e,0,0),i.drawImage(t,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}},{}],81:[function(e,t,n){n.__esModule=!0,n.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,i.default)()?(e[r.BLEND_MODES.NORMAL]="source-over",e[r.BLEND_MODES.ADD]="lighter",e[r.BLEND_MODES.MULTIPLY]="multiply",e[r.BLEND_MODES.SCREEN]="screen",e[r.BLEND_MODES.OVERLAY]="overlay",e[r.BLEND_MODES.DARKEN]="darken",e[r.BLEND_MODES.LIGHTEN]="lighten",e[r.BLEND_MODES.COLOR_DODGE]="color-dodge",e[r.BLEND_MODES.COLOR_BURN]="color-burn",e[r.BLEND_MODES.HARD_LIGHT]="hard-light",e[r.BLEND_MODES.SOFT_LIGHT]="soft-light",e[r.BLEND_MODES.DIFFERENCE]="difference",e[r.BLEND_MODES.EXCLUSION]="exclusion",e[r.BLEND_MODES.HUE]="hue",e[r.BLEND_MODES.SATURATION]="saturate",e[r.BLEND_MODES.COLOR]="color",e[r.BLEND_MODES.LUMINOSITY]="luminosity"):(e[r.BLEND_MODES.NORMAL]="source-over",e[r.BLEND_MODES.ADD]="lighter",e[r.BLEND_MODES.MULTIPLY]="source-over",e[r.BLEND_MODES.SCREEN]="source-over",e[r.BLEND_MODES.OVERLAY]="source-over",e[r.BLEND_MODES.DARKEN]="source-over",e[r.BLEND_MODES.LIGHTEN]="source-over",e[r.BLEND_MODES.COLOR_DODGE]="source-over",e[r.BLEND_MODES.COLOR_BURN]="source-over",e[r.BLEND_MODES.HARD_LIGHT]="source-over",e[r.BLEND_MODES.SOFT_LIGHT]="source-over",e[r.BLEND_MODES.DIFFERENCE]="source-over",e[r.BLEND_MODES.EXCLUSION]="source-over",e[r.BLEND_MODES.HUE]="source-over",e[r.BLEND_MODES.SATURATION]="source-over",e[r.BLEND_MODES.COLOR]="source-over",e[r.BLEND_MODES.LUMINOSITY]="source-over"),e[r.BLEND_MODES.NORMAL_NPM]=e[r.BLEND_MODES.NORMAL],e[r.BLEND_MODES.ADD_NPM]=e[r.BLEND_MODES.ADD],e[r.BLEND_MODES.SCREEN_NPM]=e[r.BLEND_MODES.SCREEN],e};var r=e("../../../const"),i=function(e){return e&&e.__esModule?e:{default:e}}(e("./canUseNewCanvasBlendModes"))},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(e,t,n){n.__esModule=!0;var r=e("../../const"),i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../settings")),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=i.default.GC_MAX_IDLE,this.checkCountMax=i.default.GC_MAX_CHECK_COUNT,this.mode=i.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){for(var o=0,s=0;s<t.length;s++)null!==t[s]&&(t[o++]=t[s]);t.length=o}},e.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var n=e.children.length-1;n>=0;n--)this.unload(e.children[n])},e}();n.default=o},{"../../const":46,"../../settings":101}],83:[function(e,t,n){n.__esModule=!0;var r=e("pixi-gl-core"),i=e("../../const"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./utils/RenderTarget")),s=e("../../utils"),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,t){var n=this.gl,s=!!e._glRenderTargets;if(!e.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===t){t=0;for(var l=0;l<a.length;++l)if(a[l]===e){t=l;break}}a[t]=e,n.activeTexture(n.TEXTURE0+t);var u=e._glTextures[this.renderer.CONTEXT_UID];if(u)s?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):u.upload(e.source);else{if(s){var c=new o.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);c.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=c,u=c.texture}else(u=new r.GLTexture(this.gl,null,null,null,null)).bind(t),u.premultiplyAlpha=!0,u.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=u,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&u.enableMipmap(),e.wrapMode===i.WRAP_MODES.CLAMP?u.enableWrapClamp():e.wrapMode===i.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),e.scaleMode===i.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},e.prototype.destroyTexture=function(e,t){if((e=e.baseTexture||e).hasLoaded){var n=this.renderer.CONTEXT_UID,r=e._glTextures,i=e._glRenderTargets;if(r[n]&&(this.renderer.unbindTexture(e),r[n].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete r[n],!t)){var o=this._managedTextures.indexOf(e);-1!==o&&(0,s.removeItems)(this._managedTextures,o,1)}i&&i[n]&&(i[n].destroy(),delete i[n])}},e.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();n.default=a},{"../../const":46,"../../utils":124,"./utils/RenderTarget":96,"pixi-gl-core":12}],84:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("../SystemRenderer")),o=r(e("./managers/MaskManager")),s=r(e("./managers/StencilManager")),a=r(e("./managers/FilterManager")),l=r(e("./utils/RenderTarget")),u=r(e("./utils/ObjectRenderer")),c=r(e("./TextureManager")),h=r(e("../../textures/BaseTexture")),d=r(e("./TextureGarbageCollector")),p=r(e("./WebGLState")),f=r(e("./utils/mapWebGLDrawModesToPixi")),g=r(e("./utils/validateContext")),m=e("../../utils"),v=r(e("pixi-gl-core")),y=e("../../const"),b=0,_=function(e){function t(n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"WebGL",n,r,i));return a.legacy=a.options.legacy,a.legacy&&(v.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=y.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new o.default(a),a.stencilManager=new s.default(a),a.emptyRenderer=new u.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,g.default)(a.options.context),a.gl=a.options.context||v.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=b++,a.state=new p.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,f.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new c.default(this),this.filterManager=new a.default(this),this.textureGC=new d.default(this),this.state.resetToDefault(),this.rootRenderTarget=new l.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var n=new v.default.GLTexture.fromData(e,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var i=0;i<t;i++){var o=new h.default;o._glTextures[this.CONTEXT_UID]=n,this.boundTextures[i]=r,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,n,r,i){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!i){var o=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=o}this.bindRenderTexture(t,r),this.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){i.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var n=e.baseTexture._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var n=void 0;if(e){var r=e.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),(n=r._glRenderTargets[this.CONTEXT_UID]).setFrame(e.frame)}else n=this.rootRenderTarget;return n.transform=t,this.bindRenderTarget(n),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,n){if(e=e||this.emptyTextures[t],e=e.baseTexture||e,e.touched=this.textureGC.count,n)t=t||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===e)return r;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=e._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[t]=e,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===e&&(this.boundTextures[n]=this.emptyTextures[n],t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new v.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(i.default);n.default=_,m.pluginTarget.mixin(_)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":124,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":12}],85:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./utils/mapWebGLBlendModesToPixi")),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,r.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return e.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},e.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},e.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},e.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},e.prototype.setBlendMode=function(e){if(e!==this.activeState[4]){this.activeState[4]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},e.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},e.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var n=1;n<this.maxAttribs;n++)this.gl.disableVertexAttribArray(n)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();n.default=i},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(e("./extractUniformsFromSrc")),s=e("../../../utils"),a=e("../../../const"),l=r(e("../../../settings")),u={},c=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this._blendMode=a.BLEND_MODES.NORMAL,this.uniformData=r||(0,o.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var i in this.uniformData)this.uniforms[i]=this.uniformData[i].value,this.uniformData[i].type&&(this.uniformData[i].type=this.uniformData[i].type.toLowerCase());this.glShaders={},u[this.vertexSrc+this.fragmentSrc]||(u[this.vertexSrc+this.fragmentSrc]=(0,s.uid)()),this.glShaderKey=u[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=l.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(e,t,n,r,i){e.applyFilter(this,t,n,r)},i(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),e}();n.default=c},{"../../../const":46,"../../../settings":101,"../../../utils":124,"./extractUniformsFromSrc":87}],87:[function(e,t,n){function r(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),n={},r=void 0,o=e.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<o.length;s++){var a=o[s].trim();if(a.indexOf("uniform")>-1){var l=a.split(" "),u=l[1],c=l[2],h=1;c.indexOf("[")>-1&&(c=(r=c.split(/\[|]/))[0],h*=Number(r[1])),c.match(t)||(n[c]={value:i(u,h),name:c,type:u})}}return n}n.__esModule=!0,n.default=function(e,t,n){var i=r(e),o=r(t);return Object.assign(i,o)};var i=function(e){return e&&e.__esModule?e:{default:e}}(e("pixi-gl-core")).default.shader.defaultValue},{"pixi-gl-core":12}],88:[function(e,t,n){n.__esModule=!0,n.calculateScreenSpaceMatrix=function(e,t,n){var r=e.identity();return r.translate(t.x/n.width,t.y/n.height),r.scale(n.width,n.height),r},n.calculateNormalizedScreenSpaceMatrix=function(e,t,n){var r=e.identity();r.translate(t.x/n.width,t.y/n.height);var i=n.width/t.width,o=n.height/t.height;return r.scale(i,o),r},n.calculateSpriteMatrix=function(e,t,n,i){var o=i._texture.baseTexture,s=e.set(n.width,0,0,n.height,t.x,t.y),a=i.worldTransform.copy(r.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(i.anchor.x,i.anchor.y),s};var r=e("../../../math")},{"../../../math":70}],89:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../Filter")),i=e("../../../../math"),o=(e("path"),function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=new i.Matrix,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return n.renderable=!1,o.maskSprite=n,o.maskMatrix=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n){var r=this.maskSprite;this.uniforms.mask=r._texture,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,r),this.uniforms.alpha=r.worldAlpha,e.applyFilter(this,t,n)},t}(r.default));n.default=o},{"../../../../math":70,"../Filter":86,path:23}],90:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=r(e("./WebGLManager")),s=r(e("../utils/RenderTarget")),a=r(e("../utils/Quad")),l=e("../../../math"),u=r(e("../../../Shader")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../filters/filterTransforms")),h=r(e("bit-twiddle")),d=function e(){i(this,e),this.renderTarget=null,this.sourceFrame=new l.Rectangle,this.destinationFrame=new l.Rectangle,this.filters=[],this.target=null,this.resolution=1},p=function(e){function t(n){i(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.gl=r.renderer.gl,r.quad=new a.default(r.gl,n.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.pushFilter=function(e,t){var n=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var i=new d;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=n._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[i]},this.filterData=r}var o=r.stack[++r.index];o||(o=r.stack[r.index]=new d);var s=t[0].resolution,a=0|t[0].padding,l=e.filterArea||e.getBounds(!0),u=o.sourceFrame,c=o.destinationFrame;u.x=(l.x*s|0)/s,u.y=(l.y*s|0)/s,u.width=(l.width*s|0)/s,u.height=(l.height*s|0)/s,r.stack[0].renderTarget.transform||t[0].autoFit&&u.fit(r.stack[0].destinationFrame),u.pad(a),c.width=u.width,c.height=u.height;var h=this.getPotRenderTarget(n.gl,u.width,u.height,s);o.target=e,o.filters=t,o.resolution=s,o.renderTarget=h,h.setFrame(c,u),n.bindRenderTarget(h),h.clear()},t.prototype.popFilter=function(){var e=this.filterData,t=e.stack[e.index-1],n=e.stack[e.index];this.quad.map(n.renderTarget.size,n.sourceFrame).upload();var r=n.filters;if(1===r.length)r[0].apply(this,n.renderTarget,t.renderTarget,!1,n),this.freePotRenderTarget(n.renderTarget);else{var i=n.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,n.resolution);o.setFrame(n.destinationFrame,n.sourceFrame),o.clear();var s=0;for(s=0;s<r.length-1;++s){r[s].apply(this,i,o,!0,n);var a=i;i=o,o=a}r[s].apply(this,i,t.renderTarget,!1,n),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}e.index--,0===e.index&&(this.filterData=null)},t.prototype.applyFilter=function(e,t,n,r){var i=this.renderer,o=i.gl,s=e.glShaders[i.CONTEXT_UID];s||(e.glShaderKey?(s=this.shaderCache[e.glShaderKey])||(s=new u.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[i.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=s):s=e.glShaders[i.CONTEXT_UID]=new u.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e),i.bindVao(null),this.quad.initVao(s)),i.bindVao(this.quad.vao),i.bindRenderTarget(n),r&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),n===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,e),i.state.setBlendMode(e.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(e,t){var n=t.uniformData,r=t.uniforms,i=1,o=void 0;if(e.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=e.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,e.uniforms.filterArea=s}if(e.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=e.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,e.uniforms.filterClamp=a}for(var l in n){var u=n[l].type;if("sampler2d"===u&&0!==r[l]){if(r[l].baseTexture)e.uniforms[l]=this.renderer.bindTexture(r[l].baseTexture,i);else{e.uniforms[l]=i;var c=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],c.activeTexture(c.TEXTURE0+i),r[l].texture.bind()}i++}else if("mat3"===u)void 0!==r[l].a?e.uniforms[l]=r[l].toArray(!0):e.uniforms[l]=r[l];else if("vec2"===u)if(void 0!==r[l].x){var h=e.uniforms[l]||new Float32Array(2);h[0]=r[l].x,h[1]=r[l].y,e.uniforms[l]=h}else e.uniforms[l]=r[l];else"float"===u?e.uniforms.data[l].value!==n[l]&&(e.uniforms[l]=r[l]):e.uniforms[l]=r[l]}},t.prototype.getRenderTarget=function(e,t){var n=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,t||n.resolution);return r.setFrame(n.destinationFrame,n.sourceFrame),r},t.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},t.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return c.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return c.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(e,t){var n=this.filterData.stack[this.filterData.index];return c.calculateSpriteMatrix(e,n.sourceFrame,n.renderTarget.size,t)},t.prototype.destroy=function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.renderer,n=this.managedFilters,r=0;r<n.length;r++)e||n[r].glShaders[t.CONTEXT_UID].destroy(),delete n[r].glShaders[t.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},t.prototype.getPotRenderTarget=function(e,t,n,r){var i=(65535&(t=h.default.nextPow2(t*r)))<<16|65535&(n=h.default.nextPow2(n*r));this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var a=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),o=new s.default(e,t,n,null,1),e.bindTexture(e.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=r,o.defaultFrame.width=o.size.width=t/r,o.defaultFrame.height=o.size.height=n/r,o},t.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var n=0;n<t.length;n++)t[n].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(e){var t=(65535&e.size.width*e.resolution)<<16|65535&e.size.height*e.resolution;this.pool[t].push(e)},t}(o.default);n.default=p},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("./WebGLManager")),o=r(e("../filters/spriteMask/SpriteMaskFilter")),s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var n=t.worldTransform,r=Math.atan2(n.b,n.a);(r=Math.round(r*(180/Math.PI)))%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},t.prototype.pushSpriteMask=function(e,t){var n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new o.default(t)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,n),this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(e,t){t.renderable=!0;var n=this.renderer._activeRenderTarget,r=t.getBounds();r.fit(n.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(r.x*i,(n.root?n.size.height-r.y-r.height:r.y)*i,r.width*i,r.height*i),this.scissorRenderTarget=n,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(i.default);n.default=s},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./WebGLManager")),i=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.stencilMaskStack=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,n=this.stencilMaskStack.length;0===n&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,n,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){r.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(r.default);n.default=i},{"./WebGLManager":93}],93:[function(e,t,n){n.__esModule=!0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();n.default=r},{}],94:[function(e,t,n){n.__esModule=!0;var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../managers/WebGLManager")).default);n.default=r},{"../managers/WebGLManager":93}],95:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("pixi-gl-core")),o=r(e("../../../utils/createIndicesForQuads")),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,o.default)(1),this.vertexBuffer=i.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new i.default.VertexArrayObject(t,n)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this},e.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}();n.default=s},{"../../../utils/createIndicesForQuads":122,"pixi-gl-core":12}],96:[function(e,t,n){n.__esModule=!0;var r=e("../../../math"),i=e("../../../const"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("../../../settings")),s=e("pixi-gl-core"),a=function(){function e(t,n,a,l,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=u||o.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==l?l:o.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new s.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=s.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===i.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(n,a)}return e.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},e.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},e.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},e.prototype.calculateProjection=function(e,t){var n=this.projectionMatrix;t=t||e,n.identity(),this.root?(n.a=1/e.width*2,n.d=-1/e.height*2,n.tx=-1-t.x*n.a,n.ty=1-t.y*n.d):(n.a=1/e.width*2,n.d=1/e.height*2,n.tx=-1-t.x*n.a,n.ty=-1-t.y*n.d)},e.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var n=this.frame||this.size;this.calculateProjection(n)}},e.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},e}();n.default=a},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":12}],97:[function(e,t,n){n.__esModule=!0,n.default=function(e,t){var n=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(n){var o=document.createElement("canvas");o.width=1,o.height=1,t=r.default.createContext(o)}for(var s=t.createShader(t.FRAGMENT_SHADER);;){var a=i.replace(/%forloop%/gi,function(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == "+n+".0){}");return t}(e));if(t.shaderSource(s,a),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS))break;e=e/2|0}return n&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),e};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("pixi-gl-core")),i=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],98:[function(e,t,n){n.__esModule=!0,n.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[r.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[r.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[r.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LUMINOSITY]=[e.ZERO,e.SRC_ALPHA],t[r.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA],t[r.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR],t};var r=e("../../../const")},{"../../../const":46}],99:[function(e,t,n){n.__esModule=!0,n.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[r.DRAW_MODES.POINTS]=e.POINTS,t[r.DRAW_MODES.LINES]=e.LINES,t[r.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[r.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[r.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[r.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[r.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t};var r=e("../../../const")},{"../../../const":46}],100:[function(e,t,n){n.__esModule=!0,n.default=function(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("./utils/maxRecommendedTextures")),o=r(e("./utils/canUploadSameBuffer"));n.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,i.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,o.default)()}},{"./utils/canUploadSameBuffer":121,"./utils/maxRecommendedTextures":126}],102:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../math"),s=e("../utils"),a=e("../const"),l=r(e("../textures/Texture")),u=r(e("../display/Container")),c=new o.Point,h=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r._anchor=new o.ObservablePoint(r._onAnchorUpdate,r),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=a.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=n||l.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,s=t.tx,a=t.ty,l=this.vertexData,u=e.trim,c=e.orig,h=this._anchor,d=0,p=0,f=0,g=0;u?(d=(p=u.x-h._x*c.width)+u.width,f=(g=u.y-h._y*c.height)+u.height):(d=(p=-h._x*c.width)+c.width,f=(g=-h._y*c.height)+c.height),l[0]=n*p+i*g+s,l[1]=o*g+r*p+a,l[2]=n*d+i*g+s,l[3]=o*g+r*d+a,l[4]=n*d+i*f+s,l[5]=o*f+r*d+a,l[6]=n*p+i*f+s,l[7]=o*f+r*p+a}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=-r._x*n.width,d=h+n.width,p=-r._y*n.height,f=p+n.height;t[0]=o*h+a*p+u,t[1]=l*p+s*h+c,t[2]=o*d+a*p+u,t[3]=l*p+s*d+c,t[4]=o*d+a*f+u,t[5]=l*f+s*d+c,t[6]=o*h+a*f+u,t[7]=l*f+s*h+c},t.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,c);var t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x,i=0;return c.x>=r&&c.x<r+t&&(i=-n*this.anchor.y,c.y>=i&&c.y<i+n)},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._anchor=null;if("boolean"==typeof t?t:t&&t.texture){var n="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},t.from=function(e){return new t(l.default.from(e))},t.fromFrame=function(e){var n=s.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new t(n)},t.fromImage=function(e,n,r){return new t(l.default.fromImage(e,n,r))},i(t,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,s.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,s.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),t}(u.default);n.default=h},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":124}],103:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("../../renderers/canvas/CanvasRenderer")),o=e("../../const"),s=e("../../math"),a=r(e("./CanvasTinter")),l=new s.Matrix,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=e._texture,n=this.renderer,r=t._frame.width,i=t._frame.height,u=e.transform.worldTransform,c=0,h=0;if(!(t.orig.width<=0||t.orig.height<=0)&&t.baseTexture.source&&(n.setBlendMode(e.blendMode),t.valid)){n.context.globalAlpha=e.worldAlpha;var d=t.baseTexture.scaleMode===o.SCALE_MODES.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==d&&(n.context[n.smoothProperty]=d),t.trim?(c=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,h=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(c=(.5-e.anchor.x)*t.orig.width,h=(.5-e.anchor.y)*t.orig.height),t.rotate&&(u.copy(l),u=l,s.GroupD8.matrixAppendRotationInv(u,t.rotate,c,h),c=0,h=0),c-=r/2,h-=i/2,n.roundPixels?(n.context.setTransform(u.a,u.b,u.c,u.d,u.tx*n.resolution|0,u.ty*n.resolution|0),c|=0,h|=0):n.context.setTransform(u.a,u.b,u.c,u.d,u.tx*n.resolution,u.ty*n.resolution);var p=t.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=a.default.getTintedTexture(e,e.tint)),n.context.drawImage(e.tintedTexture,0,0,r*p,i*p,c*n.resolution,h*n.resolution,r*n.resolution,i*n.resolution)):n.context.drawImage(t.baseTexture.source,t._frame.x*p,t._frame.y*p,r*p,i*p,c*n.resolution,h*n.resolution,r*n.resolution,i*n.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();n.default=u,i.default.registerPlugin("sprite",u)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(e,t,n){n.__esModule=!0;var r=e("../../utils"),i={getTintedTexture:function(e,t){var n=e._texture,r="#"+("00000"+(0|(t=i.roundColor(t))).toString(16)).substr(-6);n.tintCache=n.tintCache||{};var o=n.tintCache[r],s=void 0;if(o){if(o.tintId===n._updateID)return n.tintCache[r];s=n.tintCache[r]}else s=i.canvas||document.createElement("canvas");if(i.tintMethod(n,t,s),s.tintId=n._updateID,i.convertTintToImage){var a=new Image;a.src=s.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=s,i.canvas=null;return s},tintWithMultiply:function(e,t,n){var r=n.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(e,t,n){var r=n.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(e,t,n){var i=n.getContext("2d"),o=e._frame.clone(),s=e.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),i.restore();for(var a=(0,r.hex2rgb)(t),l=a[0],u=a[1],c=a[2],h=i.getImageData(0,0,o.width,o.height),d=h.data,p=0;p<d.length;p+=4)d[p+0]*=l,d[p+1]*=u,d[p+2]*=c;i.putImageData(h,0,0)},roundColor:function(e){var t=i.cacheStepsPerColorChannel,n=(0,r.hex2rgb)(e);return n[0]=Math.min(255,n[0]/t*t),n[1]=Math.min(255,n[1]/t*t),n[2]=Math.min(255,n[2]/t*t),(0,r.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(e){return e&&e.__esModule?e:{default:e}}(e("../../renderers/canvas/utils/canUseNewCanvasBlendModes")).default)(),tintMethod:0};i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel,n.default=i},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":124}],105:[function(e,t,n){n.__esModule=!0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return e.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},e}();n.default=r},{}],106:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("../../renderers/webgl/utils/ObjectRenderer")),o=r(e("../../renderers/webgl/WebGLRenderer")),s=r(e("../../utils/createIndicesForQuads")),a=r(e("./generateMultiTextureShader")),l=r(e("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),u=r(e("./BatchBuffer")),c=r(e("../../settings")),h=e("../../utils"),d=r(e("pixi-gl-core")),p=r(e("bit-twiddle")),f=0,g=0,m=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=c.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var i=1;i<=p.default.nextPow2(r.size);i*=2)r.buffers.push(new u.default(4*i*r.vertByteSize));r.indices=(0,s.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var o=0;o<r.size;o++)r.groups[o]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,l.default)(this.MAX_TEXTURES,e)),this.shader=(0,a.default)(e,this.MAX_TEXTURES),this.indexBuffer=d.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,n=0;n<this.vaoMax;n++){var r=this.vertexBuffers[n]=d.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(r,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&i.addAttribute(r,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[n]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,n=p.default.nextPow2(this.currentIndex),r=p.default.log2(n),i=this.buffers[r],o=this.sprites,s=this.groups,a=i.float32View,l=i.uint32View,u=this.boundTextures,m=this.renderer.boundTextures,v=this.renderer.textureGC.count,y=0,b=void 0,_=void 0,x=1,w=0,T=s[0],E=void 0,S=void 0,I=h.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];T.textureCount=0,T.start=0,T.blend=I,f++;var P=void 0;for(P=0;P<t;++P)u[P]=m[P],u[P]._virtalBoundId=P;for(P=0;P<this.currentIndex;++P){var M=o[P];b=M._texture.baseTexture;var A=h.premultiplyBlendMode[Number(b.premultipliedAlpha)][M.blendMode];if(I!==A&&(I=A,_=null,w=t,f++),_!==b&&(_=b,b._enabled!==f)){if(w===t&&(f++,T.size=P-T.start,w=0,(T=s[x++]).blend=I,T.textureCount=0,T.start=P),b.touched=v,-1===b._virtalBoundId)for(var O=0;O<t;++O){var C=(O+g)%t,R=u[C];if(R._enabled!==f){g++,R._virtalBoundId=-1,b._virtalBoundId=C,u[C]=b;break}}b._enabled=f,T.textureCount++,T.ids[w]=b._virtalBoundId,T.textures[w++]=b}if(E=M.vertexData,S=M._texture._uvs.uvsUint32,this.renderer.roundPixels){var D=this.renderer.resolution;a[y]=(E[0]*D|0)/D,a[y+1]=(E[1]*D|0)/D,a[y+5]=(E[2]*D|0)/D,a[y+6]=(E[3]*D|0)/D,a[y+10]=(E[4]*D|0)/D,a[y+11]=(E[5]*D|0)/D,a[y+15]=(E[6]*D|0)/D,a[y+16]=(E[7]*D|0)/D}else a[y]=E[0],a[y+1]=E[1],a[y+5]=E[2],a[y+6]=E[3],a[y+10]=E[4],a[y+11]=E[5],a[y+15]=E[6],a[y+16]=E[7];l[y+2]=S[0],l[y+7]=S[1],l[y+12]=S[2],l[y+17]=S[3];var k=Math.min(M.worldAlpha,1),L=k<1&&b.premultipliedAlpha?(0,h.premultiplyTint)(M._tintRGB,k):M._tintRGB+(255*k<<24);l[y+3]=l[y+8]=l[y+13]=l[y+18]=L,a[y+4]=a[y+9]=a[y+14]=a[y+19]=b._virtalBoundId,y+=20}if(T.size=P-T.start,c.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var N=this.shader.attributes,U=this.vertexBuffers[this.vertexCount]=d.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),F=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(U,N.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(U,N.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(U,N.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);N.aTextureId&&F.addAttribute(U,N.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=F}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(P=0;P<t;++P)m[P]._virtalBoundId=-1;for(P=0;P<x;++P){for(var B=s[P],j=B.textureCount,G=0;G<j;G++)_=B.textures[G],m[B.ids[G]]!==_&&this.renderer.bindTexture(_,B.ids[G],!0),_._virtalBoundId=-1;this.renderer.state.setBlendMode(B.blend),e.drawElements(e.TRIANGLES,6*B.size,e.UNSIGNED_SHORT,6*B.start*2)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),c.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var n=0;n<this.buffers.length;++n)this.buffers[n].destroy()},t}(i.default);n.default=m,o.default.registerPlugin("sprite",m)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":124,"../../utils/createIndicesForQuads":122,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":12}],107:[function(e,t,n){n.__esModule=!0,n.default=function(e,t){var n=i;n=(n=n.replace(/%count%/gi,t)).replace(/%forloop%/gi,function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(textureId == "+n+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord, -1.0);",t+="\n}";return t+="\n",t+="\n"}(t));for(var o=new r.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",n),s=[],a=0;a<t;a++)s[a]=a;return o.bind(),o.uniforms.uSamplers=s,o};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../../Shader")),i=(e("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":44,path:23}],108:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(e("../sprites/Sprite")),s=r(e("../textures/Texture")),a=e("../math"),l=e("../utils"),u=e("../const"),c=r(e("../settings")),h=r(e("./TextStyle")),d=r(e("./TextMetrics")),p=r(e("../utils/trimCanvas")),f={texture:!0,children:!1,baseTexture:!0},g=function(e){function t(n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=i||document.createElement("canvas")).width=3,i.height=3;var o=s.default.fromCanvas(i,c.default.SCALE_MODE,"text");o.orig=new a.Rectangle,o.trim=new a.Rectangle;var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,o));return s.default.addToCache(l._texture,l._texture.baseTexture.textureCacheIds[0]),l.canvas=i,l.context=l.canvas.getContext("2d"),l.resolution=c.default.RESOLUTION,l._text=null,l._style=null,l._styleListener=null,l._font="",l.text=n,l.style=r,l.localStyleID=-1,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var n=this.context,r=d.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,s=r.lines,a=r.lineHeight,l=r.lineWidths,u=r.maxLineWidth,c=r.fontProperties;this.canvas.width=Math.ceil((i+2*t.padding)*this.resolution),this.canvas.height=Math.ceil((o+2*t.padding)*this.resolution),n.scale(this.resolution,this.resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.strokeStyle=t.stroke,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;var h=void 0,p=void 0;if(t.dropShadow){n.fillStyle=t.dropShadowColor,n.globalAlpha=t.dropShadowAlpha,n.shadowBlur=t.dropShadowBlur,t.dropShadowBlur>0&&(n.shadowColor=t.dropShadowColor);for(var f=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,g=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,m=0;m<s.length;m++)h=t.strokeThickness/2,p=t.strokeThickness/2+m*a+c.ascent,"right"===t.align?h+=u-l[m]:"center"===t.align&&(h+=(u-l[m])/2),t.fill&&(this.drawLetterSpacing(s[m],h+f+t.padding,p+g+t.padding),t.stroke&&t.strokeThickness&&(n.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(s[m],h+f+t.padding,p+g+t.padding,!0),n.strokeStyle=t.stroke))}n.shadowBlur=0,n.globalAlpha=1,n.fillStyle=this._generateFillStyle(t,s);for(var v=0;v<s.length;v++)h=t.strokeThickness/2,p=t.strokeThickness/2+v*a+c.ascent,"right"===t.align?h+=u-l[v]:"center"===t.align&&(h+=(u-l[v])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(s[v],h+t.padding,p+t.padding,!0),t.fill&&this.drawLetterSpacing(s[v],h+t.padding,p+t.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style.letterSpacing;if(0!==i)for(var o=String.prototype.split.call(e,""),s=t,a=0,l="";a<e.length;)l=o[a++],r?this.context.strokeText(l,s,n):this.context.fillText(l,s,n),s+=this.context.measureText(l).width+i;else r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n)},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,p.default)(e);e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0)}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=e.width,o.realHeight=e.height,o.width=e.width/this.resolution,o.height=e.height/this.resolution,n.trim.width=n._frame.width=e.width/this.resolution,n.trim.height=n._frame.height=e.height/this.resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var n=void 0,r=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,l=e.fill.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var h=l.length+1,d=1;d<h;++d)c.push(d/h);if(l.unshift(e.fill[0]),c.unshift(0),l.push(e.fill[e.fill.length-1]),c.push(1),e.fillGradientType===u.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(s/2,0,s/2,a),r=(l.length+1)*t.length,i=0;for(var p=0;p<t.length;p++){i+=1;for(var f=0;f<l.length;f++)o="number"==typeof c[f]?c[f]/t.length+p/t.length:i/r,n.addColorStop(o,l[f]),i++}}else{n=this.context.createLinearGradient(0,a/2,s,a/2),r=l.length+1,i=1;for(var g=0;g<l.length;g++)o="number"==typeof c[g]?c[g]:i/r,n.addColorStop(o,l[g]),i++}return n},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},f,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},i(t,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=(0,l.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=(0,l.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){(e=e||{})instanceof h.default?this._style=e:this._style=new h.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null===e||void 0===e?" ":e),this._text!==e&&(this._text=e,this.dirty=!0)}}]),t}(o.default);n.default=g},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":124,"../utils/trimCanvas":129,"./TextMetrics":109,"./TextStyle":110}],109:[function(e,t,n){n.__esModule=!0;var r=function(){function e(t,n,r,i,o,s,a,l,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.style=n,this.width=r,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return e.measureText=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;r=r||n.wordWrap;var o=n.toFontString(),s=e.measureFont(o),a=i.getContext("2d");a.font=o;for(var l=(r?e.wordWrap(t,n,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0,h=0;h<l.length;h++){var d=a.measureText(l[h]).width+(l[h].length-1)*n.letterSpacing;u[h]=d,c=Math.max(c,d)}var p=c+n.strokeThickness;n.dropShadow&&(p+=n.dropShadowDistance);var f=n.lineHeight||s.fontSize+n.strokeThickness,g=Math.max(f,s.fontSize+n.strokeThickness)+(l.length-1)*(f+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new e(t,n,p,g,l,u,f+n.leading,c,s)},e.wordWrap=function(t,n){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas).getContext("2d"),i="",o=t.split("\n"),s=n.wordWrapWidth,a={},l=0;l<o.length;l++){for(var u=s,c=o[l].split(" "),h=0;h<c.length;h++){var d=r.measureText(c[h]).width;if(n.breakWords&&d>s)for(var p=c[h].split(""),f=0;f<p.length;f++){var g=p[f],m=a[g];void 0===m&&(m=r.measureText(g).width,a[g]=m),m>u?(i+="\n"+g,u=s-m):(0===f&&(i+=" "),i+=g,u-=m)}else{var v=d+r.measureText(" ").width;0===h||v>u?(h>0&&(i+="\n"),i+=c[h],u=s-d):(u-=v,i+=" "+c[h])}}l<o.length-1&&(i+="\n")}return i},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var n={},r=e._canvas,i=e._context;i.font=t;var o=Math.ceil(i.measureText("|MÃq").width),s=Math.ceil(i.measureText("M").width),a=2*s;s=1.4*s|0,r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|MÃq",0,s);var l=i.getImageData(0,0,o,a).data,u=l.length,c=4*o,h=0,d=0,p=!1;for(h=0;h<s;++h){for(var f=0;f<c;f+=4)if(255!==l[d+f]){p=!0;break}if(p)break;d+=c}for(n.ascent=s-h,d=u-c,p=!1,h=a;h>s;--h){for(var g=0;g<c;g+=4)if(255!==l[d+g]){p=!0;break}if(p)break;d-=c}return n.descent=h-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n},e}();n.default=r;var i=document.createElement("canvas");i.width=i.height=10,r._canvas=i,r._context=i.getContext("2d"),r._fonts={}},{}],110:[function(e,t,n){function r(e){return"number"==typeof e?(0,a.hex2string)(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function i(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=r(e[t]);return e}return r(e)}n.__esModule=!0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../const"),a=e("../utils"),l={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:s.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.styleID=0,Object.assign(this,l,t)}return e.prototype.clone=function(){var t={};for(var n in l)t[n]=this[n];return new e(t)},e.prototype.reset=function(){Object.assign(this,l)},e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();/([\"\'])[^\'\"]+\1/.test(r)||(r='"'+r+'"'),t[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},o(e,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=i(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=i(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=i(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),e}();n.default=u},{"../const":46,"../utils":124}],111:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("./BaseTexture")),o=r(e("../settings")),s=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments[2],s=arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,null,i));return a.resolution=s||o.default.RESOLUTION,a.width=n,a.height=r,a.realWidth=a.width*a.resolution,a.realHeight=a.height*a.resolution,a.scaleMode=void 0!==i?i:o.default.SCALE_MODE,a.hasLoaded=!0,a._glRenderTargets={},a._canvasRenderTarget=null,a.valid=!1,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t){e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(i.default);n.default=s},{"../settings":101,"./BaseTexture":112}],112:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../utils"),o=r(e("../settings")),s=r(e("eventemitter3")),a=r(e("../utils/determineCrossOrigin")),l=r(e("bit-twiddle")),u=function(e){function t(n,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return a.uid=(0,i.uid)(),a.touched=0,a.resolution=s||o.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==r?r:o.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=o.default.MIPMAP_TEXTURES,a.wrapMode=o.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],n&&a.loadSource(n),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.update=function(e){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),e||this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=l.default.isPow2(this.realWidth)&&l.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height){this._updateImageType(),"svg"===this.imageType&&this._loadSvgSource();var r=this;n&&(window.createImageBitmap&&!e.getContext?(r.hasLoaded=!0,r.update(!0),window.createImageBitmap(e).then(function(e){r.source=e,r.emit("loaded",r)})):(this._sourceLoaded(),r.emit("loaded",r)))}else if(!e.getContext){this.isLoading=!0;r=this;if(e.onload=function(){r._updateImageType(),e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,"svg"!==r.imageType?window.createImageBitmap?(r.hasLoaded=!0,r.update(!0),window.createImageBitmap(e).then(function(e){r.source=e,r.emit("loaded",r)})):(r._sourceLoaded(),r.emit("loaded",r)):r._loadSvgSource())},e.onerror=function(){e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,e.width&&e.height?t&&(window.createImageBitmap?(r.hasLoaded=!0,r.update(!0),window.createImageBitmap(e).then(function(e){r.source=e,r.emit("loaded",r)})):(this._sourceLoaded(),r.emit("loaded",r))):t&&this.emit("error",this)}}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,i.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var n=e.subType.split("+")[0];if(!(t=(0,i.getUrlFileExtension)("."+n)))throw new Error("Invalid image type in data URI.")}else(t=(0,i.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},t.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,i.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var n=(0,i.getSvgSize)(e),r=n.width,o=n.height;if(!r||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(o*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,i.uid)(),s.getContext("2d").drawImage(this.source,0,0,r,o,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,t.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,n,r,o){var s=i.BaseTextureCache[e];if(!s){var l=new Image;void 0===n&&0!==e.indexOf("data:")?l.crossOrigin=(0,a.default)(e):n&&(l.crossOrigin="string"==typeof n?n:"anonymous"),(s=new t(l,r)).imageUrl=e,o&&(s.sourceScale=o),s.resolution=(0,i.getResolutionOfUrl)(e),l.src=e,t.addToCache(s,e)}return s},t.fromCanvas=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+(0,i.uid)());var o=i.BaseTextureCache[e._pixiId];return o||(o=new t(e,n),t.addToCache(o,e._pixiId)),o},t.from=function(e,n,r){if("string"==typeof e)return t.fromImage(e,void 0,n,r);if(e instanceof HTMLImageElement){var o=e.src,s=i.BaseTextureCache[o];return s||((s=new t(e,n)).imageUrl=o,r&&(s.sourceScale=r),s.resolution=(0,i.getResolutionOfUrl)(o),t.addToCache(s,o)),s}return e instanceof HTMLCanvasElement?t.fromCanvas(e,n):e},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),i.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),i.BaseTextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=i.BaseTextureCache[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete i.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete i.BaseTextureCache[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t}(s.default);n.default=u},{"../settings":101,"../utils":124,"../utils/determineCrossOrigin":123,"bit-twiddle":1,eventemitter3:3}],113:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("./BaseRenderTexture")),o=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=null;if(!(n instanceof i.default)){var s=arguments[1],a=arguments[2],l=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),o=arguments[0],r=null,n=new i.default(s,a,l,u)}var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return c.legacyRenderer=o,c.valid=!0,c._updateUvs(),c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t,n){this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,n||this.baseTexture.resize(e,t),this._updateUvs()},t.create=function(e,n,r,o){return new t(new i.default(e,n,r,o))},t}(r(e("./Texture")).default);n.default=o},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("../"),o=e("../utils"),s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseTexture=t,this.textures={},this.data=n,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(e,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),e.prototype._updateResolution=function(e){var t=this.data.meta.scale,n=(0,o.getResolutionOfUrl)(e,null);return null===n&&(n=void 0!==t?parseFloat(t):1),1!==n&&(this.baseTexture.resolution=n,this.baseTexture.update()),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var n=t,r=e.BATCH_SIZE,o=this.baseTexture.sourceScale;n-t<r&&n<this._frameKeys.length;){var s=this._frameKeys[n],a=this._frames[s].frame;if(a){var l=null,u=null,c=new i.Rectangle(0,0,Math.floor(this._frames[s].sourceSize.w*o)/this.resolution,Math.floor(this._frames[s].sourceSize.h*o)/this.resolution);l=this._frames[s].rotated?new i.Rectangle(Math.floor(a.x*o)/this.resolution,Math.floor(a.y*o)/this.resolution,Math.floor(a.h*o)/this.resolution,Math.floor(a.w*o)/this.resolution):new i.Rectangle(Math.floor(a.x*o)/this.resolution,Math.floor(a.y*o)/this.resolution,Math.floor(a.w*o)/this.resolution,Math.floor(a.h*o)/this.resolution),this._frames[s].trimmed&&(u=new i.Rectangle(Math.floor(this._frames[s].spriteSourceSize.x*o)/this.resolution,Math.floor(this._frames[s].spriteSourceSize.y*o)/this.resolution,Math.floor(a.w*o)/this.resolution,Math.floor(a.h*o)/this.resolution)),this.textures[s]=new i.Texture(this.baseTexture,l,c,u,this._frames[s].rotated?2:0),i.Texture.addToCache(this.textures[s],s)}n++}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():t._parseComplete()},0)},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},e}();n.default=s},{"../":65,"../utils":124}],115:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}n.__esModule=!0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=r(e("./BaseTexture")),a=r(e("./VideoBaseTexture")),l=r(e("./TextureUvs")),u=r(e("eventemitter3")),c=e("../math"),h=e("../utils"),d=r(e("../settings")),p=function(e){function t(n,r,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));if(a.noFrame=!1,r||(a.noFrame=!0,r=new c.Rectangle(0,0,1,1)),n instanceof t&&(n=n.baseTexture),a.baseTexture=n,a._frame=r,a.trim=o,a.valid=!1,a.requiresUpdate=!1,a._uvs=null,a.orig=i||r,a._rotate=Number(s||0),!0===s)a._rotate=2;else if(a._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return n.hasLoaded?(a.noFrame&&(r=new c.Rectangle(0,0,n.width,n.height),n.on("update",a.onBaseTextureUpdated,a)),a.frame=r):n.once("loaded",a.onBaseTextureLoaded,a),a._updateID=0,a.transform=null,a.textureCacheIds=[],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new c.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&(h.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new l.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,n,r,i){var o=h.TextureCache[e];return o||(o=new t(s.default.fromImage(e,n,r,i)),t.addToCache(o,e)),o},t.fromFrame=function(e){var t=h.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},t.fromCanvas=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new t(s.default.fromCanvas(e,n,r))},t.fromVideo=function(e,n){return"string"==typeof e?t.fromVideoUrl(e,n):new t(a.default.fromVideo(e,n))},t.fromVideoUrl=function(e,n){return new t(a.default.fromUrl(e,n))},t.from=function(e){if("string"==typeof e){var n=h.TextureCache[e];if(!n){return null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?t.fromVideoUrl(e):t.fromImage(e)}return n}return e instanceof HTMLImageElement?new t(s.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,d.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof s.default?new t(e):e},t.fromLoader=function(e,n,r){var i=new s.default(e,void 0,(0,h.getResolutionOfUrl)(n)),o=new t(i);return i.imageUrl=n,r||(r=n),s.default.addToCache(o.baseTexture,r),t.addToCache(o,r),r!==n&&(s.default.addToCache(o.baseTexture,n),t.addToCache(o,n)),o},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),h.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),h.TextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=h.TextureCache[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete h.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)h.TextureCache[e.textureCacheIds[r]]===e&&delete h.TextureCache[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},o(t,[{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,o=t+r>this.baseTexture.width,s=n+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",l="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,u="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+a+" "+u)}this.valid=r&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(u.default);n.default=p,p.EMPTY=new p(new s.default),i(p.EMPTY),i(p.EMPTY.baseTexture),p.WHITE=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new p(new s.default(e))}(),i(p.WHITE),i(p.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":124,"./BaseTexture":112,"./TextureUvs":116,"./VideoBaseTexture":117,eventemitter3:3}],116:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../math/GroupD8")),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(e,t,n){var i=t.width,o=t.height;if(n){var s=e.width/2/i,a=e.height/2/o,l=e.x/i+s,u=e.y/o+a;n=r.default.add(n,r.default.NW),this.x0=l+s*r.default.uX(n),this.y0=u+a*r.default.uY(n),n=r.default.add(n,2),this.x1=l+s*r.default.uX(n),this.y1=u+a*r.default.uY(n),n=r.default.add(n,2),this.x2=l+s*r.default.uX(n),this.y2=u+a*r.default.uY(n),n=r.default.add(n,2),this.x3=l+s*r.default.uX(n),this.y3=u+a*r.default.uY(n)}else this.x0=e.x/i,this.y0=e.y/o,this.x1=(e.x+e.width)/i,this.y1=e.y/o,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/o,this.x3=e.x/i,this.y3=(e.y+e.height)/o;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},e}();n.default=i},{"../math/GroupD8":66}],117:[function(e,t,n){function r(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=t,n}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./BaseTexture")),s=e("../utils"),a=e("../ticker"),l=e("../const"),u=function(e){function t(n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("No video source element specified.");(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return i.width=n.videoWidth,i.height=n.videoHeight,i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=!0,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),n.addEventListener("play",i._onPlayStart.bind(i)),n.addEventListener("pause",i._onPlayStop.bind(i)),i.hasLoaded=!1,i.__loaded=!1,i._isSourceReady()?i._onCanPlay():(n.addEventListener("canplay",i._onCanPlay),n.addEventListener("canplaythrough",i._onCanPlay)),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(a.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(a.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&a.shared.remove(this.update,this),this.source&&this.source._pixiId&&(o.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),e.prototype.destroy.call(this)},t.fromVideo=function(e,n){e._pixiId||(e._pixiId="video_"+(0,s.uid)());var r=s.BaseTextureCache[e._pixiId];return r||(r=new t(e,n),o.default.addToCache(r,e._pixiId)),r},t.fromUrl=function(e,n){var i=document.createElement("video");if(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),Array.isArray(e))for(var o=0;o<e.length;++o)i.appendChild(r(e[o].src||e[o],e[o].mime));else i.appendChild(r(e.src||e,e.mime));return i.load(),t.fromVideo(i,n)},i(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(a.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(a.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(o.default);n.default=u,u.fromUrls=u.fromUrl},{"../const":46,"../ticker":120,"../utils":124,"./BaseTexture":112}],118:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(e("../settings")),s=e("../const"),a=r(e("./TickerListener")),l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=new a.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/o.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(e,t,n))},e.prototype.addOnce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(e,t,n,!0))},e.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*o.default.TARGET_FPMS*this.speed;for(var n=this._head,r=n.next;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},i(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,o.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();n.default=l},{"../const":46,"../settings":101,"./TickerListener":119}],119:[function(e,t,n){n.__esModule=!0;var r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fn=t,this.context=n,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.previous;return this.next=e?null:t,this.previous=null,t},e}();n.default=r},{}],120:[function(e,t,n){n.__esModule=!0,n.Ticker=n.shared=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./Ticker")),i=new r.default;i.autoStart=!0,i.destroy=function(){},n.shared=i,n.Ticker=r.default},{"./Ticker":118}],121:[function(e,t,n){n.__esModule=!0,n.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],122:[function(e,t,n){n.__esModule=!0,n.default=function(e){for(var t=6*e,n=new Uint16Array(t),r=0,i=0;r<t;r+=6,i+=4)n[r+0]=i+0,n[r+1]=i+1,n[r+2]=i+2,n[r+3]=i+0,n[r+4]=i+2,n[r+5]=i+3;return n}},{}],123:[function(e,t,n){n.__esModule=!0,n.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,i||(i=document.createElement("a")),i.href=e;var n=!(e=r.default.parse(i.href)).port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&n&&e.protocol===t.protocol?"":"anonymous"};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("url")),i=void 0},{url:29}],124:[function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.premultiplyBlendMode=n.BaseTextureCache=n.TextureCache=n.mixins=n.pluginTarget=n.EventEmitter=n.removeItems=n.isMobile=void 0,n.uid=function(){return++p},n.hex2rgb=function(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},n.hex2string=function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},n.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},n.getResolutionOfUrl=function(e,t){var n=s.default.RETINA_PREFIX.exec(e);return n?parseFloat(n[1]):void 0!==t?t:1},n.decomposeDataUri=function(e){var t=o.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]}},n.getUrlFileExtension=function(e){var t=o.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase()},n.getSvgSize=function(e){var t=o.SVG_SIZE.exec(e),n={};return t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7]))),n},n.skipHello=function(){f=!0},n.sayHello=function(e){if(!f){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c PixiJS "+o.VERSION+" - â° "+e+" â°  %c  %c  http://www.pixijs.com/  %c %c â¥%câ¥%câ¥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+o.VERSION+" - "+e+" - http://www.pixijs.com/");f=!0}},n.isWebGLSupported=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(e){return!1}},n.sign=function(e){return 0===e?0:e<0?-1:1},n.destroyTextureCache=function(){var e=void 0;for(e in g)g[e].destroy();for(e in m)m[e].destroy()},n.clearTextureCache=function(){var e=void 0;for(e in g)delete g[e];for(e in m)delete m[e]},n.correctBlendMode=function(e,t){return v[t?1:0][e]},n.premultiplyTint=function(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var n=e>>16&255,r=e>>8&255,i=255&e;return n=n*t+.5|0,r=r*t+.5|0,i=i*t+.5|0,(255*t<<24)+(n<<16)+(r<<8)+i},n.premultiplyRgba=function(e,t,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t):(n[0]=e[0],n[1]=e[1],n[2]=e[2]),n[3]=t,n},n.premultiplyTintToRgba=function(e,t,n,r){return n=n||new Float32Array(4),n[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,(r||void 0===r)&&(n[0]*=t,n[1]*=t,n[2]*=t),n[3]=t,n};var o=e("../const"),s=i(e("../settings")),a=i(e("eventemitter3")),l=i(e("./pluginTarget")),u=r(e("./mixin")),c=r(e("ismobilejs")),h=i(e("remove-array-items")),d=i(e("./mapPremultipliedBlendModes")),p=0,f=!1;n.isMobile=c,n.removeItems=h.default,n.EventEmitter=a.default,n.pluginTarget=l.default,n.mixins=u;var g=n.TextureCache=Object.create(null),m=n.BaseTextureCache=Object.create(null),v=n.premultiplyBlendMode=(0,d.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":125,"./mixin":127,"./pluginTarget":128,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],125:[function(e,t,n){n.__esModule=!0,n.default=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,e[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,e[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,t[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,t[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,t[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(t),i.push(e),i};var r=e("../const")},{"../const":46}],126:[function(e,t,n){n.__esModule=!0,n.default=function(e){return r.default.tablet||r.default.phone?4:e};var r=function(e){return e&&e.__esModule?e:{default:e}}(e("ismobilejs"))},{ismobilejs:4}],127:[function(e,t,n){function r(e,t){if(e&&t)for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}}n.__esModule=!0,n.mixin=r,n.delayMixin=function(e,t){i.push(e,t)},n.performMixins=function(){for(var e=0;e<i.length;e+=2)r(i[e],i[e+1]);i.length=0};var i=[]},{}],128:[function(e,t,n){n.__esModule=!0,n.default={mixin:function(e){!function(e){e.__plugins={},e.registerPlugin=function(t,n){e.__plugins[t]=n},e.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var t in e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}(e)}}},{}],129:[function(e,t,n){n.__esModule=!0,n.default=function(e){var t=e.width,n=e.height,r=e.getContext("2d"),i=r.getImageData(0,0,t,n).data,o=i.length,s={top:null,left:null,right:null,bottom:null},a=void 0,l=void 0,u=void 0;for(a=0;a<o;a+=4)0!==i[a+3]&&(l=a/4%t,u=~~(a/4/t),null===s.top&&(s.top=u),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=u:s.bottom<u&&(s.bottom=u));return t=s.right-s.left,{height:n=s.bottom-s.top+1,width:t,data:r.getImageData(s.left,s.top,t,n)}}},{}],130:[function(e,t,n){function r(e){var t=(new Error).stack;void 0===t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t)))}n.__esModule=!0,n.default=function(e){var t=e.mesh,n=e.particles,i=e.extras,o=e.filters,s=e.prepare,a=e.loaders,l=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return r("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return r("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return r("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return r("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return r("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),n.ParticleContainer}},MovieClip:{get:function(){return r("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),i.AnimatedSprite}},TilingSprite:{get:function(){return r("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),i.TilingSprite}},BitmapText:{get:function(){return r("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),i.BitmapText}},blendModes:{get:function(){return r("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return r("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return r("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return r("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return r("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return r("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return r("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],c=function(t){var n=u[t];Object.defineProperty(e[n.parent],"DEFAULT",{get:function(){return r("PIXI."+n.parent+".DEFAULT has been deprecated, please use PIXI.settings."+n.target),e.settings[n.target]},set:function(t){r("PIXI."+n.parent+".DEFAULT has been deprecated, please use PIXI.settings."+n.target),e.settings[n.target]=t}})},h=0;h<u.length;h++)c(h);Object.defineProperties(e.settings,{PRECISION:{get:function(){return r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return r("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),i.AnimatedSprite}}}),e.DisplayObject.prototype.generateTexture=function(e,t,n){return r("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,n)},e.Graphics.prototype.generateTexture=function(e,t){return r("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.RenderTexture.prototype.render=function(e,t,n,i){this.legacyRenderer.render(e,this,n,t,!i),r("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return r("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return r("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return r("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return r("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,r("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.BitmapText&&(i.BitmapText.prototype.setText=function(e){this.text=e,r("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(e){this.text=e,r("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return r("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return r("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,r("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return r("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return r("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(t=t||{})instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){r("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){r("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),n=-1;this._fontSize=26;for(var i=0;i<t.length;++i)if(t[i].match(/(px|pt|em|%)/)){n=i,this._fontSize=t[i];break}this._fontWeight="normal";for(var o=0;o<n;++o)if(t[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[o];break}if(n>-1&&n<t.length-1){this._fontFamily="";for(var s=n+1;s<t.length;++s)this._fontFamily+=t[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,r("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,n){e.Texture.addToCache(t,n),r("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return r("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(o,{AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return r("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return r("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return r("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var d=!0;if(Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(r("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=e},get:function(){return d}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(e,t){return r("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this}),s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var p=a.Resource,f=a.Loader;Object.defineProperties(p.prototype,{isJson:{get:function(){return r("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===p.TYPE.JSON}},isXml:{get:function(){return r("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===p.TYPE.XML}},isImage:{get:function(){return r("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===p.TYPE.IMAGE}},isAudio:{get:function(){return r("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===p.TYPE.AUDIO}},isVideo:{get:function(){return r("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===p.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return r("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return r("The after() method is deprecated, please use use()."),this.use}}})}l.interactiveTarget&&Object.defineProperty(l.interactiveTarget,"defaultCursor",{set:function(e){r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),l.InteractionManager&&(Object.defineProperty(l.InteractionManager,"defaultCursorStyle",{set:function(e){r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(l.InteractionManager,"currentCursorStyle",{set:function(e){r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},{}],131:[function(e,t,n){n.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),i=new r.Rectangle,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0;e&&(a=e instanceof r.RenderTexture?e:t.generateTexture(e)),a?(n=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(n=t.rootContext,(s=i).width=this.renderer.width,s.height=this.renderer.height);var l=s.width*o,u=s.height*o,c=new r.CanvasRenderTarget(l,u),h=n.getImageData(s.x*o,s.y*o,l,u);return c.context.putImageData(h,0,0),c.canvas},e.prototype.pixels=function(e){var t=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0;return e&&(a=e instanceof r.RenderTexture?e:t.generateTexture(e)),a?(n=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(n=t.rootContext,(s=i).width=t.width,s.height=t.height),n.getImageData(0,0,s.width*o,s.height*o).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();n.default=o,r.CanvasRenderer.registerPlugin("extract",o)},{"../../core":65}],132:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("./webgl/WebGLExtract");Object.defineProperty(n,"webgl",{enumerable:!0,get:function(){return r(i).default}});var o=e("./canvas/CanvasExtract");Object.defineProperty(n,"canvas",{enumerable:!0,get:function(){return r(o).default}})},{"./canvas/CanvasExtract":131,"./webgl/WebGLExtract":133}],133:[function(e,t,n){n.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),i=new r.Rectangle,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,n=void 0,o=void 0,s=void 0,a=!1,l=void 0;e&&(l=e instanceof r.RenderTexture?e:this.renderer.generateTexture(e)),l?(o=(n=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=l.frame,a=!1):(o=(n=this.renderer.rootRenderTarget).resolution,a=!0,(s=i).width=n.size.width,s.height=n.size.height);var u=s.width*o,c=s.height*o,h=new r.CanvasRenderTarget(u,c);if(n){t.bindRenderTarget(n);var d=new Uint8Array(4*u*c),p=t.gl;p.readPixels(s.x*o,s.y*o,u,c,p.RGBA,p.UNSIGNED_BYTE,d);var f=h.context.getImageData(0,0,u,c);f.data.set(d),h.context.putImageData(f,0,0),a&&(h.context.scale(1,-1),h.context.drawImage(h.canvas,0,-c))}return h.canvas},e.prototype.pixels=function(e){var t=this.renderer,n=void 0,o=void 0,s=void 0,a=void 0;e&&(a=e instanceof r.RenderTexture?e:this.renderer.generateTexture(e)),a?(o=(n=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=a.frame):(o=(n=this.renderer.rootRenderTarget).resolution,(s=i).width=n.size.width,s.height=n.size.height);var l=s.width*o,u=s.height*o,c=new Uint8Array(4*l*u);if(n){t.bindRenderTarget(n);var h=t.gl;h.readPixels(s.x*o,s.y*o,l,u,h.RGBA,h.UNSIGNED_BYTE,c)}return c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();n.default=o,r.WebGLRenderer.registerPlugin("extract",o)},{"../../core":65}],134:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),o=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n[0]instanceof i.Texture?n[0]:n[0].texture));return o._textures=null,o._durations=null,o.textures=n,o._autoUpdate=!1!==r,o.animationSpeed=1,o.loop=!0,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o.playing=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&i.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&i.ticker.shared.add(this.update,this,i.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){var t=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t)},t.fromFrames=function(e){for(var n=[],r=0;r<e.length;++r)n.push(i.Texture.fromFrame(e[r]));return new t(n)},t.fromImages=function(e){for(var n=[],r=0;r<e.length;++r)n.push(i.Texture.fromImage(e[r]));return new t(n)},r(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof i.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}]),t}(i.Sprite);n.default=o},{"../core":65}],135:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),s=r(e("../core/math/ObservablePoint")),a=r(e("../core/settings")),l=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},i.font=r.font,i._text=n,i._maxWidth=0,i._maxLineHeight=0,i._anchor=new s.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateText=function(){for(var e=t.fonts[this._font.name],n=this._font.size/e.size,r=new o.Point,i=[],s=[],a=null,l=0,u=0,c=0,h=-1,d=0,p=0,f=0,g=0;g<this.text.length;g++){var m=this.text.charCodeAt(g);if(/(\s)/.test(this.text.charAt(g))&&(h=g,d=l),/(?:\r\n|\r|\n)/.test(this.text.charAt(g)))s.push(l),u=Math.max(u,l),c++,r.x=0,r.y+=e.lineHeight,a=null;else if(-1!==h&&this._maxWidth>0&&r.x*n>this._maxWidth)o.utils.removeItems(i,h-p,g-h),g=h,h=-1,++p,s.push(d),u=Math.max(u,d),c++,r.x=0,r.y+=e.lineHeight,a=null;else{var v=e.chars[m];v&&(a&&v.kerning[a]&&(r.x+=v.kerning[a]),i.push({texture:v.texture,line:c,charCode:m,position:new o.Point(r.x+v.xOffset,r.y+v.yOffset)}),l=r.x+(v.texture.width+v.xOffset),r.x+=v.xAdvance,f=Math.max(f,v.yOffset+v.texture.height),a=m)}}s.push(l),u=Math.max(u,l);for(var y=[],b=0;b<=c;b++){var _=0;"right"===this._font.align?_=u-s[b]:"center"===this._font.align&&(_=(u-s[b])/2),y.push(_)}for(var x=i.length,w=this.tint,T=0;T<x;T++){var E=this._glyphs[T];E?E.texture=i[T].texture:(E=new o.Sprite(i[T].texture),this._glyphs.push(E)),E.position.x=(i[T].position.x+y[i[T].line])*n,E.position.y=i[T].position.y*n,E.scale.x=E.scale.y=n,E.tint=w,E.parent||this.addChild(E)}for(var S=x;S<this._glyphs.length;++S)this.removeChild(this._glyphs[S]);if(this._textWidth=u*n,this._textHeight=(r.y+e.lineHeight)*n,0!==this.anchor.x||0!==this.anchor.y)for(var I=0;I<x;I++)this._glyphs[I].x-=this._textWidth*this.anchor.x,this._glyphs[I].y-=this._textHeight*this.anchor.y;this._maxLineHeight=f*n},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.registerFont=function(e,n){var r={},i=e.getElementsByTagName("info")[0],s=e.getElementsByTagName("common")[0],l=n.baseTexture.resolution||a.default.RESOLUTION;r.font=i.getAttribute("face"),r.size=parseInt(i.getAttribute("size"),10),r.lineHeight=parseInt(s.getAttribute("lineHeight"),10)/l,r.chars={};for(var u=e.getElementsByTagName("char"),c=0;c<u.length;c++){var h=u[c],d=parseInt(h.getAttribute("id"),10),p=new o.Rectangle(parseInt(h.getAttribute("x"),10)/l+n.frame.x/l,parseInt(h.getAttribute("y"),10)/l+n.frame.y/l,parseInt(h.getAttribute("width"),10)/l,parseInt(h.getAttribute("height"),10)/l);r.chars[d]={xOffset:parseInt(h.getAttribute("xoffset"),10)/l,yOffset:parseInt(h.getAttribute("yoffset"),10)/l,xAdvance:parseInt(h.getAttribute("xadvance"),10)/l,kerning:{},texture:new o.Texture(n.baseTexture,p)}}for(var f=e.getElementsByTagName("kerning"),g=0;g<f.length;g++){var m=f[g],v=parseInt(m.getAttribute("first"),10)/l,y=parseInt(m.getAttribute("second"),10)/l,b=parseInt(m.getAttribute("amount"),10)/l;r.chars[y]&&(r.chars[y].kerning[v]=b)}return t.fonts[r.font]=r,r},i(t,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):t.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),t}(o.Container);n.default=l,l.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101}],136:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(e("../core/math/Matrix")),o=new i.default,s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._texture=t,this.mapCoord=new i.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===n?.5:n}return e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],o=e[r+1];t[r]=i*n.a+o*n.c+n.tx,t[r+1]=i*n.b+o*n.d+n.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(o.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(o));var s=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/s.width,a[1]=(t._frame.y+l+u)/s.height,a[2]=(t._frame.x+t._frame.width-l+u)/s.width,a[3]=(t._frame.y+t._frame.height-l+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,!0},r(e,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),e}();n.default=s},{"../core/math/Matrix":67}],137:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),s=r(e("../core/sprites/canvas/CanvasTinter")),a=r(e("./TextureTransform")),l=new o.Point,u=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return s.tileTransform=new o.TransformStatic,s._width=r,s._height=i,s._canvasPattern=null,s.uvTransform=n.transform||new a.default(n),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},t.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var n=e.context,r=this.worldTransform,i=e.resolution,a=t.baseTexture,l=a.resolution,u=this.tilePosition.x/this.tileScale.x%t._frame.width*l,c=this.tilePosition.y/this.tileScale.y%t._frame.height*l;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var h=new o.CanvasRenderTarget(t._frame.width,t._frame.height,l);16777215!==this.tint?(this.tintedTexture=s.default.getTintedTexture(this,this.tint),h.context.drawImage(this.tintedTexture,0,0)):h.context.drawImage(a.source,-t._frame.x*l,-t._frame.y*l),this.cachedTint=this.tint,this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),e.setBlendMode(this.blendMode),n.fillStyle=this._canvasPattern,n.scale(this.tileScale.x/l,this.tileScale.y/l);var d=this.anchor.x*-this._width,p=this.anchor.y*-this._height;this.uvRespectAnchor?(n.translate(u,c),n.fillRect(-u+d,-c+p,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l)):(n.translate(u+d,c+p),n.fillRect(-u,-c,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l))}},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,r)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,l);var t=this._width,n=this._height,r=-t*this.anchor._x;if(l.x>=r&&l.x<r+t){var i=-n*this.anchor._y;if(l.y>=i&&l.y<i+n)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},t.from=function(e,n,r){return new t(o.Texture.from(e),n,r)},t.fromFrame=function(e,n,r){var i=o.utils.TextureCache[e];if(!i)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new t(i,n,r)},t.fromImage=function(e,n,r,i,s){return new t(o.Texture.fromImage(e,i,s),n,r)},i(t,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),t}(o.Sprite);n.default=u},{"../core":65,"../core/sprites/canvas/CanvasTinter":104,"./TextureTransform":136}],138:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),o=r(e("../core/textures/Texture")),s=r(e("../core/textures/BaseTexture")),a=e("../core/utils"),l=i.DisplayObject,u=new i.Matrix;l.prototype._cacheAsBitmap=!1,l.prototype._cacheData=!1;var c=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(l.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t=void 0;e?(this._cacheData||(this._cacheData=new c),(t=this._cacheData).originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),l.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},l.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var n=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;n.pad(r)}var l=e._activeRenderTarget,c=e.filterManager.filterStack,h=i.RenderTexture.create(0|n.width,0|n.height),d="cacheAsBitmap_"+(0,a.uid)();this._cacheData.textureCacheId=d,s.default.addToCache(h.baseTexture,d),o.default.addToCache(h,d);var p=u;p.tx=-n.x,p.ty=-n.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,h,!0,p,!0),e.bindRenderTarget(l),e.filterManager.filterStack=c,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var f=new i.Sprite(h);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-n.x/n.width,f.anchor.y=-n.y/n.height,f.alpha=t,f._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},l.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},l.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),n=this.alpha;this.alpha=1;var r=e.context,l=i.RenderTexture.create(0|t.width,0|t.height),c="cacheAsBitmap_"+(0,a.uid)();this._cacheData.textureCacheId=c,s.default.addToCache(l.baseTexture,c),o.default.addToCache(l,c);var h=u;this.transform.localTransform.copy(h),h.invert(),h.tx-=t.x,h.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,l,!0,h,!1),e.context=r,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var d=new i.Sprite(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-t.x/t.width,d.anchor.y=-t.y/t.height,d._bounds=this._bounds,d.alpha=n,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=d,this.containsPoint=d.containsPoint.bind(d)}},l.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},l.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},l.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,s.default.removeFromCache(this._cacheData.textureCacheId),o.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},l.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":124}],139:[function(e,t,n){var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core"));r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},{"../core":65}],140:[function(e,t,n){var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core"));r.DisplayObject.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},{"../core":65}],141:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.BitmapText=n.TilingSpriteRenderer=n.TilingSprite=n.TextureTransform=n.AnimatedSprite=void 0;var i=e("./AnimatedSprite");Object.defineProperty(n,"AnimatedSprite",{enumerable:!0,get:function(){return r(i).default}});var o=e("./TextureTransform");Object.defineProperty(n,"TextureTransform",{enumerable:!0,get:function(){return r(o).default}});var s=e("./TilingSprite");Object.defineProperty(n,"TilingSprite",{enumerable:!0,get:function(){return r(s).default}});var a=e("./webgl/TilingSpriteRenderer");Object.defineProperty(n,"TilingSpriteRenderer",{enumerable:!0,get:function(){return r(a).default}});var l=e("./BitmapText");Object.defineProperty(n,"BitmapText",{enumerable:!0,get:function(){return r(l).default}}),e("./cacheAsBitmap"),e("./getChildByName"),e("./getGlobalPosition")},{"./AnimatedSprite":134,"./BitmapText":135,"./TextureTransform":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(e,t,n){n.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),i=e("../../core/const"),o=(e("path"),new r.Matrix),s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.shader=null,r.simpleShader=null,r.quad=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new r.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new r.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new r.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(e){var t=this.renderer,n=this.quad;t.bindVao(n.vao);var s=n.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((s=n.uvs)[0]=s[6]=-e.anchor.x,s[1]=s[3]=-e.anchor.y,s[2]=s[4]=1-e.anchor.x,s[5]=s[7]=1-e.anchor.y),n.upload();var a=e._texture,l=a.baseTexture,u=e.tileTransform.localTransform,c=e.uvTransform,h=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;h&&(l._glTextures[t.CONTEXT_UID]?h=l.wrapMode!==i.WRAP_MODES.CLAMP:l.wrapMode===i.WRAP_MODES.CLAMP&&(l.wrapMode=i.WRAP_MODES.REPEAT));var d=h?this.simpleShader:this.shader;t.bindShader(d);var p=a.width,f=a.height,g=e._width,m=e._height;o.set(u.a*p/g,u.b*p/m,u.c*f/g,u.d*f/m,u.tx/g,u.ty/m),o.invert(),h?o.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=o.toArray(!0),d.uniforms.uColor=r.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,d.uniforms.uColor,l.premultipliedAlpha),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=t.bindTexture(a),t.setBlendMode(r.utils.correctBlendMode(e.blendMode,l.premultipliedAlpha)),n.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(r.ObjectRenderer);n.default=s,r.WebGLRenderer.registerPlugin("tilingSprite",s)},{"../../core":65,"../../core/const":46,path:23}],143:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),s=r(e("./BlurXFilter")),a=r(e("./BlurYFilter")),l=function(e){function t(n,r,i,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return u.blurXFilter=new s.default(n,r,i,l),u.blurYFilter=new a.default(n,r,i,l),u.padding=0,u.resolution=i||o.settings.RESOLUTION,u.quality=r||4,u.blur=n||8,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n){var r=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,r,!0),this.blurYFilter.apply(e,r,n,!1),e.returnRenderTarget(r)},i(t,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(e){this.blurYFilter._blendMode=e}}]),t}(o.Filter);n.default=l},{"../../core":65,"./BlurXFilter":144,"./BlurYFilter":145}],144:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),s=r(e("./generateBlurVertSource")),a=r(e("./generateBlurFragSource")),l=r(e("./getMaxBlurKernelSize")),u=function(e){function t(n,r,i,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=l||5;var u=(0,s.default)(l,!0),c=(0,a.default)(l),h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,u,c));return h.resolution=i||o.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n,r){if(this.firstRun){var i=e.renderer.gl,o=(0,l.default)(i);this.vertexSrc=(0,s.default)(o,!0),this.fragmentSrc=(0,a.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/n.size.width*(n.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{for(var u=e.getRenderTarget(!0),c=t,h=u,d=0;d<this.passes-1;d++){e.applyFilter(this,c,h,!0);var p=h;h=c,c=p}e.applyFilter(this,c,n,r),e.returnRenderTarget(u)}},i(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(o.Filter);n.default=u},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],145:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),s=r(e("./generateBlurVertSource")),a=r(e("./generateBlurFragSource")),l=r(e("./getMaxBlurKernelSize")),u=function(e){function t(n,r,i,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l=l||5;var u=(0,s.default)(l,!1),c=(0,a.default)(l),h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,u,c));return h.resolution=i||o.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n,r){if(this.firstRun){var i=e.renderer.gl,o=(0,l.default)(i);this.vertexSrc=(0,s.default)(o,!1),this.fragmentSrc=(0,a.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/n.size.height*(n.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{for(var u=e.getRenderTarget(!0),c=t,h=u,d=0;d<this.passes-1;d++){e.applyFilter(this,c,h,!0);var p=h;h=c,c=p}e.applyFilter(this,c,n,r),e.returnRenderTarget(u)}},i(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(o.Filter);n.default=u},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],146:[function(e,t,n){n.__esModule=!0,n.default=function(e){for(var t=r[e],n=t.length,o=i,s="",a=void 0,l=0;l<e;l++){var u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",l);a=l,l>=n&&(a=e-l-1),s+=u=u.replace("%value%",t[a]),s+="\n"}return o=o.replace("%blur%",s),o=o.replace("%size%",e)};var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},i=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],147:[function(e,t,n){n.__esModule=!0,n.default=function(e,t){var n=Math.ceil(e/2),i=r,o="",s=void 0;s=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var l=s.replace("%index%",a);o+=l=l.replace("%sampleIndex%",a-(n-1)+".0"),o+="\n"}return i=i.replace("%blur%",o),i=i.replace("%size%",e)};var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],148:[function(e,t,n){n.__esModule=!0,n.default=function(e){for(var t=e.getParameter(e.MAX_VARYING_VECTORS),n=15;n>t;)n-=2;return n}},{}],149:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),o=(e("path"),function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return n.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],n.alpha=1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._loadMatrix=function(e){var t=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(t,this.uniforms.m,e),t=this._colorMatrix(t)),this.uniforms.m=t},t.prototype._multiply=function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.greyscale=function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=(0,Math.sqrt)(1/3),o=[n+1/3*(1-n),1/3*(1-n)-i*r,1/3*(1-n)+i*r,0,0,1/3*(1-n)+i*r,n+1/3*(1-n),1/3*(1-n)-i*r,0,0,1/3*(1-n)-i*r,1/3*(1-n)+i*r,n+1/3*(1-n),0,0,0,0,0,1,0];this._loadMatrix(o,t)},t.prototype.contrast=function(e,t){var n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.saturate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=2*e/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,n,r,i){e=e||.2,t=t||.15;var o=((n=n||16770432)>>16&255)/255,s=(n>>8&255)/255,a=(255&n)/255,l=((r=r||3375104)>>16&255)/255,u=(r>>8&255)/255,c=(255&r)/255,h=[.3,.59,.11,0,0,o,s,a,e,0,l,u,c,t,0,o-l,s-u,a-c,0,0];this._loadMatrix(h,i)},t.prototype.night=function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.predator=function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},r(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(i.Filter));n.default=o,o.prototype.grayscale=o.prototype.greyscale},{"../../core":65,path:23}],150:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),o=(e("path"),function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=new i.Matrix;n.renderable=!1;var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=n,s.maskMatrix=o,s.uniforms.mapSampler=n._texture,s.uniforms.filterMatrix=o,s.uniforms.scale={x:1,y:1},null!==r&&void 0!==r||(r=20),s.scale=new i.Point(r,r),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,n){var r=1/n.destinationFrame.width*(n.size.width/t.size.width);this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*r,this.uniforms.scale.y=this.scale.y*r,e.applyFilter(this,t,n)},r(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),t}(i.Filter));n.default=o},{"../../core":65,path:23}],151:[function(e,t,n){n.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),i=(e("path"),function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.Filter));n.default=i},{"../../core":65,path:23}],152:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("./fxaa/FXAAFilter");Object.defineProperty(n,"FXAAFilter",{enumerable:!0,get:function(){return r(i).default}});var o=e("./noise/NoiseFilter");Object.defineProperty(n,"NoiseFilter",{enumerable:!0,get:function(){return r(o).default}});var s=e("./displacement/DisplacementFilter");Object.defineProperty(n,"DisplacementFilter",{enumerable:!0,get:function(){return r(s).default}});var a=e("./blur/BlurFilter");Object.defineProperty(n,"BlurFilter",{enumerable:!0,get:function(){return r(a).default}});var l=e("./blur/BlurXFilter");Object.defineProperty(n,"BlurXFilter",{enumerable:!0,get:function(){return r(l).default}});var u=e("./blur/BlurYFilter");Object.defineProperty(n,"BlurYFilter",{enumerable:!0,get:function(){return r(u).default}});var c=e("./colormatrix/ColorMatrixFilter");Object.defineProperty(n,"ColorMatrixFilter",{enumerable:!0,get:function(){return r(c).default}});var h=e("./void/VoidFilter");Object.defineProperty(n,"VoidFilter",{enumerable:!0,get:function(){return r(h).default}})},{"./blur/BlurFilter":143,"./blur/BlurXFilter":144,"./blur/BlurYFilter":145,"./colormatrix/ColorMatrixFilter":149,"./displacement/DisplacementFilter":150,"./fxaa/FXAAFilter":151,"./noise/NoiseFilter":153,"./void/VoidFilter":154}],153:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),o=(e("path"),function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return i.noise=n,i.seed=r,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),t}(i.Filter));n.default=o},{"../../core":65,path:23}],154:[function(e,t,n){n.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),i=(e("path"),function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return n.glShaderKey="void",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.Filter));n.default=i},{"../../core":65,path:23}],155:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.global=new i.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},e.prototype._copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=e.buttons,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},e.prototype._reset=function(){this.isPrimary=!1},r(e,[{key:"pointerId",get:function(){return this.identifier}}]),e}();n.default=o},{"../core":65}],156:[function(e,t,n){n.__esModule=!0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();n.default=r},{}],157:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),s=r(e("./InteractionData")),a=r(e("./InteractionEvent")),l=r(e("./InteractionTrackingData")),u=r(e("eventemitter3")),c=r(e("./interactiveTarget"));o.utils.mixins.delayMixin(o.DisplayObject.prototype,c.default);var h="MOUSE",d={target:null,data:{global:null}},p=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r=r||{},i.renderer=n,i.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new s.default,i.mouse.identifier=h,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[h]=i.mouse,i.interactionDataPool=[],i.eventData=new a.default,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i._tempPoint=new o.Point,i.resolution=1,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.hitTest=function(e,t){return d.target=null,d.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(d,t,null,!0),d.target},t.prototype.setTargetElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(o.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var n=this.activeInteractionData[t];if(n.originalEvent&&"touch"!==n.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(void 0===t?"undefined":i(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,n){n.stopped||(n.currentTarget=e,n.type=t,e.emit(t,n),e[t]&&e[t](n))},t.prototype.mapPositionToPoint=function(e,t,n){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*i,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},t.prototype.processInteractive=function(e,t,n,r,i){if(!t||!t.visible)return!1;var o=e.data.global,s=!1,a=i=t.interactive||i;if(t.hitArea?a=!1:r&&t._mask&&(t._mask.containsPoint(o)||(r=!1)),t.interactiveChildren&&t.children)for(var l=t.children,u=l.length-1;u>=0;u--){var c=l[u],h=this.processInteractive(e,c,n,r,a);if(h){if(!c.parent)continue;a=!1,h&&(e.target&&(r=!1),s=!0)}}return i&&(r&&!e.target&&(t.hitArea?(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=!0)):t.containsPoint&&t.containsPoint(o)&&(s=!0)),t.interactive&&(s&&!e.target&&(e.target=t),n&&n(e,t,!!s))),s},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=e,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,n){var r=e.data,i=e.data.identifier;if(n)if(t.trackedPointers[i]||(t.trackedPointers[i]=new l.default(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,n){for(var r=this.normalizeToPointerData(e),i=r.length,o=e.target!==this.interactionDOMElement?"outside":"",s=0;s<i;s++){var a=r[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=e,this.processInteractive(u,this.renderer._lastObjectRendered,n,t||!o),this.emit(t?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var c=2===a.button;this.emit(c?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId,l))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var n=e.data,r=e.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",e),"touch"===n.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,n){var r=e.data,i=e.data.identifier,o=t.trackedPointers[i],s="touch"===r.pointerType;if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button,u=l.default.FLAGS,c=a?u.RIGHT_DOWN:u.LEFT_DOWN,h=void 0!==o&&o.flags&c;n?(this.dispatchEvent(t,a?"rightup":"mouseup",e),h&&this.dispatchEvent(t,a?"rightclick":"click",e)):h&&this.dispatchEvent(t,a?"rightupoutside":"mouseupoutside",e),o&&(a?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(t,"pointerup",e),s&&this.dispatchEvent(t,"touchend",e),o&&(this.dispatchEvent(t,"pointertap",e),s&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),s&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[i]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"===t[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=e;var a="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,n){var r=e.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(e,t,n),this.moveWhenInside&&!n||(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},t.prototype.processPointerOverOut=function(e,t,n){var r=e.data,i=e.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=t.trackedPointers[i];n&&!s&&(s=t.trackedPointers[i]=new l.default(i)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(t,"pointerover",e),o&&this.dispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):s.over&&(s.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),s.none&&delete t.trackedPointers[i]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",r)},t.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,n=void 0;return t===h||"mouse"===e.pointerType?n=this.mouse:this.activeInteractionData[t]?n=this.activeInteractionData[t]:((n=this.interactionDataPool.pop()||new s.default).identifier=t,this.activeInteractionData[t]=n),n._copyEvent(e),n},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t._reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,n){return e.data=n,this.mapPositionToPoint(n.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===t.pointerType&&(t.globalX=n.global.x,t.globalY=n.global.y),n.originalEvent=t,e._reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,r=e.changedTouches.length;n<r;n++){var i=e.changedTouches[n];void 0===i.button&&(i.button=e.touches.length?1:0),void 0===i.buttons&&(i.buttons=e.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),i.twist=0,i.tangentialPressure=0,void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent?t.push(e):(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=h),void 0===e.pressure&&(e.pressure=.5),e.twist=0,e.tangentialPressure=0,e.isNormalized=!0,t.push(e));return t},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(u.default);n.default=p,o.WebGLRenderer.registerPlugin("interaction",p),o.CanvasRenderer.registerPlugin("interaction",p)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},r(e,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),e}();n.default=i,i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("./InteractionData");Object.defineProperty(n,"InteractionData",{enumerable:!0,get:function(){return r(i).default}});var o=e("./InteractionManager");Object.defineProperty(n,"InteractionManager",{enumerable:!0,get:function(){return r(o).default}});var s=e("./interactiveTarget");Object.defineProperty(n,"interactiveTarget",{enumerable:!0,get:function(){return r(s).default}});var a=e("./InteractionTrackingData");Object.defineProperty(n,"InteractionTrackingData",{enumerable:!0,get:function(){return r(a).default}});var l=e("./InteractionEvent");Object.defineProperty(n,"InteractionEvent",{enumerable:!0,get:function(){return r(l).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(e,t,n){n.__esModule=!0,n.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(e,t,n){function r(e,t){e.bitmapFont=a.BitmapText.registerFont(e.data,t)}n.__esModule=!0,n.parse=r,n.default=function(){return function(e,t){if(e.data&&e.type===s.Resource.TYPE.XML)if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var n=e.isDataUrl?"":i.dirname(e.url);e.isDataUrl&&("."===n&&(n=""),this.baseUrl&&n&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/")),(n=n.replace(this.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/");var a=n+e.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[a])r(e,o.utils.TextureCache[a]),t();else{var l={crossOrigin:e.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",a,l,function(n){r(e,n.texture),t()})}}else t();else t()}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("path")),o=e("../core"),s=e("resource-loader"),a=e("../extras")},{"../core":65,"../extras":141,path:23,"resource-loader":36}],162:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.shared=n.Resource=n.textureParser=n.getResourcePath=n.spritesheetParser=n.parseBitmapFontData=n.bitmapFontParser=n.Loader=void 0;var i=e("./bitmapFontParser");Object.defineProperty(n,"bitmapFontParser",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(n,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var o=e("./spritesheetParser");Object.defineProperty(n,"spritesheetParser",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(n,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var s=e("./textureParser");Object.defineProperty(n,"textureParser",{enumerable:!0,get:function(){return r(s).default}});var a=e("resource-loader");Object.defineProperty(n,"Resource",{enumerable:!0,get:function(){return a.Resource}});var l=r(e("../core/Application")),u=r(e("./loader"));n.Loader=u.default;var c=new u.default;c.destroy=function(){},n.shared=c;var h=l.default.prototype;h._loader=null,Object.defineProperty(h,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?c:new u.default}return this._loader}}),h._parentDestroy=h.destroy,h.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("resource-loader")),o=e("resource-loader/lib/middlewares/parsing/blob"),s=r(e("eventemitter3")),a=r(e("./textureParser")),l=r(e("./spritesheetParser")),u=r(e("./bitmapFontParser")),c=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));s.default.call(i);for(var o=0;o<t._pixiMiddleware.length;++o)i.use(t._pixiMiddleware[o]());return i.onStart.add(function(e){return i.emit("start",e)}),i.onProgress.add(function(e,t){return i.emit("progress",e,t)}),i.onError.add(function(e,t,n){return i.emit("error",e,t,n)}),i.onLoad.add(function(e,t){return i.emit("load",e,t)}),i.onComplete.add(function(e,t){return i.emit("complete",e,t)}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.addPixiMiddleware=function(e){t._pixiMiddleware.push(e)},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(i.default);n.default=c;for(var h in s.default.prototype)c.prototype[h]=s.default.prototype[h];c._pixiMiddleware=[o.blobMiddlewareFactory,a.default,l.default,u.default];var d=i.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(e,t,n){function r(e,t){return e.isDataUrl?e.data.meta.image:o.default.resolve(e.url.replace(t,""),e.data.meta.image)}n.__esModule=!0,n.default=function(){return function(e,t){var n=e.name+"_image";if(e.data&&e.type===i.Resource.TYPE.JSON&&e.data.frames&&!this.resources[n]){var o={crossOrigin:e.crossOrigin,loadType:i.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e},a=r(e,this.baseUrl);this.add(n,a,o,function(n){var r=new s.Spritesheet(n.texture.baseTexture,e.data,e.url);r.parse(function(){e.spritesheet=r,e.textures=r.textures,t()})})}else t()}},n.getResourcePath=r;var i=e("resource-loader"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("url")),s=e("../core")},{"../core":65,"resource-loader":36,url:29}],165:[function(e,t,n){n.__esModule=!0,n.default=function(){return function(e,t){e.data&&e.type===r.Resource.TYPE.IMAGE&&(e.texture=i.default.fromLoader(e.data,e.url,e.name)),t()}};var r=e("resource-loader"),i=function(e){return e&&e.__esModule?e:{default:e}}(e("../core/textures/Texture"))},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),o=function(e){return e&&e.__esModule?e:{default:e}}(e("../extras/TextureTransform")),s=new i.Point,a=new i.Polygon,l=function(e){function t(n,r,s,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return u._texture=n,u.uvs=s||new Float32Array([0,0,1,0,1,1,0,1]),u.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),u.indices=a||new Uint16Array([0,1,3,2]),u.dirty=0,u.indexDirty=0,u.blendMode=i.BLEND_MODES.NORMAL,u.canvasPadding=0,u.drawMode=l||t.DRAW_MODES.TRIANGLE_MESH,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new o.default(n),u.uploadUvTransform=!1,u.pluginName="mesh",u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,s);for(var n=this.vertices,r=a.points,i=this.indices,o=this.indices.length,l=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,u=0;u+2<o;u+=l){var c=2*i[u],h=2*i[u+1],d=2*i[u+2];if(r[0]=n[c],r[1]=n[c+1],r[2]=n[h],r[3]=n[h+1],r[4]=n[d],r[5]=n[d+1],a.contains(s.x,s.y))return!0}return!1},r(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return i.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=i.utils.hex2rgb(e,this.tintRgb)}}]),t}(i.Container);n.default=l,l.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../extras/TextureTransform":136}],167:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=10,o=function(e){function t(n,r,o,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,4,4));return l._origWidth=n.orig.width,l._origHeight=n.orig.height,l._width=l._origWidth,l._height=l._origHeight,l.leftWidth=void 0!==r?r:i,l.rightWidth=void 0!==s?s:i,l.topHeight=void 0!==o?o:i,l.bottomHeight=void 0!==a?a:i,l.refresh(!0),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateHorizontalVertices=function(){var e=this.vertices;e[9]=e[11]=e[13]=e[15]=this._topHeight,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices;e[2]=e[10]=e[18]=e[26]=this._leftWidth,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha;var n=this.worldTransform,r=e.resolution;e.roundPixels?t.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):t.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r);var i=this._texture.baseTexture,o=i.source,s=i.width,a=i.height;this.drawSegment(t,o,s,a,0,1,10,11),this.drawSegment(t,o,s,a,2,3,12,13),this.drawSegment(t,o,s,a,4,5,14,15),this.drawSegment(t,o,s,a,8,9,18,19),this.drawSegment(t,o,s,a,10,11,20,21),this.drawSegment(t,o,s,a,12,13,22,23),this.drawSegment(t,o,s,a,16,17,26,27),this.drawSegment(t,o,s,a,18,19,28,29),this.drawSegment(t,o,s,a,20,21,30,31)},t.prototype.drawSegment=function(e,t,n,r,i,o,s,a){var l=this.uvs,u=this.vertices,c=(l[s]-l[i])*n,h=(l[a]-l[o])*r,d=u[s]-u[i],p=u[a]-u[o];c<1&&(c=1),h<1&&(h=1),d<1&&(d=1),p<1&&(p=1),e.drawImage(t,l[i]*n,l[o]*r,c,h,u[i],u[o],d,p)},t.prototype._refresh=function(){e.prototype._refresh.call(this);var t=this.uvs,n=this._texture;this._origWidth=n.orig.width,this._origHeight=n.orig.height;var r=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},r(t,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./Plane")).default);n.default=o},{"./Plane":168}],168:[function(e,t,n){n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("./Mesh")),i=function(e){function t(n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return s._ready=!0,s.verticesX=i||10,s.verticesY=o||10,s.drawMode=r.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,n=[],r=[],i=[],o=this.verticesX-1,s=this.verticesY-1,a=e.width/o,l=e.height/s,u=0;u<t;u++){var c=u%this.verticesX,h=u/this.verticesX|0;n.push(c*a,h*l),r.push(c/o,h/s)}for(var d=o*s,p=0;p<d;p++){var f=p%o,g=p/o|0,m=g*this.verticesX+f,v=g*this.verticesX+f+1,y=(g+1)*this.verticesX+f,b=(g+1)*this.verticesX+f+1;i.push(m,v,y),i.push(v,b,y)}this.vertices=new Float32Array(n),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(i),this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){r.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(r.default);n.default=i},{"./Mesh":166}],169:[function(e,t,n){n.__esModule=!0;var r=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.points=r,i.vertices=new Float32Array(4*r.length),i.uvs=new Float32Array(4*r.length),i.colors=new Float32Array(2*r.length),i.indices=new Uint16Array(2*r.length),i.autoUpdate=!0,i.refresh(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,n=this.indices,r=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,r[0]=1,r[1]=1,n[0]=0,n[1]=1;for(var i=e.length,o=1;o<i;o++){var s=4*o,a=o/(i-1);t[s]=a,t[s+1]=0,t[s+2]=a,t[s+3]=1,r[s=2*o]=1,r[s+1]=1,n[s=2*o]=s,n[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],n=void 0,r=0,i=0,o=this.vertices,s=e.length,a=0;a<s;a++){var l=e[a],u=4*a;i=-((n=a<e.length-1?e[a+1]:l).x-t.x),r=n.y-t.y;var c=10*(1-a/(s-1));c>1&&(c=1);var h=Math.sqrt(r*r+i*i),d=this._texture.height/2;r/=h,i/=h,r*=d,i*=d,o[u]=l.x+r,o[u+1]=l.y+i,o[u+2]=l.x-r,o[u+3]=l.y-i,t=l}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(function(e){return e&&e.__esModule?e:{default:e}}(e("./Mesh")).default);n.default=r},{"./Mesh":166}],170:[function(e,t,n){n.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),i=function(e){return e&&e.__esModule?e:{default:e}}(e("../Mesh")),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,n=t.context,r=e.worldTransform,o=t.resolution;t.roundPixels?n.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o|0,r.ty*o|0):n.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.setBlendMode(e.blendMode),e.drawMode===i.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,n=0;n<t-2;n++){var r=2*n;this._renderDrawTriangle(e,r,r+2,r+4)}},e.prototype._renderTriangles=function(e){for(var t=e.indices,n=t.length,r=0;r<n;r+=3){var i=2*t[r],o=2*t[r+1],s=2*t[r+2];this._renderDrawTriangle(e,i,o,s)}},e.prototype._renderDrawTriangle=function(e,t,n,r){var i=this.renderer.context,o=e.uvs,s=e.vertices,a=e._texture;if(a.valid){var l=a.baseTexture,u=l.source,c=l.width,h=l.height,d=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0;if(e.uploadUvTransform){var y=e._uvTransform.mapCoord;d=(o[t]*y.a+o[t+1]*y.c+y.tx)*l.width,p=(o[n]*y.a+o[n+1]*y.c+y.tx)*l.width,f=(o[r]*y.a+o[r+1]*y.c+y.tx)*l.width,g=(o[t]*y.b+o[t+1]*y.d+y.ty)*l.height,m=(o[n]*y.b+o[n+1]*y.d+y.ty)*l.height,v=(o[r]*y.b+o[r+1]*y.d+y.ty)*l.height}else d=o[t]*l.width,p=o[n]*l.width,f=o[r]*l.width,g=o[t+1]*l.height,m=o[n+1]*l.height,v=o[r+1]*l.height;var b=s[t],_=s[n],x=s[r],w=s[t+1],T=s[n+1],E=s[r+1];if(e.canvasPadding>0){var S=e.canvasPadding/e.worldTransform.a,I=e.canvasPadding/e.worldTransform.d,P=(b+_+x)/3,M=(w+T+E)/3,A=b-P,O=w-M,C=Math.sqrt(A*A+O*O);b=P+A/C*(C+S),w=M+O/C*(C+I),O=T-M,_=P+(A=_-P)/(C=Math.sqrt(A*A+O*O))*(C+S),T=M+O/C*(C+I),O=E-M,x=P+(A=x-P)/(C=Math.sqrt(A*A+O*O))*(C+S),E=M+O/C*(C+I)}i.save(),i.beginPath(),i.moveTo(b,w),i.lineTo(_,T),i.lineTo(x,E),i.closePath(),i.clip();var R=d*m+g*f+p*v-m*f-g*p-d*v,D=b*m+g*x+_*v-m*x-g*_-b*v,k=d*_+b*f+p*x-_*f-b*p-d*x,L=d*m*x+g*_*f+b*p*v-b*m*f-g*p*x-d*_*v,N=w*m+g*E+T*v-m*E-g*T-w*v,U=d*T+w*f+p*E-T*f-w*p-d*E,F=d*m*E+g*T*f+w*p*v-w*m*f-g*p*E-d*T*v;i.transform(D/R,N/R,k/R,U/R,L/R,F/R),i.drawImage(u,0,0,c*l.resolution,h*l.resolution,0,0,c,h),i.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(e){var t=this.renderer.context,n=e.vertices,r=n.length/2;t.beginPath();for(var i=1;i<r-2;++i){var o=2*i,s=n[o],a=n[o+1],l=n[o+2],u=n[o+3],c=n[o+4],h=n[o+5];t.moveTo(s,a),t.lineTo(l,u),t.lineTo(c,h)}t.fillStyle="#FF0000",t.fill(),t.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();n.default=o,r.CanvasRenderer.registerPlugin("mesh",o)},{"../../core":65,"../Mesh":166}],171:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("./Mesh");Object.defineProperty(n,"Mesh",{enumerable:!0,get:function(){return r(i).default}});var o=e("./webgl/MeshRenderer");Object.defineProperty(n,"MeshRenderer",{enumerable:!0,get:function(){return r(o).default}});var s=e("./canvas/CanvasMeshRenderer");Object.defineProperty(n,"CanvasMeshRenderer",{enumerable:!0,get:function(){return r(s).default}});var a=e("./Plane");Object.defineProperty(n,"Plane",{enumerable:!0,get:function(){return r(a).default}});var l=e("./NineSlicePlane");Object.defineProperty(n,"NineSlicePlane",{enumerable:!0,get:function(){return r(l).default}});var u=e("./Rope");Object.defineProperty(n,"Rope",{enumerable:!0,get:function(){return r(u).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),o=r(e("pixi-gl-core")),s=r(e("../Mesh")),a=(e("path"),i.Matrix.IDENTITY),l=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.shader=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new i.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},t.prototype.render=function(e){var t=this.renderer,n=t.gl,r=e._texture;if(r.valid){var l=e._glDatas[t.CONTEXT_UID];l||(t.bindVao(null),(l={shader:this.shader,vertexBuffer:o.default.GLBuffer.createVertexBuffer(n,e.vertices,n.STREAM_DRAW),uvBuffer:o.default.GLBuffer.createVertexBuffer(n,e.uvs,n.STREAM_DRAW),indexBuffer:o.default.GLBuffer.createIndexBuffer(n,e.indices,n.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty}).vao=new o.default.VertexArrayObject(n).addIndex(l.indexBuffer).addAttribute(l.vertexBuffer,l.shader.attributes.aVertexPosition,n.FLOAT,!1,8,0).addAttribute(l.uvBuffer,l.shader.attributes.aTextureCoord,n.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=l),t.bindVao(l.vao),e.dirty!==l.dirty&&(l.dirty=e.dirty,l.uvBuffer.upload(e.uvs)),e.indexDirty!==l.indexDirty&&(l.indexDirty=e.indexDirty,l.indexBuffer.upload(e.indices)),l.vertexBuffer.upload(e.vertices),t.bindShader(l.shader),l.shader.uniforms.uSampler=t.bindTexture(r),t.state.setBlendMode(i.utils.correctBlendMode(e.blendMode,r.baseTexture.premultipliedAlpha)),l.shader.uniforms.uTransform&&(e.uploadUvTransform?l.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):l.shader.uniforms.uTransform=a.toArray(!0)),l.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),l.shader.uniforms.uColor=i.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,l.shader.uniforms.uColor,r.baseTexture.premultipliedAlpha);var u=e.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?n.TRIANGLE_STRIP:n.TRIANGLES;l.vao.draw(u,e.indices.length,0)}},t}(i.ObjectRenderer);n.default=l,i.WebGLRenderer.registerPlugin("mesh",l)},{"../../core":65,"../Mesh":166,path:23,"pixi-gl-core":12}],173:[function(e,t,n){n.__esModule=!0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),o=e("../core/utils"),s=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return o>16384&&(o=16384),o>n&&(o=n),a._properties=[!1,!0,!1,!1,!1],a._maxSize=n,a._batchSize=o,a._glBuffers={},a._bufferToUpdate=0,a.interactiveChildren=!1,a.blendMode=i.BLEND_MODES.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e||"tint"in e?!!e.alpha||!!e.tint:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,n=this.worldTransform,r=!0,i=0,o=0,s=0,a=0;e.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var u=this.children[l];if(u.visible){var c=u._texture.frame;if(t.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)r&&(t.setTransform(n.a,n.b,n.c,n.d,n.tx*e.resolution,n.ty*e.resolution),r=!1),i=u.anchor.x*(-c.width*u.scale.x)+u.position.x+.5,o=u.anchor.y*(-c.height*u.scale.y)+u.position.y+.5,s=c.width*u.scale.x,a=c.height*u.scale.y;else{r||(r=!0),u.displayObjectUpdateTransform();var h=u.worldTransform;e.roundPixels?t.setTransform(h.a,h.b,h.c,h.d,h.tx*e.resolution|0,h.ty*e.resolution|0):t.setTransform(h.a,h.b,h.c,h.d,h.tx*e.resolution,h.ty*e.resolution),i=u.anchor.x*-c.width+.5,o=u.anchor.y*-c.height+.5,s=c.width,a=c.height}var d=u._texture.baseTexture.resolution;t.drawImage(u._texture.baseTexture.source,c.x*d,c.y*d,c.width*d,c.height*d,i*e.resolution,o*e.resolution,s*e.resolution,a*e.resolution)}}}},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var n=0;n<this._buffers.length;++n)this._buffers[n].destroy();this._properties=null,this._buffers=null},r(t,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,o.hex2rgb)(e,this.tintRgb)}}]),t}(i.Container);n.default=s},{"../core":65,"../core/utils":124}],174:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("./ParticleContainer");Object.defineProperty(n,"ParticleContainer",{enumerable:!0,get:function(){return r(i).default}});var o=e("./webgl/ParticleRenderer");Object.defineProperty(n,"ParticleRenderer",{enumerable:!0,get:function(){return r(o).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=r(e("pixi-gl-core")),o=r(e("../../core/utils/createIndicesForQuads")),s=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<n.length;++o){var s=n[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},r[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,o.default)(this.size),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var r=this.dynamicProperties[n];r.offset=t,t+=r.size,this.dynamicStride+=r.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=i.default.GLBuffer.createVertexBuffer(e,s,e.STREAM_DRAW);var a=0;this.staticStride=0;for(var l=0;l<this.staticProperties.length;++l){var u=this.staticProperties[l];u.offset=a,a+=u.size,this.staticStride+=u.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=i.default.GLBuffer.createVertexBuffer(e,c,e.STATIC_DRAW),this.vao=new i.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var d=this.dynamicProperties[h];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,e.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,e.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var p=0;p<this.staticProperties.length;++p){var f=this.staticProperties[p];f.unsignedByte?this.vao.addAttribute(this.staticBuffer,f.attribute,e.UNSIGNED_BYTE,!0,4*this.staticStride,4*f.offset):this.vao.addAttribute(this.staticBuffer,f.attribute,e.FLOAT,!1,4*this.staticStride,4*f.offset)}},e.prototype.uploadDynamic=function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},e.prototype.uploadStatic=function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(e,t,n,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},e.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},e}();n.default=s},{"../../core/utils/createIndicesForQuads":122,"pixi-gl-core":12}],176:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),o=r(e("./ParticleShader")),s=r(e("./ParticleBuffer")),a=e("../../core/utils"),l=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new i.Matrix,r.CONTEXT_UID=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new o.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(e){var t=e.children,n=e._maxSize,r=e._batchSize,o=this.renderer,s=t.length;if(0!==s){s>n&&(s=n);var a=e._glBuffers[o.CONTEXT_UID];a||(a=e._glBuffers[o.CONTEXT_UID]=this.generateBuffers(e));var l=t[0]._texture.baseTexture;this.renderer.setBlendMode(i.utils.correctBlendMode(e.blendMode,l.premultipliedAlpha));var u=o.gl,c=e.worldTransform.copy(this.tempMatrix);c.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=c.toArray(!0),this.shader.uniforms.uColor=i.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,l.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(l);for(var h=0,d=0;h<s;h+=r,d+=1){var p=s-h;if(p>r&&(p=r),d>=a.length){if(!e.autoResize)break;a.push(this._generateOneMoreBuffer(e))}var f=a[d];f.uploadDynamic(t,h,p),e._bufferToUpdate===d&&(f.uploadStatic(t,h,p),e._bufferToUpdate=d+1),o.bindVao(f.vao),f.vao.draw(u.TRIANGLES,6*p)}}},t.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,n=[],r=e._maxSize,i=e._batchSize,o=e._properties,a=0;a<r;a+=i)n.push(new s.default(t,this.properties,o,i));return n},t.prototype._generateOneMoreBuffer=function(e){var t=this.renderer.gl,n=e._batchSize,r=e._properties;return new s.default(t,this.properties,r,n)},t.prototype.uploadVertices=function(e,t,n,r,i,o){for(var s=0,a=0,l=0,u=0,c=0;c<n;++c){var h=e[t+c],d=h._texture,p=h.scale.x,f=h.scale.y,g=d.trim,m=d.orig;g?(s=(a=g.x-h.anchor.x*m.width)+g.width,l=(u=g.y-h.anchor.y*m.height)+g.height):(s=m.width*(1-h.anchor.x),a=m.width*-h.anchor.x,l=m.height*(1-h.anchor.y),u=m.height*-h.anchor.y),r[o]=a*p,r[o+1]=u*f,r[o+i]=s*p,r[o+i+1]=u*f,r[o+2*i]=s*p,r[o+2*i+1]=l*f,r[o+3*i]=a*p,r[o+3*i+1]=l*f,o+=4*i}},t.prototype.uploadPosition=function(e,t,n,r,i,o){for(var s=0;s<n;s++){var a=e[t+s].position;r[o]=a.x,r[o+1]=a.y,r[o+i]=a.x,r[o+i+1]=a.y,r[o+2*i]=a.x,r[o+2*i+1]=a.y,r[o+3*i]=a.x,r[o+3*i+1]=a.y,o+=4*i}},t.prototype.uploadRotation=function(e,t,n,r,i,o){for(var s=0;s<n;s++){var a=e[t+s].rotation;r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}},t.prototype.uploadUvs=function(e,t,n,r,i,o){for(var s=0;s<n;++s){var a=e[t+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+i]=a.x1,r[o+i+1]=a.y1,r[o+2*i]=a.x2,r[o+2*i+1]=a.y2,r[o+3*i]=a.x3,r[o+3*i+1]=a.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},t.prototype.uploadTint=function(e,t,n,r,i,o){for(var s=0;s<n;++s){var l=e[t+s],u=l._texture.baseTexture.premultipliedAlpha,c=l.alpha,h=c<1&&u?(0,a.premultiplyTint)(l._tintRGB,c):l._tintRGB+(255*c<<24);r[o]=h,r[o+i]=h,r[o+2*i]=h,r[o+3*i]=h,o+=4*i}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(i.ObjectRenderer);n.default=l,i.WebGLRenderer.registerPlugin("particle",l)},{"../../core":65,"../../core/utils":124,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(e,t,n){n.__esModule=!0;var r=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../../core/Shader")).default);n.default=r},{"../../core/Shader":44}],178:[function(e,t,n){Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1})},{}],179:[function(e,t,n){var r=function(e){return e&&e.__esModule?e:{default:e}}(e("object-assign"));Object.assign||(Object.assign=r.default)},{"object-assign":5}],180:[function(e,t,n){e("./Object.assign"),e("./requestAnimationFrame"),e("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(e,t,n){(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!e.requestAnimationFrame;++i){var o=r[i];e.requestAnimationFrame=e[o+"RequestAnimationFrame"],e.cancelAnimationFrame=e[o+"CancelAnimationFrame"]||e[o+"CancelRequestAnimationFrame"]}e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),r=16+n-t;return r<0&&(r=0),n=t,setTimeout(function(){n=Date.now(),e(performance.now())},r)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],182:[function(e,t,n){function r(e,t){var n=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof c.Texture){var i=e._textures[r].baseTexture;-1===t.indexOf(i)&&(t.push(i),n=!0)}return n}function i(e,t){return e instanceof c.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function o(e,t){if(e._texture&&e._texture instanceof c.Texture){var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function s(e,t){return t instanceof c.Text&&(t.updateText(!0),!0)}function a(e,t){if(t instanceof c.TextStyle){var n=t.toFontString();return c.TextMetrics.measureFont(n),!0}return!1}function l(e,t){if(e instanceof c.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function u(e,t){return e instanceof c.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}n.__esModule=!0;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../core")),h=function(e){return e&&e.__esModule?e:{default:e}}(e("./limiters/CountLimiter")),d=c.ticker.shared;c.settings.UPLOADS_PER_FRAME=4;var p=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limiter=new h.default(c.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(l),this.registerFindHook(u),this.registerFindHook(r),this.registerFindHook(i),this.registerFindHook(o),this.registerUploadHook(s),this.registerUploadHook(a)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,d.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)d.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,s=i.length;o<s;o++)i[o]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof c.Container)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},e.prototype.destroy=function(){this.ticking&&d.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();n.default=p},{"../core":65,"./limiters/CountLimiter":185}],183:[function(e,t,n){function r(e,t){if(t instanceof i.BaseTexture){var n=t.source,r=0===n.width?e.canvas.width:Math.min(e.canvas.width,n.width),o=0===n.height?e.canvas.height:Math.min(e.canvas.height,n.height);return e.ctx.drawImage(n,0,0,r,o,0,0,e.canvas.width,e.canvas.height),!0}return!1}n.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),o=16,s=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return i.uploadHookHelper=i,i.canvas=document.createElement("canvas"),i.canvas.width=o,i.canvas.height=o,i.ctx=i.canvas.getContext("2d"),i.registerUploadHook(r),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../BasePrepare")).default);n.default=s,i.CanvasRenderer.registerPlugin("prepare",s)},{"../../core":65,"../BasePrepare":182}],184:[function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("./webgl/WebGLPrepare");Object.defineProperty(n,"webgl",{enumerable:!0,get:function(){return r(i).default}});var o=e("./canvas/CanvasPrepare");Object.defineProperty(n,"canvas",{enumerable:!0,get:function(){return r(o).default}});var s=e("./BasePrepare");Object.defineProperty(n,"BasePrepare",{enumerable:!0,get:function(){return r(s).default}});var a=e("./limiters/CountLimiter");Object.defineProperty(n,"CountLimiter",{enumerable:!0,get:function(){return r(a).default}});var l=e("./limiters/TimeLimiter");Object.defineProperty(n,"TimeLimiter",{enumerable:!0,get:function(){return r(l).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(e,t,n){n.__esModule=!0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();n.default=r},{}],186:[function(e,t,n){n.__esModule=!0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();n.default=r},{}],187:[function(e,t,n){function r(e,t){return t instanceof s.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function i(e,t){return t instanceof s.Graphics&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function o(e,t){return e instanceof s.Graphics&&(t.push(e),!0)}n.__esModule=!0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../core")),a=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return s.uploadHookHelper=s.renderer,s.registerFindHook(o),s.registerUploadHook(r),s.registerUploadHook(i),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(function(e){return e&&e.__esModule?e:{default:e}}(e("../BasePrepare")).default);n.default=a,s.WebGLRenderer.registerPlugin("prepare",a)},{"../../core":65,"../BasePrepare":182}],188:[function(e,t,n){(function(t){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.__esModule=!0,n.loader=n.prepare=n.particles=n.mesh=n.loaders=n.interaction=n.filters=n.extras=n.extract=n.accessibility=void 0;var i=e("./polyfill");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./core");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var s=function(e){return e&&e.__esModule?e:{default:e}}(e("./deprecation")),a=r(e("./accessibility")),l=r(e("./extract")),u=r(e("./extras")),c=r(e("./filters")),h=r(e("./interaction")),d=r(e("./loaders")),p=r(e("./mesh")),f=r(e("./particles")),g=r(e("./prepare"));o.utils.mixins.performMixins();var m=d.shared||null;n.accessibility=a,n.extract=l,n.extras=u,n.filters=c,n.interaction=h,n.loaders=d,n.mesh=p,n.particles=f,n.prepare=g,n.loader=m,"function"==typeof s.default&&(0,s.default)(n),t.PIXI=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":130,"./extract":132,"./extras":141,"./filters":152,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)}),function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var n=this||t;if(e=parseFloat(e),n.ctx||u(),void 0!==e&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&(n.masterGain.gain.value=e);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var i=n._howls[r]._getSoundIds(),o=0;o<i.length;o++){var s=n._howls[r]._soundById(i[o]);s&&s._node&&(s._node.volume=s._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||u(),n._muted=e,n.usingWebAudio&&(n.masterGain.gain.value=e?0:n._volume);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var i=n._howls[r]._getSoundIds(),o=0;o<i.length;o++){var s=n._howls[r]._soundById(i[o]);s&&s._node&&(s._node.muted=!!e||s._muted)}return n},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,u()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx?e.ctx.state||"running":"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!n||"function"!=typeof n.canPlayType)return e;var r=n.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),o=i&&parseInt(i[0].split("/")[1],10)<33;return e._codecs={mp3:!(o||!r&&!n.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!n.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||t,n=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),r=!!("ontouchend"in window||e._navigator&&e._navigator.maxTouchPoints>0||e._navigator&&e._navigator.msMaxTouchPoints>0);if(!e._mobileEnabled&&e.ctx&&(n||r)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var i=function(){t._autoResume();var n=e.ctx.createBufferSource();n.buffer=e._scratchBuffer,n.connect(e.ctx.destination),void 0===n.start?n.noteOn(0):n.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),n.onended=function(){n.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",i,!0)}};return document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",i,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio)for(var r=0;r<e._howls[n]._sounds.length;r++)if(!e._howls[n]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,n=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};n.prototype={init:function(e){var n=this;return t.ctx||u(),n._autoplay=e.autoplay||!1,n._format="string"!=typeof e.format?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"!=typeof e.preload||e.preload,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._xhrWithCredentials=e.xhrWithCredentials||!1,n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,void 0!==t.ctx&&t.ctx&&t.mobileAutoEnable&&t._enableMobileAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n.load(),n},load:function(){var e=null;if(t.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var n=0;n<this._src.length;n++){var i,s;if(this._format&&this._format[n])i=this._format[n];else{if("string"!=typeof(s=this._src[n])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(s))||(i=/\.([^.]+)$/.exec(s.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&t.codecs(i)){e=this._src[n];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new r(this),this._webAudio&&o(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,n){var r=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if(void 0===e){e="__default";for(var o=0,s=0;s<r._sounds.length;s++)r._sounds[s]._paused&&!r._sounds[s]._ended&&(o++,i=r._sounds[s]._id);1===o?e=null:i=null}}var a=i?r._soundById(i):r._inactiveSound();if(!a)return null;if(i&&!e&&(e=a._sprite||"__default"),"loaded"!==r._state){a._sprite=e,a._ended=!1;var l=a._id;return r._queue.push({event:"play",action:function(){r.play(l)}}),l}if(i&&!a._paused)return n||setTimeout(function(){r._emit("play",a._id)},0),a._id;r._webAudio&&t._autoResume();var u=Math.max(0,a._seek>0?a._seek:r._sprite[e][0]/1e3),c=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-u),h=1e3*c/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=e,a._seek=u,a._start=r._sprite[e][0]/1e3,a._stop=(r._sprite[e][0]+r._sprite[e][1])/1e3,a._loop=!(!a._loop&&!r._sprite[e][2]);var d=a._node;if(r._webAudio){var p=function(){r._refreshBuffer(a);var e=a._muted||r._muted?0:a._volume;d.gain.setValueAtTime(e,t.ctx.currentTime),a._playStart=t.ctx.currentTime,void 0===d.bufferSource.start?a._loop?d.bufferSource.noteGrainOn(0,u,86400):d.bufferSource.noteGrainOn(0,u,c):a._loop?d.bufferSource.start(0,u,86400):d.bufferSource.start(0,u,c),h!==1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),h)),n||setTimeout(function(){r._emit("play",a._id)},0)};"running"===t.state?p():(r.once("resume",p),r._clearTimer(a._id))}else{var f=function(){d.currentTime=u,d.muted=a._muted||r._muted||t._muted||d.muted,d.volume=a._volume*t.volume(),d.playbackRate=a._rate;try{if(d.play(),d.paused)return void r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");h!==1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),h)),n||r._emit("play",a._id)}catch(e){r._emit("playerror",a._id,e)}},g=window&&window.ejecta||!d.readyState&&t._navigator.isCocoonJS;if(4===d.readyState||g)f();else{var m=function(){f(),d.removeEventListener(t._canPlayEvent,m,!1)};d.addEventListener(t._canPlayEvent,m,!1),r._clearTimer(a._id)}}return a._id},pause:function(e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),o._panner&&(o._panner.disconnect(),o._panner=null),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),t||n._emit("stop",o._id))}return n},mute:function(e,n){var r=this;if("loaded"!==r._state)return r._queue.push({event:"mute",action:function(){r.mute(e,n)}}),r;if(void 0===n){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var i=r._getSoundIds(n),o=0;o<i.length;o++){var s=r._soundById(i[o]);s&&(s._muted=e,r._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume,t.ctx.currentTime):s._node&&(s._node.muted=!!t._muted||e),r._emit("mute",s._id))}return r},volume:function(){var e,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){r._getSoundIds().indexOf(i[0])>=0?n=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),n=parseInt(i[1],10));var o;if(!(void 0!==e&&e>=0&&e<=1))return(o=n?r._soundById(n):r._sounds[0])?o._volume:0;if("loaded"!==r._state)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===n&&(r._volume=e),n=r._getSoundIds(n);for(var s=0;s<n.length;s++)(o=r._soundById(n[s]))&&(o._volume=e,i[2]||r._stopFade(n[s]),r._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(e,t.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=e*t.volume()),r._emit("volume",o._id));return r},fade:function(e,n,r,i,o){var s=this;if("loaded"!==s._state)return s._queue.push({event:"fade",action:function(){s.fade(e,n,r,i)}}),s;null==o&&s.volume(e,i);for(var a=s._getSoundIds(i),l=0;l<a.length;l++){var u=s._soundById(a[l]);if(u&&(i||s._stopFade(a[l]),s._webAudio&&!u._muted)){var c=t.ctx.currentTime,h=c+r/1e3;u._volume=e,null==o&&u._node.gain.setValueAtTime(e,c),u._node.gain.linearRampToValueAtTime(n,h)}}return s},_startFadeInterval:function(e,t,n,r,i){var o=this,s=t,a=t>n?"out":"in",l=Math.abs(t-n)/.01,u=l>0?r/l:r;u<4&&(l=Math.ceil(l/(4/u)),u=4),e._interval=setInterval(function(){l>0&&(s+="in"===a?.01:-.01),s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,o._webAudio?(void 0===i&&(o._volume=s),e._volume=s):o.volume(s,e._id,!0),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,o.volume(n,e._id),o._emit("fade",e._id))},u)},_stopFade:function(e){var n=this._soundById(e);return n&&n._interval&&(this._webAudio&&n._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(n._interval),n._interval=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=arguments;if(0===r.length)return this._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=this._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],this._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=this._getSoundIds(t),o=0;o<i.length;o++)(n=this._soundById(i[o]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return this},rate:function(){var e,n,r=this,i=arguments;if(0===i.length)n=r._sounds[0]._id;else if(1===i.length){r._getSoundIds().indexOf(i[0])>=0?n=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),n=parseInt(i[1],10));var o;if("number"!=typeof e)return(o=r._soundById(n))?o._rate:r._rate;if("loaded"!==r._state)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===n&&(r._rate=e),n=r._getSoundIds(n);for(var s=0;s<n.length;s++)if(o=r._soundById(n[s])){o._rateSeek=r.seek(n[s]),o._playStart=r._webAudio?t.ctx.currentTime:o._playStart,o._rate=e,r._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.value=e:o._node&&(o._node.playbackRate=e);var a=r.seek(n[s]),l=1e3*((r._sprite[o._sprite][0]+r._sprite[o._sprite][1])/1e3-a)/Math.abs(o._rate);!r._endTimers[n[s]]&&o._paused||(r._clearTimer(n[s]),r._endTimers[n[s]]=setTimeout(r._ended.bind(r,o),l)),r._emit("rate",o._id)}return r},seek:function(){var e,n,r=this,i=arguments;if(0===i.length)n=r._sounds[0]._id;else if(1===i.length){r._getSoundIds().indexOf(i[0])>=0?n=parseInt(i[0],10):r._sounds.length&&(n=r._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),n=parseInt(i[1],10));if(void 0===n)return r;if("loaded"!==r._state)return r._queue.push({event:"seek",action:function(){r.seek.apply(r,i)}}),r;var o=r._soundById(n);if(o){if(!("number"==typeof e&&e>=0)){if(r._webAudio){var s=r.playing(n)?t.ctx.currentTime-o._playStart:0,a=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(a+s*Math.abs(o._rate))}return o._node.currentTime}var l=r.playing(n);l&&r.pause(n,!0),o._seek=e,o._ended=!1,r._clearTimer(n),l&&r.play(n,!0),!r._webAudio&&o._node&&(o._node.currentTime=e),r._emit("seek",n)}return r},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,r=0;r<n.length;r++){if(n[r]._paused||e.stop(n[r]._id),!e._webAudio){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(n[r]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),n[r]._node.removeEventListener("error",n[r]._errorFn,!1),n[r]._node.removeEventListener(t._canPlayEvent,n[r]._loadFn,!1)}delete n[r]._node,e._clearTimer(n[r]._id);var o=t._howls.indexOf(e);o>=0&&t._howls.splice(o,1)}var s=!0;for(r=0;r<t._howls.length;r++)if(t._howls[r]._src===e._src){s=!1;break}return i&&s&&delete i[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(t===r[i].fn&&o||!t&&o){r.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var s=Object.keys(this);for(i=0;i<s.length;i++)0===s[i].indexOf("_on")&&Array.isArray(this[s[i]])&&(this[s[i]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(e,r[i].fn,r[i].id));return this},_loadQueue:function(){var e=this;if(e._queue.length>0){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var n=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused)return setTimeout(this._ended.bind(this,e),100),this;var r=!(!e._loop&&!this._sprite[n][2]);if(this._emit("end",e._id),!this._webAudio&&r&&this.stop(e._id,!0).play(e._id),this._webAudio&&r){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),i)}return this._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),t._autoSuspend()),this._webAudio||r||this.stop(e._id),this},_clearTimer:function(e){return this._endTimers[e]&&(clearTimeout(this._endTimers[e]),delete this._endTimers[e]),this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new r(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=i[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,this},_cleanBuffer:function(e){if(this._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=this._scratchBuffer}catch(e){}}return e.bufferSource=null,this}};var r=function(e){this._parent=e,this.init()};r.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++t._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,n=t._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),this._node.gain.setValueAtTime(n,t.ctx.currentTime),this._node.paused=!0,this._node.connect(t.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(t._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=n*t.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++t._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(t._canPlayEvent,this._loadFn,!1)}};var i={},o=function(e){var t=e._src;if(i[t])return e._duration=i[t].duration,void l(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);a(r.buffer,e)}else{var u=new XMLHttpRequest;u.open("GET",t,!0),u.withCredentials=e._xhrWithCredentials,u.responseType="arraybuffer",u.onload=function(){var t=(u.status+"")[0];"0"===t||"2"===t||"3"===t?a(u.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+u.status+".")},u.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete i[t],e.load())},s(u)}},s=function(e){try{e.send()}catch(t){e.onerror()}},a=function(e,n){t.ctx.decodeAudioData(e,function(e){e&&n._sounds.length>0&&(i[n._src]=e,l(n,e))},function(){n._emit("loaderror",null,"Decoding audio data failed.")})},l=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},u=function(){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=n?parseInt(n[1],10):null;if(e&&r&&r<9){var i=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());(t._navigator&&t._navigator.standalone&&!i||t._navigator&&!t._navigator.standalone&&!i)&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.value=t._muted?0:1,t.masterGain.connect(t.ctx.destination)),t._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:t,Howl:n}}),"undefined"!=typeof exports&&(exports.Howler=t,exports.Howl=n),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=r):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=t,global.Howl=n,global.Sound=r)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var s=this._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,i="number"!=typeof i?s[4]:i,o="number"!=typeof o?s[5]:o,"number"!=typeof e?s:(this._orientation=[e,t,n,r,i,o],this.ctx.listener.setOrientation(e,t,n,r,i,o),this)},Howl.prototype.init=function(e){return function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),s=0;s<o.length;s++){var a=r._soundById(o[s]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,i),"spatial"===i?a._panner.setPosition(t,0,Math.abs(1-t)):a._panner.pan.value=t),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,n,r],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),l._panner.setPosition(t,n,r)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,n,r],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),l._panner.setOrientation(t,n,r)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,i=arguments;if(!this._webAudio)return this;if(0===i.length)return this._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(r=this._soundById(parseInt(i[0],10)))?r._pannerAttr:this._pannerAttr;t=i[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:this._panningModel})}else 2===i.length&&(t=i[0],n=parseInt(i[1],10));for(var o=this._getSoundIds(n),s=0;s<o.length;s++)if(r=this._soundById(o[s])){var a=r._pannerAttr;a={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:a.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:a.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:a.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:a.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:a.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:a.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:a.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:a.panningModel};var l=r._panner;l?(l.coneInnerAngle=a.coneInnerAngle,l.coneOuterAngle=a.coneOuterAngle,l.coneOuterGain=a.coneOuterGain,l.distanceModel=a.distanceModel,l.maxDistance=a.maxDistance,l.refDistance=a.refDistance,l.rolloffFactor=a.rolloffFactor,l.panningModel=a.panningModel):(r._pos||(r._pos=this._pos||[0,0,-.5]),e(r,"spatial"))}return this},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}(),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).nipplejs=e()}}(function(){function e(){}function t(e,n){return this.identifier=n.identifier,this.position=n.position,this.frontPosition=n.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(n),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=t.id,t.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function n(e,t){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=e,this.id=n.id,n.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5},this.config(t),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function r(e){var t=this;t.ids={},t.index=0,t.collections=[],t.config(e),t.prepareCollections();var n;return c.bindEvt(window,"resize",function(e){clearTimeout(n),n=setTimeout(function(){var e,n=c.getScroll();t.collections.forEach(function(t){t.forEach(function(t){e=t.el.getBoundingClientRect(),t.position={x:n.x+e.left,y:n.y+e.top}})})},100)}),t.collections}var i,o=!!("ontouchstart"in window),s=!!window.PointerEvent,a=!!window.MSPointerEvent,l={start:"mousedown",move:"mousemove",end:"mouseup"},u={};s?i={start:"pointerdown",move:"pointermove",end:"pointerup"}:a?i={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:o?(i={start:"touchstart",move:"touchmove",end:"touchend"},u=l):i=l;var c={};c.distance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},c.angle=function(e,t){var n=t.x-e.x,r=t.y-e.y;return c.degrees(Math.atan2(r,n))},c.findCoord=function(e,t,n){var r={x:0,y:0};return n=c.radians(n),r.x=e.x-t*Math.cos(n),r.y=e.y-t*Math.sin(n),r},c.radians=function(e){return e*(Math.PI/180)},c.degrees=function(e){return e*(180/Math.PI)},c.bindEvt=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(t,n)},c.unbindEvt=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent(t,n)},c.trigger=function(e,t,n){var r=new CustomEvent(t,n);e.dispatchEvent(r)},c.prepareEvent=function(e){return"front"!=e.target.className&&"back"!=e.target.className||e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e},c.getScroll=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},c.applyPosition=function(e,t){t.x&&t.y?(e.style.left=t.x+"px",e.style.top=t.y+"px"):(t.top||t.right||t.bottom||t.left)&&(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left)},c.getTransitionStyle=function(e,t,n){var r=c.configStylePropertyObject(e);for(var i in r)if(r.hasOwnProperty(i))if("string"==typeof t)r[i]=t+" "+n;else{for(var o="",s=0,a=t.length;s<a;s+=1)o+=t[s]+" "+n+", ";r[i]=o.slice(0,-2)}return r},c.getVendorStyle=function(e,t){var n=c.configStylePropertyObject(e);for(var r in n)n.hasOwnProperty(r)&&(n[r]=t);return n},c.configStylePropertyObject=function(e){var t={};t[e]="";return["webkit","Moz","o"].forEach(function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},c.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},c.safeExtend=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?n[r]=t[r]:e.hasOwnProperty(r)&&(n[r]=e[r]);return n},c.map=function(e,t){if(e.length)for(var n=0,r=e.length;n<r;n+=1)t(e[n]);else t(e)},e.prototype.on=function(e,t){var n,r=e.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var i=0;i<r.length;i+=1)n=r[i],this._handlers_[n]=this._handlers_[n]||[],this._handlers_[n].push(t);return this},e.prototype.off=function(e,t){return this._handlers_=this._handlers_||{},void 0===e?this._handlers_={}:void 0===t?this._handlers_[e]=null:this._handlers_[e]&&this._handlers_[e].indexOf(t)>=0&&this._handlers_[e].splice(this._handlers_[e].indexOf(t),1),this},e.prototype.trigger=function(e,t){var n,r=this,i=e.split(/[ ,]+/g);r._handlers_=r._handlers_||{};for(var o=0;o<i.length;o+=1)n=i[o],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach(function(e){e.call(r,{type:n,target:r},t)})},e.prototype.config=function(e){this.options=this.defaults||{},e&&(this.options=c.safeExtend(this.options,e))},e.prototype.bindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]?n["on"+t].apply(n,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},c.bindEvt(e,i[t],n._domHandlers_[t]),u[t]&&c.bindEvt(e,u[t],n._domHandlers_[t]),n},e.prototype.unbindEvt=function(e,t){return this._domHandlers_=this._domHandlers_||{},c.unbindEvt(e,i[t],this._domHandlers_[t]),u[t]&&c.unbindEvt(e,u[t],this._domHandlers_[t]),delete this._domHandlers_[t],this},t.prototype=new e,t.constructor=t,t.id=0,t.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},t.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=c.getVendorStyle("borderRadius","50%"),n=c.getTransitionStyle("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},c.extend(r.el,n),c.extend(r.back,t),c.extend(r.front,t),this.applyStyles(r),this},t.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},t.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},t.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},t.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},t.prototype.show=function(e){var t=this;return t.options.dataOnly?t:(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)},t.options.fadeTime),t)},t.prototype.hide=function(e){var t=this;return t.options.dataOnly?t:(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var n="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=n,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.restPosition(),t)},t.prototype.restPosition=function(e){var t=this;t.frontPosition={x:0,y:0};var n=t.options.fadeTime+"ms",r={};r.front=c.getTransitionStyle("transition",["top","left"],n);var i={front:{}};i.front={left:t.frontPosition.x+"px",top:t.frontPosition.y+"px"},t.applyStyles(r),t.applyStyles(i),t.restTimeout=setTimeout(function(){"function"==typeof e&&e.call(t),t.restCallback()},t.options.fadeTime)},t.prototype.restCallback=function(){var e={};e.front=c.getTransitionStyle("transition","none",""),this.applyStyles(e),this.trigger("rested",this.instance)},t.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},t.prototype.computeDirection=function(e){var t,n,r,i=e.angle.radian,o=Math.PI/4,s=Math.PI/2;if(t=i>o&&i<3*o?"up":i>-o&&i<=o?"left":i>3*-o&&i<=-o?"down":"right",n=i>-s&&i<s?"left":"right",r=i>0?"up":"down",e.force>this.options.threshold){var a={};for(var l in this.direction)this.direction.hasOwnProperty(l)&&(a[l]=this.direction[l]);var u={};this.direction={x:n,y:r,angle:t},e.direction=this.direction;for(var l in a)a[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;u.x&&u.y||this.trigger("plain",e),u.x||this.trigger("plain:"+n,e),u.y||this.trigger("plain:"+r,e),u.angle||this.trigger("dir dir:"+t,e)}return e},n.prototype=new e,n.constructor=n,n.id=0,n.prototype.prepareNipples=function(){var e=this.nipples;e.on=this.on.bind(this),e.off=this.off.bind(this),e.options=this.options,e.destroy=this.destroy.bind(this),e.ids=this.ids,e.id=this.id,e.processOnMove=this.processOnMove.bind(this),e.processOnEnd=this.processOnEnd.bind(this),e.get=function(t){if(void 0===t)return e[0];for(var n=0,r=e.length;n<r;n+=1)if(e[n].identifier===t)return e[n];return!1}},n.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},n.prototype.begin=function(){var e=this.options;if("static"===e.mode){var t=this.createNipple(e.position,this.manager.getIdentifier());t.add(),this.idles.push(t)}},n.prototype.createNipple=function(e,n){var r=c.getScroll(),i={},o=this.options;if(e.x&&e.y)i={x:e.x-(r.x+this.box.left),y:e.y-(r.y+this.box.top)};else if(e.top||e.right||e.bottom||e.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=e.top,s.style.right=e.right,s.style.bottom=e.bottom,s.style.left=e.left,s.style.position="absolute",o.zone.appendChild(s);var a=s.getBoundingClientRect();o.zone.removeChild(s),i=e,e={x:a.left+r.x,y:a.top+r.y}}var l=new t(this,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restOpacity:o.restOpacity,mode:o.mode,identifier:n,position:e,zone:o.zone,frontPosition:{x:0,y:0}});return o.dataOnly||(c.applyPosition(l.ui.el,i),c.applyPosition(l.ui.front,l.frontPosition)),this.nipples.push(l),this.trigger("added "+l.identifier+":added",l),this.manager.trigger("added "+l.identifier+":added",l),this.bindNipple(l),l},n.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},n.prototype.bindNipple=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},n.prototype.pressureFn=function(e,t,n){var r=this,i=0;clearInterval(r.pressureIntervals[n]),r.pressureIntervals[n]=setInterval(function(){var n=e.force||e.pressure||e.webkitForce||0;n!==i&&(t.trigger("pressure",n),r.trigger("pressure "+t.identifier+":pressure",n),i=n)}.bind(r),100)},n.prototype.onstart=function(e){var t=this,n=t.options;e=c.prepareEvent(e),t.updateBox();return c.map(e,function(e){t.actives.length<n.maxNumberOfNipples&&t.processOnStart(e)}),t.manager.bindDocument(),!1},n.prototype.processOnStart=function(e){var t,n=this,r=n.options,i=n.manager.getIdentifier(e),o=e.force||e.pressure||e.webkitForce||0,s={x:e.pageX,y:e.pageY},a=n.getOrCreate(i,s);a.identifier=i;var l=function(t){t.trigger("start",t),n.trigger("start "+t.id+":start",t),t.show(),o>0&&n.pressureFn(e,t,t.identifier),n.processOnMove(e)};if((t=n.idles.indexOf(a))>=0&&n.idles.splice(t,1),n.actives.push(a),n.ids.push(a.identifier),"semi"!==r.mode)l(a);else{if(!(c.distance(s,a.position)<=r.catchDistance))return a.destroy(),void n.processOnStart(e);l(a)}return a},n.prototype.getOrCreate=function(e,t){var n,r=this.options;return/(semi|static)/.test(r.mode)?(n=this.idles[0])?(this.idles.splice(0,1),n):"semi"===r.mode?this.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):n=this.createNipple(t,e)},n.prototype.processOnMove=function(e){var t=this.options,n=this.manager.getIdentifier(e),r=this.nipples.get(n);if(!r)return console.error("Found zombie joystick with ID "+n),void this.manager.removeIdentifier(n);r.identifier=n;var i=r.options.size/2,o={x:e.pageX,y:e.pageY},s=c.distance(o,r.position),a=c.angle(o,r.position),l=c.radians(a),u=s/i;s>i&&(s=i,o=c.findCoord(r.position,s,a)),r.frontPosition={x:o.x-r.position.x,y:o.y-r.position.y},t.dataOnly||c.applyPosition(r.ui.front,r.frontPosition);var h={identifier:r.identifier,position:o,force:u,pressure:e.force||e.pressure||e.webkitForce||0,distance:s,angle:{radian:l,degree:a},instance:r};(h=r.computeDirection(h)).angle={radian:c.radians(180-a),degree:180-a},r.trigger("move",h),this.trigger("move "+r.id+":move",h)},n.prototype.processOnEnd=function(e){var t=this,n=t.options,r=t.manager.getIdentifier(e),i=t.nipples.get(r),o=t.manager.removeIdentifier(i.identifier);i&&(n.dataOnly||i.hide(function(){"dynamic"===n.mode&&(i.trigger("removed",i),t.trigger("removed "+i.id+":removed",i),t.manager.trigger("removed "+i.id+":removed",i),i.destroy())}),clearInterval(t.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),t.trigger("end "+i.id+":end",i),t.ids.indexOf(i.identifier)>=0&&t.ids.splice(t.ids.indexOf(i.identifier),1),t.actives.indexOf(i)>=0&&t.actives.splice(t.actives.indexOf(i),1),/(semi|static)/.test(n.mode)?t.idles.push(i):t.nipples.indexOf(i)>=0&&t.nipples.splice(t.nipples.indexOf(i),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[o.id]=o.identifier))},n.prototype.onDestroyed=function(e,t){this.nipples.indexOf(t)>=0&&this.nipples.splice(this.nipples.indexOf(t),1),this.actives.indexOf(t)>=0&&this.actives.splice(this.actives.indexOf(t),1),this.idles.indexOf(t)>=0&&this.idles.splice(this.idles.indexOf(t),1),this.ids.indexOf(t.identifier)>=0&&this.ids.splice(this.ids.indexOf(t.identifier),1),this.manager.removeIdentifier(t.identifier),this.manager.unbindDocument()},n.prototype.destroy=function(){this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(e){e.destroy()});for(var e in this.pressureIntervals)this.pressureIntervals.hasOwnProperty(e)&&clearInterval(this.pressureIntervals[e]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()},r.prototype=new e,r.constructor=r,r.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every(function(e){return!(n=e.get(t))}),n}},r.prototype.create=function(e){return this.createCollection(e)},r.prototype.createCollection=function(e){var t=new n(this,e);return this.bindCollection(t),this.collections.push(t),t},r.prototype.bindCollection=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},r.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},r.prototype.unbindDocument=function(e){Object.keys(this.ids).length&&!0!==e||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},r.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},r.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},r.prototype.onmove=function(e){return this.onAny("move",e),!1},r.prototype.onend=function(e){return this.onAny("end",e),!1},r.prototype.onAny=function(e,t){var n,r=this,i="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=c.prepareEvent(t);return c.map(t,function(e){n=r.getIdentifier(e),c.map(r.collections,function(e,t,n){n.ids.indexOf(t)>=0&&(n[i](e),e._found_=!0)}.bind(null,e,n)),e._found_||r.removeIdentifier(n)}),!1},r.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(e){e.destroy()}),this.off()},r.prototype.onDestroyed=function(e,t){if(this.collections.indexOf(t)<0)return!1;this.collections.splice(this.collections.indexOf(t),1)};var h=new r;return{create:function(e){return h.create(e)},factory:h}}),function(){window.DEVELOPMENT=!1;window.game={protocol:5,version:"v1.0.2",state:0,focus:!0,screenX:0,screenY:0,halfScreenX:0,halfScreenY:0,scale:1,spectatingID:null,myID:null,myType:null,myTeam:null,myUserID:"",myName:"",myOriginalName:"",myScore:0,myPlace:0,myLevel:0,myToken:"",myFlag:"xx",loggedIn:!1,roomName:"",regionName:"",playRegion:"derp",playRoom:"ffa",playHost:"",playPath:"",playInvited:!1,gameType:null,regionName:"",inviteLink:"",lastFlagSet:"xx",reloading:!1,ping:0,lagging:!1,timeFactor:1,timeFactorUncapped:1,time:0,timeNetwork:0,jitter:0,frames:0,shadowX:0,shadowY:0,graphics:{},debug:{},buckets:[]},window.config={storage:{},settings:{},ships:[{},{name:"raptor",turnFactor:.065,accelFactor:.225,maxSpeed:5.5,minSpeed:.001,brakeFactor:.025,energyLight:.6,collisions:[[0,5,23],[0,-15,15],[0,-25,12]]},{name:"spirit",turnFactor:.04,accelFactor:.15,maxSpeed:3.5,minSpeed:.001,brakeFactor:.015,energyLight:.9,collisions:[[0,0,35],[50,14,16],[74,26,14],[30,8,23],[63,22,15],[-50,14,16],[-74,26,14],[-30,8,23],[-63,22,15]]},{name:"mohawk",turnFactor:.07,accelFactor:.275,maxSpeed:6,minSpeed:.001,brakeFactor:.025,energyLight:.3,collisions:[[0,-12,15],[0,0,17],[0,13,15],[0,26,15]]},{name:"tornado",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.5,collisions:[[0,8,18],[14,12,13],[-14,12,13],[0,-12,16],[0,-26,14],[0,-35,12]]},{name:"prowler",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.75,collisions:[[0,11,25],[0,-8,18],[19,20,10],[-19,20,10],[0,-20,14]]}],mobs:[{},{exhaust:20,thruster:[.2,.4]},{exhaust:30,thruster:[.3,.6]},{exhaust:18,thruster:[.14,.3]},{},{exhaust:20,thruster:[.2,.4]},{exhaust:20,thruster:[.2,.4]},{exhaust:20,thruster:[.2,.4]}],upgrades:{speed:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},defense:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},energy:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},missile:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]}},doodads:[[1009,-2308,1,.9,.2,null,null],[1241,-2490,4,.5,-.2,null,null],[1157,-2379,2,.7,-.1,null,null],[622,-2126,3,.4,null,null,null],[669,-2187,2,.6,null,null,null],[-392,-1669,1,1.1,.1,null,null],[-273,-1746,4,.5,-.1,null,null],[-252,-1504,2,1,null,null,null],[1553,-2016,2,.4,.2,null,null],[1637,-1972,1,.5,.1,null,null],[1736,-1922,2,.5,.7,null,null],[2150,-2406,2,.6,null,null,null],[2238,-2318,3,.9,null,null,null],[2364,-2391,4,.6,0,null,null],[2491,-2682,1,.6,-.1,null,null],[2596,-2671,2,.9,.2,null,null],[-150,-3147,4,.4,-.4,null,null],[-155,-3044,2,.7,0,null,null],[-427,-3600,2,.4,null,null,null],[-259,-2982,2,.5,null,null,null],[-379,-3529,1,.6,.1,1,null],[-665,-3052,2,.5,null,null,null],[20,-1816,4,.5,.3,null,null],[127,-1799,1,.5,null,null,null],[263,-2572,3,.4,.4,null,null],[405,-2570,1,.9,-.2,null,null],[851,-4183,1,1,null,null,null],[754,-3971,2,.9,-.1,1,null],[1757,-5065,4,1.1,null,null,null],[1169,-4453,3,.9,null,null,null],[2054,-5244,3,.9,null,null,null],[1631,-4901,1,.9,0,null,null],[2305,-5281,2,.9,.2,1,null],[1007,-4281,1,.8,.1,null,null],[2766,-5202,1,.8,.1,1,null],[2927,-5204,2,.7,null,1,null],[3206,-5218,2,.3,.6,1,null],[3099,-5193,4,.6,.1,1,null],[1417,-4726,2,1,null,null,null],[2844,-1513,4,.5,.1,null,null],[3206,-1464,1,1,.1,1,null],[2881,-1403,2,.9,null,null,null],[3804,-2025,1,.7,-.1,null,null],[4116,-1778,2,.9,-.3,null,null],[3715,-1508,3,.6,.1,null,null],[4247,-1126,1,.6,.1,1,null],[3860,268,1,.5,.5,1,null],[4334,-1011,2,1.1,-.1,null,null],[3849,349,3,.6,null,null,null],[3956,490,4,.8,-.4,null,null],[4073,667,2,.9,-.5,null,null],[3583,-864,4,.8,.1,.8,15723705],[4135,836,2,1,-.2,null,null],[4785,-743,2,1,.1,null,null],[4993,-839,1,.9,.3,1,null],[5224,-482,3,.7,null,null,null],[5235,-1238,4,1.1,null,1,null],[5419,-1346,2,.6,-.5,.8,null],[6075,-5099,1,.8,null,null,null],[5767,-4953,2,.9,-.3,1,null],[5896,-4967,2,.9,.1,1,null],[5384,-4642,4,.9,null,null,null],[5704,-4857,4,.9,null,null,null],[5563,-4697,2,.9,null,null,null],[5406,-4470,1,1.1,null,null,null],[5352,-3964,3,.9,null,null,null],[5309,-3665,1,1.1,null,null,null],[5247,-3464,4,.9,-.5,null,null],[5300,-3121,1,.9,null,null,null],[3524,-3340,1,1.1,0,null,null],[3661,-3589,2,.9,-.7,null,null],[7236,-1376,2,.6,-.3,null,null],[7624,-1610,2,.8,null,null,null],[7403,-1555,2,.7,null,null,null],[7514,-1568,2,.9,0,null,null],[3660,-2705,1,.9,.2,null,null],[3374,-2813,2,.8,null,null,null],[7347,-1447,1,.9,.1,null,null],[7236,-775,4,.5,-.9,null,null],[7207,-631,2,.9,0,null,null],[7303,-468,1,.9,-.3,null,null],[7262,-1263,4,.9,-.6,null,null],[7404,-350,2,1,.6,null,null],[7589,-305,3,.9,.6,null,null],[7741,-1589,4,1,.2,null,null],[7949,-1594,1,1,-.2,null,null],[8152,-1599,2,1.1,.1,null,null],[8378,-1602,4,1.2,0,null,null],[7873,-321,2,.6,.3,null,null],[8543,-1661,1,.7,0,null,null],[7790,-259,1,1,.1,null,null],[8675,-1573,2,1,.1,null,null],[8163,-245,2,.7,.3,null,null],[8329,-311,2,.7,.5,null,null],[8275,-229,1,1,.1,null,null],[8447,-277,3,1,0,null,null],[8824,-1447,1,.9,-.4,null,null],[7221,-1140,1,.5,-.2,null,null],[8924,-1273,2,.9,-.5,null,null],[6844,-950,3,1,.1,null,null],[8949,-1060,3,1.1,-.3,null,null],[8904,-920,4,.8,-.7,null,null],[8582,-338,2,.7,null,null,null],[8963,-803,1,1,-.4,null,null],[8680,-322,4,.9,0,null,null],[8811,-449,1,.9,-.3,null,null],[8910,-610,2,.9,-.4,null,null],[6855,114,1,.8,null,null,null],[6971,241,2,1,-.1,null,null],[6852,656,2,.5,.3,null,null],[6980,706,1,.9,-.4,null,null],[6946,939,4,1,-.2,null,null],[6027,-560,1,.6,0,null,null],[7521,425,2,.4,.1,null,null],[7599,389,1,.5,-.5,null,null],[5863,-431,2,.9,.1,null,null],[9392,262,2,.9,-.1,null,null],[7521,512,3,.6,null,null,null],[9807,1027,1,.5,-.1,null,null],[9554,237,1,1,-.2,1,null],[9346,392,4,1.2,-.3,null,null],[9789,1142,3,.7,null,null,null],[9747,-532,4,.8,.2,1,null],[8591,347,4,.6,-.2,null,null],[9951,-509,1,1,null,null,null],[9308,2417,1,.5,.1,null,null],[10185,-522,2,.9,null,1,null],[10330,2147,1,.6,0,null,null],[9350,2480,3,.7,null,null,null],[10503,2124,2,.9,null,null,null],[12500,2628,4,.5,.3,null,null],[13188,2864,4,.5,-.1,null,null],[12637,2659,2,.7,.1,null,null],[13262,2899,1,.5,null,null,null],[13777,5168,1,.5,-.3,null,null],[15709,6399,1,.4,null,null,null],[13539,5664,3,.5,null,1,null],[15660,6474,2,.4,-.3,null,null],[13743,5248,2,.7,-.1,null,null],[15482,6600,2,.4,-.1,null,null],[15591,6525,4,.3,null,null,null],[13487,5738,4,.7,null,null,null],[15407,6702,1,.6,.1,null,null],[8171,-2568,2,.5,.1,null,null],[16001,6015,3,.6,null,null,null],[16017,6110,1,.4,null,1,null],[6496,-1491,1,.5,.3,null,null],[6626,-1480,2,.7,null,null,null],[6190,-1022,4,.8,null,null,null],[8325,-2615,2,1,-.3,null,null],[8222,-2412,4,1,null,null,null],[9204,-2288,1,.9,-.1,null,null],[9279,-2216,2,1,null,null,null],[10375,-1558,2,.8,-.3,null,null],[10309,-1421,1,.9,null,null,null],[10247,-1216,4,1.2,-.5,null,null],[10079,-2310,4,.9,.3,null,null],[10320,-2330,3,1,null,null,null],[10942,-2963,2,.9,-.3,null,null],[10807,-2778,4,1.1,-.5,null,null],[12989,-1929,3,.6,null,null,null],[12613,-1181,1,.4,0,1,null],[12559,-1120,2,.5,null,null,null],[11642,-1900,4,.7,-.5,null,null],[11558,-1692,1,.9,-.2,null,null],[11509,-1479,2,.5,null,null,null],[12559,-2673,1,.8,null,null,null],[12446,-2487,4,1,-.5,null,null],[12375,-2303,3,.9,-.2,null,null],[10363,-3514,4,.7,-.4,null,null],[10290,-3340,1,.9,-.2,null,null],[10162,-3207,2,.7,null,null,null],[9003,-3048,4,.9,-.1,null,null],[9161,-3119,1,.6,null,null,null],[14550,-3462,2,.9,-.2,null,null],[14407,-3335,4,.9,-.2,null,null],[14366,-4493,2,.9,.5,null,null],[14477,-4437,3,1,null,null,null],[15305,-4230,4,.9,.1,null,null],[15481,-4283,2,.9,null,null,null],[15349,-5009,4,.4,.3,null,null],[11874,-4879,2,.6,null,null,null],[15453,-4984,1,.7,null,null,null],[11907,-4742,4,.8,-.6,null,null],[12440,-4278,4,.5,.3,null,null],[11980,-4582,2,.9,null,null,null],[12131,-4387,1,1.1,null,null,null],[15681,-4973,4,1,null,null,null],[12591,-4252,1,.8,null,null,null],[12777,-4244,2,.9,.2,null,null],[12969,-4227,3,.9,null,null,null],[15897,-5071,2,.9,-.2,null,null],[13204,-4228,4,1,null,null,null],[11592,-5261,1,.7,.2,null,null],[12743,-4826,1,.4,.3,null,null],[10102,-5078,2,.7,.4,null,null],[12854,-4782,3,.9,.1,null,null],[10191,-5033,1,.7,null,null,null],[10523,-5133,2,1,null,null,null],[10336,-4977,4,1.1,-.3,null,null],[10667,-5250,2,.8,-.1,null,null],[9665,-6403,4,.7,.3,null,null],[10798,-5379,1,.5,null,null,null],[9670,-5547,1,.9,-.1,null,null],[9834,-6369,3,1,null,null,null],[9864,-5572,2,1.1,-.1,null,null],[11362,-3957,2,.9,null,1,null],[11162,-3830,4,1,-.1,null,null],[8922,-6173,4,1,null,null,null],[9003,-5368,1,.5,null,null,null],[8453,-6153,1,.6,.2,null,null],[8954,-5229,3,.9,-.2,null,null],[8905,-5072,1,.8,-.3,null,null],[8704,-3873,3,.9,null,null,null],[8578,-6105,2,.8,.4,null,null],[8508,-3710,1,.7,0,null,null],[8614,-5400,4,.5,null,null,null],[8788,-4922,4,1.1,null,null,null],[8936,-3905,4,.6,.3,null,null],[9701,-4613,4,.9,-.1,null,null],[6973,-4776,2,.6,null,null,null],[7016,-4674,1,.9,null,null,null],[9124,-3853,1,.9,.2,null,null],[7253,-4648,4,.8,.2,null,null],[6602,-4591,1,.6,.2,null,null],[8510,-5322,2,.9,null,null,null],[6687,-3810,4,.7,.3,null,null],[9525,-4492,3,1.1,null,null,null],[7461,-4705,2,.9,null,null,null],[9280,-3812,2,.8,-.3,null,null],[6467,-2811,1,.3,null,null,null],[6842,-3820,1,.8,.3,null,null],[6483,-2725,4,.6,.3,null,null],[7675,-4864,1,1.1,null,null,null],[6991,-2885,4,.9,.2,null,null],[6610,-2664,4,.9,null,null,null],[6822,-2736,2,.9,null,null,null],[6763,-4582,3,.9,null,null,null],[6509,-2490,2,.9,-.3,null,null],[7216,-3865,4,1.1,.2,1,null],[7018,-3708,2,1,.2,null,null],[2254,-3301,1,.8,.5,null,null],[6378,-2310,1,.8,.2,null,null],[7197,-2857,2,.9,null,null,null],[2609,-3483,4,.5,null,null,null],[2449,-3385,2,.9,.3,1,null],[4585,-2889,4,.7,-.2,null,null],[4470,-2768,3,.8,.2,null,null],[4083,-4033,1,.9,.5,1,null],[1568,-2869,1,.4,null,null,null],[4336,-4105,2,1.2,null,null,null],[1977,-1678,2,.5,null,null,null],[1412,-3642,1,.5,0,1,null],[1570,-2792,4,.6,null,null,null],[1932,-1586,1,.6,null,null,null],[1310,-3547,2,.6,0,null,null],[3611,1391,2,1,null,null,null],[3558,2174,2,.9,null,null,null],[3431,1563,1,.9,.3,null,null],[3142,2813,2,.7,null,null,null],[3330,2296,4,1.1,null,null,null],[3001,2818,1,.6,.3,null,null],[3703,2044,1,.4,null,null,null],[2872,3863,1,.9,-.2,null,null],[3125,2942,3,1.1,null,null,null],[2841,4018,4,1.1,.1,null,null],[2402,5140,4,.6,.3,null,null],[2511,5167,3,.8,null,null,null],[-14607,-5112,4,.9,.1,null,null],[-14430,-5180,1,.9,0,null,null],[-14197,-5222,2,1.2,-.1,null,null],[-14895,-4703,4,.5,.2,null,null],[-14797,-4728,2,.4,null,null,null],[-14697,-4739,1,.4,null,null,null],[-13919,-5281,1,1.1,0,null,null],[-13646,-5170,3,.7,null,null,null],[-13400,-5068,2,1.2,.2,null,null],[-13099,-5108,4,1.1,.2,null,null],[-12824,-5092,1,.9,null,null,null],[-12631,-5044,2,.9,-.2,null,null],[-12427,-4914,1,.9,null,null,null],[-12270,-4816,2,.7,-.3,null,null],[-11772,-4983,2,.7,0,null,null],[-11940,-4867,1,.9,null,null,null],[-12091,-4699,3,.9,null,null,null],[-12270,-4529,4,.7,null,null,null],[-12460,-4396,1,.9,.4,null,null],[-13058,-4252,1,.9,null,null,null],[-12894,-4096,4,.7,.2,null,null],[-12738,-4077,2,.7,null,null,null],[-13546,-4341,1,.4,null,null,null],[-13428,-4299,3,.9,null,null,null],[-14679,-4192,1,.7,-.1,null,null],[-14368,-4308,4,.7,-.2,null,null],[-14495,-4133,2,1.1,-.1,null,null],[-12072,-3824,2,.8,-.1,null,null],[-11904,-3648,1,1,0,null,null],[-11654,-3569,3,.7,null,null,null],[-11648,-3357,4,.9,0,null,null],[-11420,-3359,1,.9,null,null,null],[-11296,-3135,2,.7,null,null,null],[-10782,-2838,1,.8,-.1,null,null],[-11410,-3039,1,.3,.6,null,null],[-10581,-2773,2,1.1,.1,null,null],[-11118,-5114,4,.8,.2,null,null],[-10675,-5079,1,.9,null,null,null],[-10205,-4890,1,.8,.1,null,null],[-11543,-4164,4,.8,.3,null,null],[-11287,-4244,2,.5,null,null,null],[-10018,-4747,2,1,-.2,null,null],[-9278,419,3,.5,null,null,null],[-9341,470,4,.5,.3,null,null],[-9180,496,1,.8,.6,null,null],[-11365,-4131,3,1,null,null,null],[-9353,0,3,.6,.3,null,null],[-8975,528,2,1,.1,null,null],[-9413,89,4,.9,null,null,null],[-8230,770,1,.4,null,null,null],[-9231,17,1,.7,0,null,null],[-6808,1667,3,.5,-.2,null,null],[-6694,1622,2,.8,-.4,null,null],[-8285,855,3,.6,null,null,null],[-6793,1796,2,.8,.4,null,null],[-6865,1935,1,.5,-.1,null,null],[-7043,2222,3,.6,-.2,null,null],[-7083,2368,1,.6,-.2,null,null],[-7103,2533,4,.7,-.4,null,null],[-7099,2721,2,.8,-.3,null,null],[-7178,2874,1,.4,null,null,null],[-6964,3110,4,.7,.2,null,null],[-6246,4191,1,.6,-.1,null,null],[-6735,3446,1,.4,.1,null,null],[-6722,3537,4,.7,.4,null,null],[-6396,3388,4,.9,null,null,null],[-6787,3140,2,.9,null,null,null],[-6227,4488,2,.7,-.5,null,null],[-6281,3953,1,.6,.2,null,null],[-6530,3576,1,1.1,null,null,null],[-6147,3994,3,1.1,null,null,null],[-6141,4292,2,1.2,-.3,null,null],[-6377,5578,2,.7,-.5,null,null],[-6152,4569,1,.9,-.2,null,null],[-6222,4769,4,.7,-.5,null,null],[-6266,4956,1,.6,-.2,null,null],[-6233,5414,1,.9,-.4,null,null],[-6347,5646,3,.7,-.1,1,null],[-6400,6066,2,.7,-.2,null,null],[-6411,6261,1,.8,null,null,null],[-6565,7043,1,.6,-.3,null,null],[-6377,6415,4,.9,-.3,null,null],[-6440,6614,1,.7,-.2,null,null],[-5944,1954,3,.5,-.4,null,null],[-6001,2039,1,.8,.2,null,null],[-6467,7070,3,.9,null,null,null],[-4963,3608,1,.6,-.3,1,null],[-4776,3510,2,.4,-.1,1,null],[-5785,1998,2,1.1,-.2,null,null],[-3708,3449,1,.6,-.3,null,null],[-3790,3582,1,.9,null,null,null],[-4031,3697,4,.7,-.1,null,null],[-4859,3634,3,1,null,null,null],[-3850,3730,2,1,.2,null,null],[-4689,4605,4,.9,-.2,null,null],[-3492,2892,1,.6,-.2,null,null],[-4507,4483,1,.6,null,null,null],[-4829,2745,1,.9,-.2,null,null],[-4435,4273,2,.9,-.6,null,null],[-3383,2930,2,.9,null,null,null],[-4888,2821,2,.9,.1,null,null],[-5372,5172,1,.5,null,null,null],[-5036,2981,4,.9,.3,null,null],[-9895,-1942,1,1,.1,null,null],[-9371,-2159,4,.6,null,null,null],[-9995,-1773,4,.9,-.5,null,null],[-5280,5218,4,.9,0,null,null],[-5079,5183,1,.9,-.3,null,null],[-5149,3079,1,.6,.2,null,null],[-9695,-2048,2,1,-.1,null,null],[-5063,5374,2,.9,-.2,null,null],[-9504,-2059,1,1,.2,null,null],[-8948,-2140,4,.7,.3,null,null],[-9262,-2081,2,1.1,.4,null,null],[-9068,-2071,4,1,.2,null,null],[-8861,-2045,2,1.1,0,null,null],[-8654,-2083,1,1,.3,null,null],[-8473,-2048,3,1,0,null,null],[-8283,-1965,1,1,.5,null,null],[-8182,-1863,2,.9,-.2,null,null],[-10037,-1579,1,.9,-.4,null,null],[-10063,-1365,2,.9,-.1,null,null],[-10074,-1190,1,.9,-.4,null,null],[-8167,-1225,1,.5,-.7,null,null],[-8188,-1087,4,.8,-.5,null,null],[-9975,-1022,1,.9,.3,null,null],[-9835,-910,2,1,.1,null,null],[-9709,-848,4,1,.3,null,null],[-9532,-792,2,1,.1,null,null],[-9348,-779,1,1,0,null,null],[-9131,-784,2,1.1,.1,null,null],[-8754,-795,3,.7,null,null,null],[-8587,-797,4,1,0,null,null],[-8424,-856,1,.9,null,null,null],[-8246,-921,2,.9,-.4,null,null],[-8153,-1701,4,.7,-.7,null,null],[-6447,-2137,1,.6,-.2,null,null],[-8153,-1591,1,.5,-.6,null,null],[-7694,-1393,4,1,-.1,null,null],[-6541,-2030,2,.7,null,null,null],[-7135,-1547,2,.7,.1,null,null],[-5885,-2958,1,.6,.3,null,null],[-7171,-1440,1,.8,-.2,null,null],[-5620,-3123,2,.6,-.4,null,null],[-6631,-1866,4,.8,null,null,null],[-5882,-3696,2,.8,-.4,null,null],[-5716,-2944,3,.9,null,null,null],[-5949,-3528,1,.5,-.1,null,null],[-6869,-4052,4,.8,null,null,null],[-7081,-2673,3,.5,null,null,null],[-6725,-4069,1,.6,-.2,null,null],[-10487,-2295,2,.5,.1,1,null],[-7032,-2749,2,.6,-.4,null,null],[-10769,-3817,3,.6,-.2,null,null],[-6607,-4081,2,.5,null,null,null],[-10849,-1824,1,.7,.1,null,null],[-10479,-2146,4,.9,-.1,null,null],[-7003,-2611,4,.9,-.2,null,null],[-10749,-1511,2,.6,-.4,null,null],[-10697,-1953,2,1,.1,null,null],[-10848,-1330,3,.9,null,null,null],[-10912,-1220,4,.5,0,null,null],[-9843,-2685,4,.7,null,null,null],[-10823,-3717,2,.7,null,null,null],[-9697,-2713,1,.6,.3,null,null],[-10080,-3431,2,.4,null,null,null],[-10648,-3844,1,.9,null,null,null],[-9530,-2695,2,1,null,null,null],[-2387,-6791,1,.9,null,null,null],[-8465,-5037,2,.7,null,null,null],[-2550,-6627,2,.9,-.1,null,null],[-9325,-2822,1,.7,-.1,null,null],[-10140,-3346,1,.8,null,null,null],[-8461,-4908,4,.9,null,null,null],[8116,-1076,2,.8,-.3,null,null],[8115,-940,4,.8,-.3,null,null],[-2503,-6359,4,1.4,-.6,null,null],[-9062,-1580,2,.8,-.5,null,null],[8120,-790,1,.8,null,null,null],[-9065,-1444,4,.8,-.3,null,null],[-2615,-6159,1,1,null,null,null],[-2744,-5943,2,1.1,null,null,null],[-3713,-4955,3,.9,null,null,null],[-9061,-1292,1,.8,0,null,null],[-1551,-4718,4,.5,null,null,null],[5251,-6249,1,.5,null,1,null],[5192,-6181,2,.4,-.1,null,null],[-2898,-5732,3,.9,null,null,null],[-1705,-4629,3,.8,null,null,null],[1618,-7035,1,.5,null,null,null],[-3829,-4776,4,.9,null,null,null],[-2851,-5589,4,1.1,-.2,null,null],[-2974,-5399,2,1.1,null,null,null],[-3952,-4568,1,.9,null,null,null],[-4135,-4368,2,1.1,.1,1,null],[-3428,-5104,1,1.1,null,null,null],[-3167,-5254,4,.9,.1,null,null],[-3049,-6916,2,1,null,null,null],[-3097,-6722,1,.9,-.3,null,null],[-3190,-6493,3,1,null,null,null],[-3318,-6284,4,1.1,null,null,null],[-4672,-5861,1,1.1,1,null,null],[-4480,-5668,1,1,null,null,null],[-4294,-5548,2,.9,1.1,null,null],[-3433,-6072,1,1,-.2,null,null],[-3568,-5881,3,1,null,null,null],[-3736,-5698,2,1.2,null,null,null],[-3978,-7517,3,.9,.1,null,null],[-3956,-5572,4,1,null,null,null],[-4103,-5400,1,1,null,null,null],[-4281,-5240,2,1,null,null,null],[-4409,-5034,3,1,null,null,null],[-4475,-4808,4,.9,null,null,null],[-2777,-7546,3,1,.8,null,null],[-2542,-7502,2,.9,.4,null,null],[-2398,-7364,1,.9,-.7,null,null],[-2350,-7151,2,.9,-.4,null,null],[-2315,-6976,4,.8,-.8,null,null],[-3749,-7488,4,1,null,null,null],[-2995,-7596,2,1.2,.5,null,null],[-3253,-7558,3,1.1,.3,null,null],[-3468,-7472,4,1,null,null,null],[-5028,-6473,2,1,.4,null,null],[-3604,-7301,1,1.1,null,null,null],[-3678,-7078,2,1.1,null,null,null],[-3835,-6826,3,1.1,null,null,null],[-3935,-6595,2,1,null,null,null],[-5214,-7381,3,1,null,null,null],[-4065,-6416,3,1.1,null,null,null],[-4174,-6231,4,.7,null,null,null],[-4556,-6940,3,1,null,null,null],[-4663,-6781,4,1,null,null,null],[-4748,-6548,2,1.3,null,null,null],[-4847,-6257,2,1.1,-.4,null,null],[-4806,-6016,4,.9,1.2,null,null],[-4950,-7410,1,1.4,.2,null,null],[-5470,-7251,4,1.3,-.2,null,null],[-5637,-7038,2,1,-.3,null,null],[-5593,-6819,4,1,null,null,null],[-5406,-6727,3,1,.6,null,null],[-5263,-6580,1,1,.4,null,null],[-4636,-7476,2,1,.2,null,null],[-4399,-7496,2,.9,-.2,null,null],[-6769,-7571,2,.9,-.4,null,null],[-6853,-7377,1,.9,null,null,null],[-8273,-7231,4,.5,.4,null,null],[-4182,-7512,4,.9,.1,null,null],[-7525,-5855,2,.9,null,null,null],[-7495,-6329,3,.5,null,null,null],[-7297,-6946,2,.9,null,null,null],[-8148,-7137,1,.7,null,null,null],[-7030,-7301,4,.7,null,null,null]],walls:[[1009,-2308,108],[1241,-2490,60],[1157,-2379,84],[622,-2126,48],[669,-2187,72],[-392,-1669,132],[-273,-1746,60],[-252,-1504,120],[1553,-2016,48],[1637,-1972,60],[1736,-1922,60],[2150,-2406,72],[2238,-2318,108],[2364,-2391,72],[2491,-2682,72],[2596,-2671,108],[-150,-3147,48],[-155,-3044,84],[-427,-3600,48],[-259,-2982,60],[-379,-3529,72],[-665,-3052,60],[20,-1816,60],[127,-1799,60],[263,-2572,48],[405,-2570,108],[851,-4183,120],[754,-3971,108],[1757,-5065,132],[1169,-4453,108],[2054,-5244,108],[1631,-4901,108],[2305,-5281,108],[1007,-4281,96],[2766,-5202,96],[2927,-5204,84],[3206,-5218,36],[3099,-5193,72],[1417,-4726,120],[2844,-1513,60],[3206,-1464,120],[2881,-1403,108],[3804,-2025,84],[4116,-1778,108],[3715,-1508,72],[4247,-1126,72],[3860,268,60],[4334,-1011,132],[3849,349,72],[3956,490,96],[4073,667,108],[3583,-864,96],[4135,836,120],[4785,-743,120],[4993,-839,108],[5224,-482,84],[5235,-1238,132],[5419,-1346,72],[6075,-5099,96],[5767,-4953,108],[5896,-4967,108],[5384,-4642,108],[5704,-4857,108],[5563,-4697,108],[5406,-4470,132],[5352,-3964,108],[5309,-3665,132],[5247,-3464,108],[5300,-3121,108],[3524,-3340,132],[3661,-3589,108],[7236,-1376,72],[7624,-1610,96],[7403,-1555,84],[7514,-1568,108],[3660,-2705,108],[3374,-2813,96],[7347,-1447,108],[7236,-775,60],[7207,-631,108],[7303,-468,108],[7262,-1263,108],[7404,-350,120],[7589,-305,108],[7741,-1589,120],[7949,-1594,120],[8152,-1599,132],[8378,-1602,144],[7873,-321,72],[8543,-1661,84],[7790,-259,120],[8675,-1573,120],[8163,-245,84],[8329,-311,84],[8275,-229,120],[8447,-277,120],[8824,-1447,108],[7221,-1140,60],[8924,-1273,108],[6844,-950,120],[8949,-1060,132],[8904,-920,96],[8582,-338,84],[8963,-803,120],[8680,-322,108],[8811,-449,108],[8910,-610,108],[6855,114,96],[6971,241,120],[6852,656,60],[6980,706,108],[6946,939,120],[6027,-560,72],[7521,425,48],[7599,389,60],[5863,-431,108],[9392,262,108],[7521,512,72],[9807,1027,60],[9554,237,120],[9346,392,144],[9789,1142,84],[9747,-532,96],[8591,347,72],[9951,-509,120],[9308,2417,60],[10185,-522,108],[10330,2147,72],[9350,2480,84],[10503,2124,108],[12500,2628,60],[13188,2864,60],[12637,2659,84],[13262,2899,60],[13777,5168,60],[15709,6399,48],[13539,5664,60],[15660,6474,48],[13743,5248,84],[15482,6600,48],[15591,6525,36],[13487,5738,84],[15407,6702,72],[8171,-2568,60],[16001,6015,72],[16017,6110,48],[6496,-1491,60],[6626,-1480,84],[6190,-1022,96],[8325,-2615,120],[8222,-2412,120],[9204,-2288,108],[9279,-2216,120],[10375,-1558,96],[10309,-1421,108],[10247,-1216,144],[10079,-2310,108],[10320,-2330,120],[10942,-2963,108],[10807,-2778,132],[12989,-1929,72],[12613,-1181,48],[12559,-1120,60],[11642,-1900,84],[11558,-1692,108],[11509,-1479,60],[12559,-2673,96],[12446,-2487,120],[12375,-2303,108],[10363,-3514,84],[10290,-3340,108],[10162,-3207,84],[9003,-3048,108],[9161,-3119,72],[14550,-3462,108],[14407,-3335,108],[14366,-4493,108],[14477,-4437,120],[15305,-4230,108],[15481,-4283,108],[15349,-5009,48],[11874,-4879,72],[15453,-4984,84],[11907,-4742,96],[12440,-4278,60],[11980,-4582,108],[12131,-4387,132],[15681,-4973,120],[12591,-4252,96],[12777,-4244,108],[12969,-4227,108],[15897,-5071,108],[13204,-4228,120],[11592,-5261,84],[12743,-4826,48],[10102,-5078,84],[12854,-4782,108],[10191,-5033,84],[10523,-5133,120],[10336,-4977,132],[10667,-5250,96],[9665,-6403,84],[10798,-5379,60],[9670,-5547,108],[9834,-6369,120],[9864,-5572,132],[11362,-3957,108],[11162,-3830,120],[8922,-6173,120],[9003,-5368,60],[8453,-6153,72],[8954,-5229,108],[8905,-5072,96],[8704,-3873,108],[8578,-6105,96],[8508,-3710,84],[8614,-5400,60],[8788,-4922,132],[8936,-3905,72],[9701,-4613,108],[6973,-4776,72],[7016,-4674,108],[9124,-3853,108],[7253,-4648,96],[6602,-4591,72],[8510,-5322,108],[6687,-3810,84],[9525,-4492,132],[7461,-4705,108],[9280,-3812,96],[6467,-2811,36],[6842,-3820,96],[6483,-2725,72],[7675,-4864,132],[6991,-2885,108],[6610,-2664,108],[6822,-2736,108],[6763,-4582,108],[6509,-2490,108],[7216,-3865,132],[7018,-3708,120],[2254,-3301,96],[6378,-2310,96],[7197,-2857,108],[2609,-3483,60],[2449,-3385,108],[4585,-2889,84],[4470,-2768,96],[4083,-4033,108],[1568,-2869,48],[4336,-4105,144],[1977,-1678,60],[1412,-3642,60],[1570,-2792,72],[1932,-1586,72],[1310,-3547,72],[3611,1391,120],[3558,2174,108],[3431,1563,108],[3142,2813,84],[3330,2296,132],[3001,2818,72],[3703,2044,48],[2872,3863,108],[3125,2942,132],[2841,4018,132],[2402,5140,72],[2511,5167,96],[-14607,-5112,108],[-14430,-5180,108],[-14197,-5222,144],[-14895,-4703,60],[-14797,-4728,48],[-14697,-4739,48],[-13919,-5281,132],[-13646,-5170,84],[-13400,-5068,144],[-13099,-5108,132],[-12824,-5092,108],[-12631,-5044,108],[-12427,-4914,108],[-12270,-4816,84],[-11772,-4983,84],[-11940,-4867,108],[-12091,-4699,108],[-12270,-4529,84],[-12460,-4396,108],[-13058,-4252,108],[-12894,-4096,84],[-12738,-4077,84],[-13546,-4341,48],[-13428,-4299,108],[-14679,-4192,84],[-14368,-4308,84],[-14495,-4133,132],[-12072,-3824,96],[-11904,-3648,120],[-11654,-3569,84],[-11648,-3357,108],[-11420,-3359,108],[-11296,-3135,84],[-10782,-2838,96],[-11410,-3039,36],[-10581,-2773,132],[-11118,-5114,96],[-10675,-5079,108],[-10205,-4890,96],[-11543,-4164,96],[-11287,-4244,60],[-10018,-4747,120],[-9278,419,60],[-9341,470,60],[-9180,496,96],[-11365,-4131,120],[-9353,0,72],[-8975,528,120],[-9413,89,108],[-8230,770,48],[-9231,17,84],[-6808,1667,60],[-6694,1622,96],[-8285,855,72],[-6793,1796,96],[-6865,1935,60],[-7043,2222,72],[-7083,2368,72],[-7103,2533,84],[-7099,2721,96],[-7178,2874,48],[-6964,3110,84],[-6246,4191,72],[-6735,3446,48],[-6722,3537,84],[-6396,3388,108],[-6787,3140,108],[-6227,4488,84],[-6281,3953,72],[-6530,3576,132],[-6147,3994,132],[-6141,4292,144],[-6377,5578,84],[-6152,4569,108],[-6222,4769,84],[-6266,4956,72],[-6233,5414,108],[-6347,5646,84],[-6400,6066,84],[-6411,6261,96],[-6565,7043,72],[-6377,6415,108],[-6440,6614,84],[-5944,1954,60],[-6001,2039,96],[-6467,7070,108],[-4963,3608,72],[-4776,3510,48],[-5785,1998,132],[-3708,3449,72],[-3790,3582,108],[-4031,3697,84],[-4859,3634,120],[-3850,3730,120],[-4689,4605,108],[-3492,2892,72],[-4507,4483,72],[-4829,2745,108],[-4435,4273,108],[-3383,2930,108],[-4888,2821,108],[-5372,5172,60],[-5036,2981,108],[-9895,-1942,120],[-9371,-2159,72],[-9995,-1773,108],[-5280,5218,108],[-5079,5183,108],[-5149,3079,72],[-9695,-2048,120],[-5063,5374,108],[-9504,-2059,120],[-8948,-2140,84],[-9262,-2081,132],[-9068,-2071,120],[-8861,-2045,132],[-8654,-2083,120],[-8473,-2048,120],[-8283,-1965,120],[-8182,-1863,108],[-10037,-1579,108],[-10063,-1365,108],[-10074,-1190,108],[-8167,-1225,60],[-8188,-1087,96],[-9975,-1022,108],[-9835,-910,120],[-9709,-848,120],[-9532,-792,120],[-9348,-779,120],[-9131,-784,132],[-8754,-795,84],[-8587,-797,120],[-8424,-856,108],[-8246,-921,108],[-8153,-1701,84],[-6447,-2137,72],[-8153,-1591,60],[-7694,-1393,120],[-6541,-2030,84],[-7135,-1547,84],[-5885,-2958,72],[-7171,-1440,96],[-5620,-3123,72],[-6631,-1866,96],[-5882,-3696,96],[-5716,-2944,108],[-5949,-3528,60],[-6869,-4052,96],[-7081,-2673,60],[-6725,-4069,72],[-10487,-2295,60],[-7032,-2749,72],[-10769,-3817,72],[-6607,-4081,60],[-10849,-1824,84],[-10479,-2146,108],[-7003,-2611,108],[-10749,-1511,72],[-10697,-1953,120],[-10848,-1330,108],[-10912,-1220,60],[-9843,-2685,84],[-10823,-3717,84],[-9697,-2713,72],[-10080,-3431,48],[-10648,-3844,108],[-9530,-2695,120],[-2387,-6791,108],[-8465,-5037,84],[-2550,-6627,108],[-9325,-2822,84],[-10140,-3346,96],[-8461,-4908,108],[8116,-1076,96],[8115,-940,96],[-2503,-6359,168],[-9062,-1580,96],[8120,-790,96],[-9065,-1444,96],[-2615,-6159,120],[-2744,-5943,132],[-3713,-4955,108],[-9061,-1292,96],[-1551,-4718,60],[5251,-6249,60],[5192,-6181,48],[-2898,-5732,108],[-1705,-4629,96],[1618,-7035,60],[-3829,-4776,108],[-2851,-5589,132],[-2974,-5399,132],[-3952,-4568,108],[-4135,-4368,132],[-3428,-5104,132],[-3167,-5254,108],[-3049,-6916,120],[-3097,-6722,108],[-3190,-6493,120],[-3318,-6284,132],[-4672,-5861,132],[-4480,-5668,120],[-4294,-5548,108],[-3433,-6072,120],[-3568,-5881,120],[-3736,-5698,144],[-3978,-7517,108],[-3956,-5572,120],[-4103,-5400,120],[-4281,-5240,120],[-4409,-5034,120],[-4475,-4808,108],[-2777,-7546,120],[-2542,-7502,108],[-2398,-7364,108],[-2350,-7151,108],[-2315,-6976,96],[-3749,-7488,120],[-2995,-7596,144],[-3253,-7558,132],[-3468,-7472,120],[-5028,-6473,120],[-3604,-7301,132],[-3678,-7078,132],[-3835,-6826,132],[-3935,-6595,120],[-5214,-7381,120],[-4065,-6416,132],[-4174,-6231,84],[-4556,-6940,120],[-4663,-6781,120],[-4748,-6548,156],[-4847,-6257,132],[-4806,-6016,108],[-4950,-7410,168],[-5470,-7251,156],[-5637,-7038,120],[-5593,-6819,120],[-5406,-6727,120],[-5263,-6580,120],[-4636,-7476,120],[-4399,-7496,108],[-6769,-7571,108],[-6853,-7377,108],[-8273,-7231,60],[-4182,-7512,108],[-7525,-5855,108],[-7495,-6329,60],[-7297,-6946,108],[-8148,-7137,84],[-7030,-7301,84]],groundDoodads:[[-9670,-1470,"doodadField",.5,0,null,null],[8600,-940,"doodadField",.5,0,null,null],[920,-2800,"doodadField",.5,0,null,null]],debug:{show:!0,collisions:!1},mobile:!1,ios:!1,phone:!1,tablet:!1,mouse:!1,resolution:1,overdrawOptimize:!0,overdraw:256,scalingFactor:2500,minimapPaddingX:16,minimapPaddingY:16,minimapSize:240,maxChatLines:50,maxScoreboard:8,shadowScaling:2,shadowOffsetX:20,shadowOffsetY:40,ackFrequency:10,bucketSize:512,mapWidth:32768,mapHeight:16384},window.Tools={},window.Textures={},window.Graphics={},window.Network={},window.Input={},window.Players={},window.Mobs={},window.Particles={},window.UI={},window.Games={},window.Sound={};var e=function(e,t){Tools.updateTime(e),Tools.debugStartFrame(),game.state==Network.STATE.PLAYING?(Input.update(),Network.detectConnectivity(),Players.update(),Mobs.update(),Particles.update(),Games.update(),Sound.update()):game.state==Network.STATE.LOGIN?Tools.updateReel():Sound.update(),Graphics.update(),t||Graphics.render(),Tools.debugEndFrame()},t=function(){var t=performance.now()-game.time;t>450&&!game.focus&&e(t/16.666,!0)};$(function(){game.state=Network.STATE.LOGIN,Tools.startupMsg(),Tools.loadSettings(),Tools.detectCapabilities(),Tools.setupDebug(),Graphics.setup(),Tools.initBuckets(),Particles.setup(),UI.setup(),Input.setup(),Games.setup(),Sound.setup();var n=new PIXI.ticker.Ticker;n.add(e),n.start(),setInterval(t,500)})}();class Vector{constructor(e,t){this.x=e,this.y=t}add(e){this.x+=e,this.y+=e}divide(e){this.x/=e,this.y/=e}multiply(e){this.x*=e,this.y*=e}limit(e){this.divide(this.length()),this.multiply(e)}clone(){return new Vector(this.x,this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}angle(){return Math.atan2(this.y,this.x)-Math.PI/2}ceil(e){this.x>e&&(this.x=e),this.y>e&&(this.y=e)}floor(e){this.x<e&&(this.x=e),this.y<e&&(this.y=e)}both(e){this.x=e,this.y=e}static zero(){return new Vector(0,0)}static diag(e){return new Vector(e,e)}static create(e,t){return new Vector(Math.sin(e)*t,-Math.cos(e)*t)}static createOff(e,t,n){return new Vector(e.x+Math.sin(t)*n,e.y-Math.cos(t)*n)}}!function(){var e={},t=0,n={started:!1,startX:200,startY:-2450,pan:0,dist:100,explosion:4e3,direction:1};Tools.updateReel=function(){if(!n.started){n.pos=Vector.zero();for(var e,t=[3,1,2,4,5],r=[-270,-150,0,150,270],i=0;i<t.length;i++)Players.add({id:i+1,team:1,status:0,reel:!0,name:"",type:t[i],posX:0,posY:0,rot:0,flag:1}),(e=Players.get(i+1)).keystate.UP=!0,e._offset=r[i]}n.started=!0,n.dist>2e3?n.direction=-1:n.dist<100&&(n.direction=1),n.dist+=.5*n.direction*game.timeFactor,n.pan+=1/n.dist*game.timeFactor,n.pos.x=n.startX+Math.sin(n.pan)*n.dist,n.pos.y=n.startY-Math.cos(n.pan)*n.dist,Graphics.setCamera(n.pos.x,n.pos.y),Players.update(),Particles.update();for(var o,s=1;s<=5;s++)(o=Players.get(s)).pos.x=n.pos.x+o._offset,o.pos.y=n.pos.y+game.screenY/game.scale*.24,null!=o._prevPos?o.rot=new Vector(o.pos.x-o._prevPos.x,o.pos.y-o._prevPos.y).angle()+Math.PI:o._prevPos=o.pos.clone(),o._prevPos=new Vector((19*o._prevPos.x+o.pos.x)/20,(19*o._prevPos.y+o.pos.y)/20);if(game.time>n.explosion){var a=new Vector(Tools.rand(n.pos.x-game.halfScreenX/game.scale,n.pos.x+game.halfScreenX/game.scale),Tools.rand(n.pos.y-game.halfScreenY/game.scale,n.pos.y+game.halfScreenY/game.scale));Particles.explosion(a,Tools.rand(2,2.5),Tools.randInt(4,7)),Particles.explosion(new Vector(a.x+Tools.rand(-100,100),a.y+Tools.rand(-100,100)),Tools.rand(1,1.2)),n.explosion=game.time+Tools.rand(1e3,3e3)}},Tools.wipeReel=function(){Particles.wipe(),Players.wipe()},Tools.startupMsg=function(){console.log("%cÎIRMÎSH Engine "+game.version+" starting up!","font-size: 20px;"),console.log(""),console.log("%c*** Important message ***","font-size: 16px; color: red;"),console.log("%cDo not paste any commands given by players in this console window","font-size: 14px; color: red;"),console.log("")},Tools.detectCapabilities=function(){r(),config.mobile&&!config.settings.mobileshown&&(UI.popBigMsg(1),config.settings.mobileshown=!0,Tools.setSettings({mobileshown:!0})),config.mobile&&Input.setupLogin()};var r=function(){config.mobile="ontouchstart"in document.documentElement&&void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),config.ios=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,"#forcemobile"==window.location.hash&&(config.mobile=!0),"#nomobile"==window.location.hash&&(config.mobile=!1)};Tools.loadSettings=function(){var e=s();config.storage=e,DEVELOPMENT&&console.log(e),null!=e.id&&(config.settings.id=e.id),null!=e.session&&(config.settings.session=e.session),null!=e.name&&(config.settings.name=e.name),null!=e.region&&(config.settings.region=e.region),null!=e.helpshown&&(config.settings.helpshown=e.helpshown),null!=e.mobileshown&&(config.settings.mobileshown=e.mobileshown),null!=e.flag&&(config.settings.flag=e.flag),null!=e.hidpi&&(config.settings.hidpi=e.hidpi),null!=e.sound&&(config.settings.sound=e.sound),null!=e.keybinds&&(config.settings.keybinds=e.keybinds),null!=e.mousemode&&(config.settings.mousemode=e.mousemode),i()};var i=function(){if(null==config.settings.id){var e=Tools.randomID(16);config.settings.id=e,Tools.setSettings({id:e})}null!=config.settings.name&&$("#playername").val(config.settings.name),null!=config.settings.region&&(game.playRegion=config.settings.region),null!=config.settings.flag&&(game.myFlag=config.settings.flag),null==config.settings.sound&&(config.settings.sound=!0),config.settings.mousemode&&Input.toggleMouse(!0),UI.updateSound(),config.settings.oldhidpi=config.settings.hidpi};Tools.randomID=function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),o(t).substr(0,e)};var o=function(e){for(var t,n="",r=0;r<e.length;r++)n+=t=1===(t=(255&e[r]).toString(16)).length?"0"+t:t;return n};Tools.setSettings=function(e){if(null!=window.localStorage){for(var t in e)config.storage[t]=e[t];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(e){}}},Tools.removeSetting=function(e){if(null!=window.localStorage){null!=config.storage[e]&&delete config.storage[e];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(e){}}},Tools.wipeSettings=function(){if(null!=window.localStorage){config.storage={},config.settings={};try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(e){}}};var s=function(){if(null==window.localStorage)return{};var e=null,t={};try{e=localStorage.getItem("settings")}catch(e){}if(null!=e)try{t=JSON.parse(e)}catch(e){}return t};Tools.ajaxPost=function(e,t,n){$.ajax({url:e,method:"POST",data:t,dataType:"json",timeout:1e4,success:function(e){null!=n&&n(null!=e&&1==e.result?e:null)},error:function(){null!=n&&n(null)}})},Tools.length=function(e,t){return Math.sqrt(e*e+t*t)},Tools.oscillator=function(e,t,n){return 1+Math.sin((game.time+(n||0))/t)*e},Tools.converge=function(e,t,n){return Math.abs(e-t)<.01?t:e+n*(t-e)},Tools.rand=function(e,t){return Math.random()*(t-e)+e},Tools.randCircle=function(){return Tools.rand(0,6.28318530718)},Tools.randInt=function(e,t){var n=Math.floor(Math.random()*(t+1-e)+e);return n>=t&&(n=t),n},Tools.clamp=function(e,t,n){return e<=t?t:e>=n?n:e},Tools.lerp=function(e,t,n){return n*(t-e)+e},Tools.colorLerp=function(e,t,n){n<=0&&(n=.001),n>=1&&(n=.999);var r=e>>16,i=e>>8&255,o=255&e;return(1<<24)+(r+n*((t>>16)-r)<<16)+(i+n*((t>>8&255)-i)<<8)+(o+n*((255&t)-o))|0},Tools.distance=function(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)},Tools.distFastCheck=function(e,t,n,r){return Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=r},Tools.distFastCheckFloat=function(e,t,n,r,i){return Math.abs(e-n)<=i&&Math.abs(t-r)<=i},Tools.updateTime=function(e){game.timeFactor=e<60?e:60,game.timeFactorUncapped=game.timeFactor,game.timeFactor>10&&(game.timeFactor=10),game.time=performance.now(),game.frames++},Tools.reducedFactor=function(){var e=(performance.now()-game.time)/16.666;return Math.abs(game.jitter)>.1&&(e+=game.jitter/16.666),e};var a={shockwave:[.1,.1,.11,.12,.12,.13,.14,.14,.15,.16,.17,.18,.2,.21,.22,.24,.26,.29,.31,.35,.38,.42,.47,.52,.58,.64,.71,.78,.84,.9,.95,.98,1,1,1,.98,.97,.94,.9,.85,.78,.7,.62,.52,.43,.34,.26,.18,.11,.05,0],explosionSmoke:[0,0,.02,.06,.13,.26,.45,.71,.91,.99,.99,.97,.94,.92,.89,.86,.83,.8,.77,.74,.71,.68,.65,.63,.6,.57,.54,.51,.48,.45,.42,.4,.37,.34,.31,.29,.26,.24,.21,.19,.16,.14,.12,.1,.08,.06,.04,.02,.01,0,0]};Tools.easing={outElastic:function(e,t){var n=1-(t||.7),r=2*e;if(0===e||1===e)return e;var i=n/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*r)*Math.sin((r-i)*(2*Math.PI)/n)+1},custom:function(e,t){var n=a[t],r=n.length,i=Math.floor(e*(r-1)),o=n[i];return i===r-1?o:Tools.lerp(o,n[i+1],e*(r-1)%1)}},Tools.setupDebug=function(){DEVELOPMENT&&config.debug.show&&(UI.show("#debug"),game.debug={last:performance.now(),ticks:0,frames:game.frames},setInterval(Tools.updateDebug,2123))},Tools.debugLine=function(e,t){return'<div class="line"><span class="attr">'+UI.escapeHTML(e)+'</span><span class="val">'+UI.escapeHTML(t)+"</span></div>"},Tools.updateDebug=function(){var e=performance.now(),t=1e3*(game.frames-game.debug.frames)/(e-game.debug.last),n=Players.count(),r=Mobs.count(),i=Mobs.countDoodads(),o="",s=Players.getMe();null!=s&&(o=Tools.debugLine("Coords",Math.round(s.pos.x)+", "+Math.round(s.pos.y)));var a=Tools.debugLine("FPS",Math.round(t))+Tools.debugLine("Ticks",(game.debug.ticks/(e-game.debug.last)*100).toFixed(2)+"%")+Tools.debugLine("Ping",game.ping.toFixed(2)+" ms")+Tools.debugLine("Res",game.screenX+" x "+game.screenY)+'<div class="spacer"></div>'+Tools.debugLine("Players",n[0]+" / "+n[1])+Tools.debugLine("Mobs",r[0]+" / "+r[1])+Tools.debugLine("Particles",Particles.count())+Tools.debugLine("Doodads",i[0]+" / "+i[1])+'<div class="spacer"></div>'+o+Tools.debugLine("Scale",game.scale.toFixed(2))+Tools.debugLine("Jitter",game.jitter.toFixed(3))+'<div class="close" onclick="Tools.hideDebug()">x</div>';$("#debug").html(a),game.debug.last=e,game.debug.ticks=0,game.debug.frames=game.frames},Tools.hideDebug=function(){UI.hide("#debug")},Tools.debugStartFrame=function(){DEVELOPMENT&&config.debug.show&&(game.debug.startedFrame=performance.now())},Tools.debugEndFrame=function(){DEVELOPMENT&&config.debug.show&&null!=game.debug.startedFrame&&(game.debug.ticks+=performance.now()-game.debug.startedFrame)},Tools.earningsToRank=function(e){return Math.floor(.0111*Math.pow(e,.5))+1},Tools.rankToEarnings=function(e){return Math.pow((e-1)/.0111,2)},Tools.decodeKeystate=function(e,t){e.keystate.UP=0!=(1&t),e.keystate.DOWN=0!=(2&t),e.keystate.LEFT=0!=(4&t),e.keystate.RIGHT=0!=(8&t),e.boost=0!=(16&t),e.strafe=0!=(32&t),e.stealthed=0!=(64&t),e.flagspeed=0!=(128&t)},Tools.decodeUpgrades=function(e,t){e.speedupgrade=(0!=(1&t)?1:0)+(0!=(2&t)?2:0)+(0!=(4&t)?4:0),e.powerups.shield=0!=(8&t),e.powerups.rampage=0!=(16&t)},Tools.decodeMinimapCoords=function(e,t){return new Vector(128*e-16384+64,Tools.clamp(128*t-16384,-8192,8192)+64)},Tools.decodeSpeed=function(e){return(e-32768)/1638.4},Tools.decodeCoordX=function(e){return(e-32768)/2},Tools.decodeCoordY=function(e){return(e-32768)/4},Tools.decodeCoord24=function(e){return(e-8388608)/512},Tools.decodeAccel=function(e){return(e-32768)/32768},Tools.decodeRotation=function(e){return e/6553.6},Tools.decodeHealthnergy=function(e){return e/255},Tools.decodeRegen=function(e){return(e-32768)/1e6};var l=function(t){return Tools.clamp(Math.floor(t/e.size)+e.bucketsHalfX,0,e.bucketsMaxX)},u=function(t){return Tools.clamp(Math.floor(t/e.size)+e.bucketsHalfY,0,e.bucketsMaxY)};Tools.initBuckets=function(){e={size:config.bucketSize,halfSize:parseInt(config.bucketSize/2),bucketsMaxX:parseInt(config.mapWidth/config.bucketSize)-1,bucketsMaxY:parseInt(config.mapHeight/config.bucketSize)-1,bucketsHalfX:parseInt(config.mapWidth/config.bucketSize/2),bucketsHalfY:parseInt(config.mapHeight/config.bucketSize/2)};for(var t=0;t<=e.bucketsMaxX;t++){game.buckets.push([]);for(var n=0;n<=e.bucketsMaxY;n++)game.buckets[t].push([[]])}for(var r=0;r<config.doodads.length;r++)t=l(config.doodads[r][0]),n=u(config.doodads[r][1]),game.buckets[t][n][0].push(r)},Tools.getBucketBounds=function(t,n,r){return[Tools.clamp(Math.floor((t.x-n)/e.size)+e.bucketsHalfX,0,e.bucketsMaxX),Tools.clamp(Math.floor((t.x+n)/e.size)+e.bucketsHalfX,0,e.bucketsMaxX),Tools.clamp(Math.floor((t.y-r)/e.size)+e.bucketsHalfY,0,e.bucketsMaxY),Tools.clamp(Math.floor((t.y+r)/e.size)+e.bucketsHalfY,0,e.bucketsMaxY)]},Tools.deferUpdate=function(e){setTimeout(e,1)};var c=function(e,t){if(t instanceof Error){var n={};return Object.getOwnPropertyNames(t).forEach(function(e){n[e]=t[e]}),n}return t};Tools.handleError=function(e){++t>5||(null!=e.error&&(e.error=JSON.stringify(e.error,c)),Tools.ajaxPost("/clienterror",{type:"runtime",error:JSON.stringify(e,null,"\t\t")}))},Tools.encodeUTF8=function(e){for(var t=0,n=new Uint8Array(4*e.length),r=0;r!=e.length;r++){var i=e.charCodeAt(r);if(i<128)n[t++]=i;else{if(i<2048)n[t++]=i>>6|192;else{if(i>55295&&i<56320){if(++r==e.length)throw"UTF-8 encode: incomplete surrogate pair";var o=e.charCodeAt(r);if(o<56320||o>57343)throw"UTF-8 encode: second char code 0x"+o.toString(16)+" at index "+r+" in surrogate pair out of range";i=65536+((1023&i)<<10)+(1023&o),n[t++]=i>>18|240,n[t++]=i>>12&63|128}else n[t++]=i>>12|224;n[t++]=i>>6&63|128}n[t++]=63&i|128}}return n.subarray(0,t)},Tools.decodeUTF8=function(e){for(var t="",n=0;n<e.length;){var r=e[n++];if(r>127){if(r>191&&r<224){if(n>=e.length)throw"UTF-8 decode: incomplete 2-byte sequence";r=(31&r)<<6|63&e[n]}else if(r>223&&r<240){if(n+1>=e.length)throw"UTF-8 decode: incomplete 3-byte sequence";r=(15&r)<<12|(63&e[n])<<6|63&e[++n]}else{if(!(r>239&&r<248))throw"UTF-8 decode: unknown multibyte start 0x"+r.toString(16)+" at index "+(n-1);if(n+2>=e.length)throw"UTF-8 decode: incomplete 4-byte sequence";r=(7&r)<<18|(63&e[n])<<12|(63&e[++n])<<6|63&e[++n]}++n}if(r<=65535)t+=String.fromCharCode(r);else{if(!(r<=1114111))throw"UTF-8 decode: code point 0x"+r.toString(16)+" exceeds UTF-16 reach";r-=65536,t+=String.fromCharCode(r>>10|55296),t+=String.fromCharCode(1023&r|56320)}}return t}}(),function(){var e={map_sea:"assets/map_sea.jpg",map_sea_mask:"assets/map_sea_mask.jpg",map_forest:"assets/map_forest.jpg",map_rock:"assets/map_rock.jpg",map_rock_mask:"assets/map_rock_mask.jpg",map_sand:"assets/map_sand.jpg",map_sand_mask:"assets/map_sand_mask.jpg",mountains:"assets/mountains.png",aircraft:"assets/aircraft.png",shadows:"assets/shadows.png",particles:"assets/particles.png",flags:"assets/flagsbig.png?4",items:"assets/items.png?2",gui:"assets/gui.png"},t={spirit:["aircraft",[4,4,512,256]],tornado:["aircraft",[524,4,256,256]],raptor:["aircraft",[788,4,256,256]],prowler:["aircraft",[1052,4,256,256]],comanche:["aircraft",[1316,4,128,256]],comanche_rotor:["aircraft",[1452,4,128,128]],mountain2:["mountains",[0,512,512,512]],mountain1:["mountains",[512,512,512,512]],mountain4:["mountains",[0,0,512,512]],mountain3:["mountains",[512,0,512,512]],crate_shadow:["shadows",[4,140,64,64]],comanche_rotor_shadow:["shadows",[76,140,64,64]],smokeshadow_8:["shadows",[148,140,32,32]],smokeshadow_7:["shadows",[188,140,32,32]],smokeshadow_6:["shadows",[228,140,32,32]],smokeshadow_5:["shadows",[268,140,32,32]],smokeshadow_4:["shadows",[308,140,32,32]],smokeshadow_3:["shadows",[348,140,32,32]],smokeshadow_2:["shadows",[388,140,32,32]],smokeshadow_15:["shadows",[428,140,32,32]],smokeshadow_14:["shadows",[468,140,32,32]],smokeshadow_13:["shadows",[508,140,32,32]],smokeshadow_12:["shadows",[548,140,32,32]],smokeshadow_11:["shadows",[588,140,32,32]],smokeshadow_10:["shadows",[628,140,32,32]],smokeshadow_1:["shadows",[668,140,32,32]],smokeshadow_16:["shadows",[708,140,32,32]],afterburner_shadow:["shadows",[748,140,32,32]],spirit_shadow:["shadows",[4,4,256,128]],tornado_shadow:["shadows",[268,4,128,128]],screenshade:["shadows",[404,4,128,128]],raptor_shadow:["shadows",[540,4,128,128]],prowler_shadow:["shadows",[676,4,128,128]],comanche_shadow:["shadows",[812,4,64,128]],missile_shadow:["shadows",[884,4,32,128]],smokeshadow_9:["shadows",[924,76,32,32]],ctf_flag_shadow:["shadows",[924,4,64,64]],flash_1:["particles",[0,128,120,120]],glowsmall:["particles",[120,128,64,64]],smoke_9:["particles",[184,128,32,32]],smoke_8:["particles",[216,128,32,32]],smoke_7:["particles",[248,128,32,32]],smoke_6:["particles",[280,128,32,32]],smoke_5:["particles",[312,128,32,32]],smoke_4:["particles",[344,128,32,32]],smoke_3:["particles",[376,128,32,32]],smoke_2:["particles",[408,128,32,32]],smoke_16:["particles",[440,128,32,32]],smoke_15:["particles",[472,128,32,32]],smoke_14:["particles",[504,128,32,32]],smoke_13:["particles",[536,128,32,32]],smoke_12:["particles",[568,128,32,32]],smoke_11:["particles",[600,128,32,32]],smoke_10:["particles",[632,128,32,32]],smoke_1:["particles",[664,128,32,32]],shockwave:["particles",[0,0,128,128]],hotsmoke_4:["particles",[128,0,120,120]],hotsmoke_3:["particles",[248,0,120,120]],hotsmoke_2:["particles",[368,0,120,120]],hotsmoke_1:["particles",[488,0,120,120]],flash_4:["particles",[608,0,120,120]],flash_3:["particles",[728,0,120,120]],spark_4:["particles",[848,120,8,8]],spark_3:["particles",[856,120,8,8]],spark_2:["particles",[864,120,8,8]],spark_1:["particles",[872,120,8,8]],flash_2:["particles",[848,0,120,120]],crate_upgrade:["items",[4,268,128,128]],crate_shield:["items",[140,268,128,128]],crate_rampage:["items",[276,268,128,128]],afterburner:["items",[412,268,128,128]],missile_fat:["items",[548,268,64,128]],missile:["items",[620,268,32,128]],doodad_field:["items",[4,4,256,256]],badge_bronze:["items",[268,140,64,64]],powerup_shield:["items",[268,4,128,128]],badge_gold:["items",[404,140,64,64]],powerup_rampage:["items",[404,4,128,128]],badge_silver:["items",[540,140,64,64]],powerup_circle:["items",[540,4,128,128]],glowdirectional:["items",[676,140,64,64]],ctf_flag_red:["items",[676,4,128,128]],glowsmall_copy:["items",[812,140,64,64]],missile_small:["items",[884,140,16,64]],levelborder:["items",[908,140,32,32]],ctf_flag_blue:["items",[812,4,128,128]],hud_shadow:["gui",[4,268,80,348]],hud_mask:["gui",[92,268,80,348]],hud:["gui",[180,268,80,348]],emote_bro:["gui",[268,548,64,64]],emote_clap:["gui",[268,476,64,64]],ui_minimap_box:["gui",[268,404,64,64]],emote_cry:["gui",[340,548,64,64]],emote_kappa:["gui",[340,476,64,64]],emote_tf:["gui",[340,404,64,64]],emote_lol:["gui",[412,548,64,64]],emote_pepe:["gui",[412,476,64,64]],ui_minimap_blue:["gui",[484,596,16,16]],ui_minimap_base_blue:["gui",[484,556,32,32]],ui_minimap_base_red:["gui",[484,516,32,32]],ui_minimap_flag_blue:["gui",[484,476,32,32]],emote_rage:["gui",[412,404,64,64]],ui_minimap_mob:["gui",[484,444,16,16]],ui_minimap_flag_red:["gui",[484,404,32,32]],ui_minimap:["gui",[4,4,512,256]],chatbubbleleft:["gui",[274,274,16,82]],chatbubblecenter:["gui",[350,274,82,82]],chatbubbleright:["gui",[438,274,16,82]],chatbubblepoint:["gui",[297,352,36,22]]},n={flag_1:["flags",[2,962,80,60]],flag_2:["flags",[2,898,80,60]],flag_3:["flags",[2,834,80,60]],flag_4:["flags",[2,770,80,60]],flag_5:["flags",[2,706,80,60]],flag_6:["flags",[2,642,80,60]],flag_7:["flags",[2,578,80,60]],flag_8:["flags",[2,514,80,60]],flag_9:["flags",[2,450,80,60]],flag_10:["flags",[2,386,80,60]],flag_11:["flags",[2,322,80,60]],flag_12:["flags",[2,258,80,60]],flag_13:["flags",[2,194,80,60]],flag_14:["flags",[2,130,80,60]],flag_15:["flags",[2,66,80,60]],flag_16:["flags",[86,962,80,60]],flag_17:["flags",[86,898,80,60]],flag_18:["flags",[86,834,80,60]],flag_19:["flags",[86,770,80,60]],flag_20:["flags",[86,706,80,60]],flag_21:["flags",[86,642,80,60]],flag_22:["flags",[86,578,80,60]],flag_23:["flags",[86,514,80,60]],flag_24:["flags",[86,450,80,60]],flag_25:["flags",[86,386,80,60]],flag_26:["flags",[86,322,80,60]],flag_27:["flags",[86,258,80,60]],flag_28:["flags",[86,194,80,60]],flag_29:["flags",[86,130,80,60]],flag_30:["flags",[170,962,80,60]],flag_31:["flags",[170,898,80,60]],flag_32:["flags",[170,834,80,60]],flag_33:["flags",[170,770,80,60]],flag_34:["flags",[170,706,80,60]],flag_35:["flags",[170,642,80,60]],flag_36:["flags",[170,578,80,60]],flag_37:["flags",[170,514,80,60]],flag_38:["flags",[170,450,80,60]],flag_39:["flags",[170,386,80,60]],flag_40:["flags",[170,322,80,60]],flag_41:["flags",[170,258,80,60]],flag_42:["flags",[170,194,80,60]],flag_43:["flags",[254,962,80,60]],flag_44:["flags",[254,898,80,60]],flag_45:["flags",[254,834,80,60]],flag_46:["flags",[254,770,80,60]],flag_47:["flags",[254,706,80,60]],flag_48:["flags",[254,642,80,60]],flag_49:["flags",[254,578,80,60]],flag_50:["flags",[254,514,80,60]],flag_51:["flags",[254,450,80,60]],flag_52:["flags",[254,386,80,60]],flag_53:["flags",[254,322,80,60]],flag_54:["flags",[338,962,80,60]],flag_55:["flags",[338,898,80,60]],flag_56:["flags",[338,834,80,60]],flag_57:["flags",[338,770,80,60]],flag_58:["flags",[338,706,80,60]],flag_59:["flags",[338,642,80,60]],flag_60:["flags",[338,578,80,60]],flag_61:["flags",[338,514,80,60]],flag_62:["flags",[338,450,80,60]],flag_63:["flags",[338,386,80,60]],flag_64:["flags",[422,962,80,60]],flag_65:["flags",[422,898,80,60]],flag_66:["flags",[422,834,80,60]],flag_67:["flags",[422,770,80,60]],flag_68:["flags",[422,706,80,60]],flag_69:["flags",[422,642,80,60]],flag_70:["flags",[422,578,80,60]],flag_71:["flags",[422,514,80,60]],flag_72:["flags",[422,450,80,60]],flag_73:["flags",[506,962,80,60]],flag_74:["flags",[506,898,80,60]],flag_75:["flags",[506,834,80,60]],flag_76:["flags",[506,770,80,60]],flag_77:["flags",[506,706,80,60]],flag_78:["flags",[506,642,80,60]],flag_79:["flags",[506,578,80,60]],flag_80:["flags",[590,770,80,60]],flag_81:["flags",[590,706,80,60]],flag_82:["flags",[590,642,80,60]],flag_83:["flags",[590,578,80,60]],flag_84:["flags",[506,514,80,60]],flag_85:["flags",[590,514,80,60]],flag_86:["flags",[506,450,80,60]],flag_87:["flags",[590,450,80,60]],flag_88:["flags",[422,386,80,60]],flag_89:["flags",[506,386,80,60]],flag_90:["flags",[590,386,80,60]],flag_91:["flags",[338,322,80,60]],flag_92:["flags",[422,322,80,60]],flag_93:["flags",[506,322,80,60]],flag_94:["flags",[590,322,80,60]],flag_95:["flags",[254,258,80,60]],flag_96:["flags",[338,258,80,60]],flag_97:["flags",[422,258,80,60]],flag_98:["flags",[506,258,80,60]],flag_99:["flags",[590,258,80,60]],flag_100:["flags",[254,194,80,60]],flag_101:["flags",[338,194,80,60]],flag_102:["flags",[422,194,80,60]],flag_103:["flags",[506,194,80,60]],flag_104:["flags",[590,194,80,60]],flag_105:["flags",[170,130,80,60]],flag_106:["flags",[254,130,80,60]],flag_107:["flags",[338,130,80,60]],flag_108:["flags",[422,130,80,60]],flag_109:["flags",[506,130,80,60]],flag_110:["flags",[590,130,80,60]],flag_111:["flags",[86,66,80,60]],flag_112:["flags",[170,66,80,60]],flag_113:["flags",[254,66,80,60]],flag_114:["flags",[338,66,80,60]],flag_115:["flags",[422,66,80,60]],flag_116:["flags",[506,66,80,60]],flag_117:["flags",[590,66,80,60]],flag_118:["flags",[2,2,80,60]],flag_119:["flags",[86,2,80,60]],flag_120:["flags",[170,2,80,60]],flag_121:["flags",[254,2,80,60]],flag_122:["flags",[338,2,80,60]],flag_123:["flags",[422,2,80,60]],flag_124:["flags",[506,2,80,60]],flag_125:["flags",[590,2,80,60]]},r={hudHealth_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2},hudHealth_mask:{texture:"hud_mask",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudHealth:{texture:"hud",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudEnergy_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2,rotation:Math.PI},hudEnergy_mask:{texture:"hud_mask",layer:"hudEnergy",pivot:[330,174],position:"screencenter",rotation:Math.PI},hudEnergy:{texture:"hud",layer:"hudEnergy",pivot:[330,174],position:"screencenter",tint:3374821},minimap:{texture:"ui_minimap",layer:"ui0",anchor:[1,1],alpha:.25},minimapBox:{texture:"ui_minimap_box",layer:"ui4",anchor:[.5,.5],alpha:.6},minimapMob:{texture:"ui_minimap_mob",layer:"ui1",anchor:[.5,.5],alpha:.5,scale:.8},minimapBlue:{texture:"ui_minimap_blue",layer:"ui1",anchor:[.5,.5],alpha:.5,scale:.8},minimapFlagBlue:{texture:"ui_minimap_flag_blue",layer:"ui3",anchor:[.5,.5],scale:.5},minimapFlagRed:{texture:"ui_minimap_flag_red",layer:"ui3",anchor:[.5,.5],scale:.5},minimapBaseBlue:{texture:"ui_minimap_base_blue",layer:"ui2",anchor:[.5,.5],scale:.5},minimapBaseRed:{texture:"ui_minimap_base_red",layer:"ui2",anchor:[.5,.5],scale:.5},thrusterShadow:{texture:"afterburner_shadow",layer:"shadows",anchor:[.5,.1]},missile:{texture:"missile",layer:"projectiles",anchor:[.5,0],scale:[.2,.15]},missileFat:{texture:"missile_fat",layer:"projectiles",anchor:[.5,0],scale:[.2,.2]},missileSmall:{texture:"missile_small",layer:"projectiles",anchor:[.5,0],scale:[.2,.2]},missileShadow:{texture:"missile_shadow",layer:"shadows",anchor:[.5,.25]},missileThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.15,.15]},thrusterGlowSmall:{texture:"glowsmall_copy",layer:"glows",anchor:[.5,.5],blend:"ADD"},smokeGlow:{texture:"glowdirectional",layer:"glows",anchor:[.5,.3],blend:"ADD"},crateShadow:{texture:"crate_shadow",layer:"shadows",anchor:[.5,.5]},crateUpgrade:{texture:"crate_upgrade",layer:"crates",anchor:[.5,.5]},crateShield:{texture:"crate_shield",layer:"crates",anchor:[.5,.5]},crateRampage:{texture:"crate_rampage",layer:"crates",anchor:[.5,.5]},powerupCircle:{texture:"powerup_circle",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupShield:{texture:"powerup_shield",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[.5,.5],blend:"ADD"},ctfFlagRed:{texture:"ctf_flag_red",layer:"flags",anchor:[15/128,119/128]},ctfFlagBlue:{texture:"ctf_flag_blue",layer:"flags",anchor:[15/128,119/128]},ctfFlagShadow:{texture:"ctf_flag_shadow",layer:"shadows",anchor:[3/32,23/32]},shipRaptor:{texture:"raptor",layer:"aircraft",anchor:[.5,.6]},shipRaptorShadow:{texture:"raptor_shadow",layer:"shadows",anchor:[.5,.57]},shipRaptorThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.25,.25]},shipSpirit:{texture:"spirit",layer:"aircraft",anchor:[.5,.5]},shipSpiritShadow:{texture:"spirit_shadow",layer:"shadows",anchor:[.5,.5]},shipSpiritThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.25,.25]},shipComanche:{texture:"comanche",layer:"aircraft",anchor:[.5,.4]},shipComancheShadow:{texture:"comanche_shadow",layer:"shadows",anchor:[.5,.43]},shipComancheRotor:{texture:"comanche_rotor",layer:"aircraft",anchor:[.5,.5],scale:[.25,.25]},shipComancheRotorShadow:{texture:"comanche_rotor_shadow",layer:"shadows",anchor:[.5,.5]},shipTornado:{texture:"tornado",layer:"aircraft",anchor:[.5,.65]},shipTornadoShadow:{texture:"tornado_shadow",layer:"shadows",anchor:[.5,.605]},shipProwler:{texture:"prowler",layer:"aircraft",anchor:[.5,.5]},shipProwlerShadow:{texture:"prowler_shadow",layer:"shadows",anchor:[.5,.5]},mountain1:{texture:"mountain1",layer:"doodads",anchor:[.5,.5]},mountain2:{texture:"mountain2",layer:"doodads",anchor:[.5,.5]},mountain3:{texture:"mountain3",layer:"doodads",anchor:[.5,.5]},mountain4:{texture:"mountain4",layer:"doodads",anchor:[.5,.5]},doodadField:{texture:"doodad_field",layer:"fields",anchor:[.5,.5]}},i={};Textures.load=function(){for(var r in e)i[r]=new PIXI.Texture.fromImage(e[r]);var o;for(var s in t)o=t[s],i[s]=new PIXI.Texture(i[o[0]].baseTexture,new PIXI.Rectangle(o[1][0],o[1][1],o[1][2],o[1][3]));for(var s in n)o=n[s],i[s]=new PIXI.Texture(i[o[0]].baseTexture,new PIXI.Rectangle(o[1][0],o[1][1],o[1][2],o[1][3]))},Textures.get=function(e){return i[e]},Textures.getNamed=function(e){return i[r[e].texture]},Textures.init=function(e,t){var n=JSON.parse(JSON.stringify(r[e]));if("screencenter"===n.position&&(n.position=[game.halfScreenX,game.halfScreenY]),t)for(var i in t)n[i]=t[i];return Graphics.initSprite(n.texture,game.graphics.layers[n.layer],n)},Textures.sprite=function(e){return new PIXI.Sprite(i[e])},Textures.tile=function(e,t,n){return new PIXI.extras.TilingSprite(i[e],t,n)}}(),function(){var e,t={position:Vector.zero(),center:Vector.zero(),lastOverdraw:Vector.zero(),lastOverdrawTime:0,shake:0},n={},r={},i={};Graphics.setup=function(){l(window.innerWidth,window.innerHeight),o(),Textures.load(),s(),u(),a(),h(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var o=function(){PIXI.utils.skipHello(),PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var t={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(t.resolution=2);try{e=new PIXI.WebGLRenderer(game.screenX,game.screenY,t)}catch(e){return void UI.popBigMsg(2)}document.body.appendChild(e.view)},s=function(){for(var e of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])i[e]=new PIXI.Container;for(var t of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])i.objects.addChild(i[t]);for(var n of["fields"])i.groundobjects.addChild(i[n]);if(game.graphics.layers=i,game.graphics.gui=r,config.debug.collisions){for(var o=new PIXI.Graphics,s=0;s<config.walls.length;s++)o.beginFill(16777215,.2),o.drawCircle(config.walls[s][0],config.walls[s][1],config.walls[s][2]),o.endFill();i.objects.addChild(o)}},a=function(){n.render=PIXI.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),n.renderSprite=new PIXI.Sprite(n.render),n.shadows=PIXI.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),n.shadowsSprite=new PIXI.Sprite(n.shadows),n.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),n.shadowsSprite.blendMode=PIXI.BLEND_MODES.MULTIPLY,n.shadowsSprite.alpha=.4,i.game.addChild(n.renderSprite),i.game.addChild(i.groundobjects),i.game.addChild(n.shadowsSprite),n.shade=Textures.sprite("screenshade"),n.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),n.shade.alpha=.825,n.shade.anchor.set(.5,.5),i.shadows.addChild(n.shade),i.game.addChild(i.objects),i.game.addChild(i.ui0),i.game.addChild(i.ui1),i.game.addChild(i.ui2),i.game.addChild(i.ui3),i.game.addChild(i.ui4),r.hudTextureEnergy=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),r.hudSpriteEnergy=new PIXI.Sprite(r.hudTextureEnergy),r.hudSpriteEnergy.pivot.set(-250,174),r.hudTextureHealth=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),r.hudSpriteHealth=new PIXI.Sprite(r.hudTextureHealth),r.hudSpriteHealth.pivot.set(330,174),i.game.addChild(r.hudSpriteEnergy),i.game.addChild(r.hudSpriteHealth)};Graphics.resizeRenderer=function(r,i){var o=r+config.overdraw,s=i+config.overdraw;l(r,i),u(),e.resize(r,i),n.render.resize(o,s),n.shadows.resize(r,i),n.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),n.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale);for(var a of["sea","forest","sand","rock"])n[a].width=o,n[a].height=s;UI.resizeMinimap(),UI.resizeHUD(),d(),p(),Graphics.setCamera(t.center.x,t.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){config.settings.hidpi=!(1==config.settings.hidpi),config.settings.hidpi?Tools.setSettings({hidpi:!0}):Tools.removeSetting("hidpi"),UI.updateMainMenuSettings(),1==config.settings.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert",'Reload game to apply HiDPI settings<br><span class="button" onclick="Games.redirRoot()">RELOAD</span>',1e4)};var l=function(e,t){game.screenX=e,game.screenY=t,game.halfScreenX=e/2,game.halfScreenY=t/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},u=function(){game.scale=(game.screenX+game.screenY)/config.scalingFactor,i.groundobjects.scale.set(game.scale),i.objects.scale.set(game.scale),i.shadows.scale.set(game.scale),i.doodads.scale.set(game.scale),i.bubbles.scale.set(1/game.scale),c()},c=function(){if(config.mobile){var e=game.screenX>game.screenY?"landscape":"portrait";config.phone=game.screenX<=599&&"portrait"==e||game.screenY<=599&&"landscape"==e,config.tablet=game.screenX>=600&&game.screenX<=1024&&"portrait"==e||game.screenY>=600&&game.screenY<=1024&&game.screenX<=1024&&"landscape"==e,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},h=function(){var t=e.width+config.overdraw,r=e.height+config.overdraw;n.sea=Textures.tile("map_sea",t,r),n.sea_mask=Textures.sprite("map_sea_mask"),n.sea_mask.scale.set(8,8),n.sea_mask.blendMode=PIXI.BLEND_MODES.MULTIPLY,n.sea_mask.alpha=.5,n.forest=Textures.tile("map_forest",t,r),n.sand=Textures.tile("map_sand",t,r),n.sand_mask=Textures.sprite("map_sand_mask"),n.sand_mask.scale.set(8,8),n.sand.mask=n.sand_mask,n.rock=Textures.tile("map_rock",t,r),n.rock_mask=Textures.sprite("map_rock_mask"),n.rock_mask.scale.set(8,8),n.rock.mask=n.rock_mask,i.sea.addChild(n.sea),i.sea.addChild(n.sea_mask);for(var o of["forest","sand","sand_mask","rock","rock_mask"])i.map.addChild(n[o]);i.map.addChild(i.doodads),f(),d()},d=function(){var e;for(e of["sea","forest","sand","rock"])n[e].tileScale.set(game.scale,game.scale);for(e of["sea","sand","rock"])n[e+"_mask"].scale.set(8*game.scale,8*game.scale)},p=function(){n.polygons.scale.x=game.scale,n.polygons.scale.y=game.scale},f=function(){$.getJSON("assets/map.json",function(e){n.polygons=new PIXI.Graphics,n.polygons.beginFill();var t,r,o,s,a,l,u,c=0,h=0,d=0;for(l=0;l<e.length;l++)for(o=0,u=0;u<e[l].length;u++){for(s=[],a=0;a<e[l][u].length;a+=2)t=e[l][u][a]+h,r=e[l][u][a+1]+d,s.push(parseFloat(t),-parseFloat(r)),h=t,d=r,c++;n.polygons.drawPolygon(s),0!=o&&n.polygons.addHole(),o++}n.polygons.endFill(),p(),i.map.addChild(n.polygons),i.map.mask=n.polygons})};Graphics.initSprite=function(e,t,n){var r=Textures.sprite(e);return n.position&&r.position.set(n.position[0],n.position[1]),n.anchor&&r.anchor.set(n.anchor[0],n.anchor[1]),n.pivot&&r.pivot.set(n.pivot[0],n.pivot[1]),n.scale&&(Array.isArray(n.scale)?r.scale.set(n.scale[0],n.scale[1]):r.scale.set(n.scale)),n.rotation&&(r.rotation=n.rotation),n.alpha&&(r.alpha=n.alpha),n.blend&&(r.blendMode=PIXI.BLEND_MODES[n.blend]),n.tint&&(r.tint=n.tint),n.mask&&(r.mask=n.mask),n.visible&&(r.visible=n.visible),t.addChild(r),r},Graphics.transform=function(e,t,n,r,i,o,s){e.position.set(t,n),null!=o?e.scale.set(i,o):null!=i&&e.scale.set(i),null!=r&&(e.rotation=r),null!=s&&(e.alpha=s)},Graphics.update=function(){n.shade.position.set(t.center.x/config.shadowScaling,t.center.y/config.shadowScaling),n.renderSprite.position.set(game.scale*(-t.position.x+t.lastOverdraw.x)-config.overdraw/2,game.scale*(-t.position.y+t.lastOverdraw.y)-config.overdraw/2),i.objects.position.set(-t.position.x*game.scale,-t.position.y*game.scale),i.groundobjects.position.set(-t.position.x*game.scale,-t.position.y*game.scale),i.doodads.position.set(-t.position.x*game.scale+config.overdraw/2,-t.position.y*game.scale+config.overdraw/2),i.shadows.position.set(-t.position.x*(game.scale/config.shadowScaling),-t.position.y*(game.scale/config.shadowScaling)),r.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-t.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-t.center.y)/16384)),config.overdrawOptimize?(Math.abs(t.position.x-t.lastOverdraw.x)>config.overdraw/2/game.scale||Math.abs(t.position.y-t.lastOverdraw.y)>config.overdraw/2/game.scale||game.time-t.lastOverdrawTime>2e3)&&g():g()},Graphics.setCamera=function(e,n){var r=0,i=0;t.shake>.5&&(r=Tools.rand(-t.shake,t.shake),i=Tools.rand(-t.shake,t.shake),t.shake*=1-.06*game.timeFactor);var o=game.halfScreenX/game.scale,s=game.halfScreenY/game.scale;e=Tools.clamp(e,-16384+o,16384-o),n=Tools.clamp(n,-8192+s,8192-s),t.position.x=r+e-game.screenX/2/game.scale,t.position.y=i+n-game.screenY/2/game.scale,t.center.x=r+e,t.center.y=i+n},Graphics.getCamera=function(){return t.center},Graphics.shakeCamera=function(e,n){var r=Tools.length(e.x-t.center.x,e.y-t.center.y),i=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,o=Tools.clamp(1.3*(1-r/i),0,1);o<.1||(t.shake=o*n)},Graphics.shadowCoords=function(e){var t=Mobs.getClosestDoodad(e);return new Vector((e.x+config.shadowOffsetX*t)/config.shadowScaling,(e.y+config.shadowOffsetY*t)/config.shadowScaling)},Graphics.minimapMob=function(e,t,n){null!=e&&e.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-t)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-n)/16384))};Graphics.toggleFullscreen=function(){!function(){var e=document;return e.fullscreenElement?null!==e.fullscreenElement:e.mozFullScreenElement?null!==e.mozFullScreenElement:e.webkitFullscreenElement?null!==e.webkitFullscreenElement:e.msFullscreenElement?null!==e.msFullscreenElement:void 0}()?function(){var e=document.documentElement;if(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(e){}}():function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen()}()},Graphics.inScreen=function(e,n){return e.x>=t.center.x-game.halfScreenX/game.scale-n&&e.x<=t.center.x+game.halfScreenX/game.scale+n&&e.y>=t.center.y-game.halfScreenY/game.scale-n&&e.y<=t.center.y+game.halfScreenY/game.scale+n};var g=function(){Mobs.updateDoodads(),t.lastOverdraw.x=t.position.x,t.lastOverdraw.y=t.position.y,n.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var r,o=t.position.x-config.overdraw/game.scale/2,s=t.position.y-config.overdraw/game.scale/2,a=-o*game.scale,l=-s*game.scale,u=(-o-16384)*game.scale,c=(-s-8192)*game.scale;for(r of["sea","forest","sand","rock"])n[r].tilePosition.set(a,l);for(r of["sea","sand","rock"])n[r+"_mask"].position.set(u,c);null!=n.polygons&&null!=n.polygons.position&&n.polygons.position.set(-o*game.scale,-s*game.scale),t.lastOverdrawTime=game.time,e.render(i.sea,n.render),e.render(i.map,n.render)};Graphics.render=function(){e.render(i.shadows,n.shadows,!0),e.render(i.hudEnergy,r.hudTextureEnergy,!0),e.render(i.hudHealth,r.hudTextureHealth,!0),e.render(i.game)}}(),function(){var e=null,t=null,n=!1,r="",i=!1,o=null,s=-1,a=-1,l=0,u={},c=0,h=0,d=0,p=!1,f=2e3,g=2e3;Network.sendKey=function(e,r){if(game.state==Network.STATE.PLAYING){h++;var i={c:P.KEY,seq:h,key:S[e],state:r};null!=game.spectatingID&&r&&("RIGHT"==e?Network.spectatePrev():"LEFT"==e&&Network.spectateNext()),E(i),t&&n&&E(i,!0)}},Network.sendChat=function(e){game.state==Network.STATE.PLAYING&&E({c:P.CHAT,text:e})},Network.sendWhisper=function(e,t){game.state==Network.STATE.PLAYING&&E({c:P.WHISPER,id:e,text:t})},Network.sendSay=function(e){game.state==Network.STATE.PLAYING&&E({c:P.SAY,text:e})},Network.sendTeam=function(e){game.state==Network.STATE.PLAYING&&E({c:P.TEAMCHAT,text:e})},Network.sendCommand=function(e,t){game.state==Network.STATE.PLAYING&&("flag"===e&&(game.lastFlagSet=t),E({c:P.COMMAND,com:e,data:t}))},Network.voteMute=function(e){game.state==Network.STATE.PLAYING&&E({c:P.VOTEMUTE,id:e})},Network.force=function(e){var t;Players.network(A.PLAYER_UPDATE,e);for(t in e.players)Players.network(A.PLAYER_UPDATE,e.players[t]);for(t in e.mobs)Mobs.network(e.mobs[t]);var n=new Vector(e.posX,e.posY);Particles.spiritShockwave(n),Sound.effectRepel(n)},Network.getScores=function(){game.state==Network.STATE.PLAYING&&E({c:P.SCOREDETAILED})},Network.resizeHorizon=function(){game.state==Network.STATE.PLAYING&&E({c:P.HORIZON,horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale)})},Network.detectConnectivity=function(){game.lagging=game.timeNetwork-d>1300},Network.shutdown=function(){null!=o&&clearInterval(o),null!=e&&e.close(),null!=t&&t.close(),n=!1,i=!1,s=-1,a=-1,l=0,u={},c=0,h=0,d=0,p=!1,f=2e3,g=2e3},Network.receivedError=function(e){p=e},Network.spectateNext=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-1")},Network.spectatePrev=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-2")},Network.spectateForce=function(){game.state==Network.STATE.PLAYING&&(Players.amIAlive()?Network.sendCommand("spectate","-3"):Network.spectateNext())};var m=function(){game.lagging||game.state==Network.STATE.PLAYING&&(i?t&&n&&E({c:P.ACK},!0):E({c:P.ACK}),i=!i)},v=function(e){Math.abs(e-s)>36e5&&(s=e,a=performance.now(),l=0)},y=function(e){if(game.state==Network.STATE.PLAYING||e.c==A.LOGIN||e.c==A.ERROR){if((e.c==A.PLAYER_UPDATE||e.c==A.PLAYER_FIRE||e.c==A.EVENT_BOOST||e.c==A.EVENT_BOUNCE)&&e.id==game.myID||e.c==A.PING){if(e.c!=A.PING&&_(e))return;game.timeNetwork=performance.now(),d=game.timeNetwork,function(e){if(game.jitter=0,-1!=s){v(e);var t=game.timeNetwork,n=e-s-(t-a),r=n-(l=.8*l+n/5);Math.abs(r)<100&&(game.jitter=r)}}(e.clock/100)}else game.timeNetwork=performance.now(),d=game.timeNetwork,null!=e.clock&&function(e){-1!=s&&(v(e),game.jitter=e-s-(game.timeNetwork-a)-l)}(e.clock/100);switch(e.c){case A.PLAYER_UPDATE:case A.PLAYER_FIRE:case A.CHAT_SAY:case A.PLAYER_RESPAWN:case A.PLAYER_FLAG:case A.EVENT_BOOST:case A.EVENT_BOUNCE:if(Players.network(e.c,e),e.c===A.PLAYER_FIRE){for(var t=0;t<e.projectiles.length;t++)e.projectiles[t].c=A.PLAYER_FIRE,Mobs.add(e.projectiles[t]);e.projectiles.length>0&&Sound.missileLaunch(new Vector(e.projectiles[0].posX,e.projectiles[0].posY),e.projectiles[0].type)}break;case A.LOGIN:!function(e){o=setInterval(m,50),game.myID=e.id,game.myTeam=e.team,game.myToken=e.token,game.state=Network.STATE.PLAYING,game.roomName=e.room,game.gameType=e.type,game.spectatingID=null,game.myLevel=0,Games.prep(),s=e.clock/100,a=performance.now(),x()}(e),UI.loggedIn(e);for(t=0;t<e.players.length;t++)Players.add(e.players[t],!0);break;case A.ERROR:UI.errorHandler(e);break;case A.PLAYER_NEW:Players.add(e);break;case A.PLAYER_LEAVE:Players.destroy(e.id);break;case A.PLAYER_TYPE:Players.changeType(e);break;case A.PLAYER_HIT:Players.impact(e),200!=e.type&&Mobs.destroy(e);break;case A.PLAYER_KILL:Players.kill(e);break;case A.PLAYER_UPGRADE:UI.updateUpgrades([e.speed,e.defense,e.energy,e.missile],e.upgrades,e.type);break;case A.PLAYER_POWERUP:Players.powerup(e);break;case A.PLAYER_LEVEL:Players.updateLevel(e);break;case A.PLAYER_RETEAM:for(t=0;t<e.players.length;t++)Players.reteam(e.players[t]);break;case A.EVENT_REPEL:Network.force(e);break;case A.EVENT_LEAVEHORIZON:0==e.type?Players.leaveHorizon(e):Mobs.destroy(e);break;case A.EVENT_STEALTH:Players.stealth(e);break;case A.MOB_UPDATE:case A.MOB_UPDATE_STATIONARY:Mobs.network(e);break;case A.MOB_DESPAWN:Mobs.despawn(e);break;case A.MOB_DESPAWN_COORDS:Mobs.destroy(e);break;case A.GAME_FLAG:Games.networkFlag(e);break;case A.GAME_PLAYERSALIVE:Games.playersAlive(e.players);break;case A.SCORE_UPDATE:UI.newScore(e);break;case A.SCORE_BOARD:UI.scoreboardUpdate(e.data,e.rankings,config.maxScoreboard),Players.updateBadges(e.data);break;case A.SCORE_DETAILED:case A.SCORE_DETAILED_CTF:case A.SCORE_DETAILED_BTR:UI.updateScore(e);break;case A.PING:!function(e){E({c:P.PONG,num:e})}(e.num);break;case A.PING_RESULT:UI.updateStats(e);break;case A.CHAT_PUBLIC:if(config.mobile)return;Players.chat(e);break;case A.CHAT_TEAM:if(config.mobile)return;Players.teamChat(e);break;case A.CHAT_WHISPER:if(config.mobile)return;Players.whisper(e);break;case A.CHAT_VOTEMUTEPASSED:if(config.mobile)return;Players.votemutePass(e);break;case A.CHAT_VOTEMUTED:if(config.mobile)return;return void UI.chatMuted();case A.SERVER_MESSAGE:UI.serverMessage(e);break;case A.SERVER_CUSTOM:b(e);break;case A.GAME_SPECTATE:Games.spectate(e.id);break;case A.GAME_FIREWALL:Games.handleFirewall(e);break;case A.COMMAND_REPLY:UI.showCommandReply(e)}}},b=function(e){try{var t=JSON.parse(e.data)}catch(e){return}1==e.type?Games.showBTRWin(t):2==e.type&&Games.showCTFWin(t)},_=function(e){var t=performance.now(),n=e.c+"_"+e.clock+"_"+e.posX+"_"+e.posY+"_"+e.rot+"_"+e.speedX+"_"+e.speedY;if(t-c>15e3){for(var r in u)t-u[r]>3e4&&delete u[r];c=t}return null!=u[n]||(u[n]=t,!1)};Network.reconnectMessage=function(){game.reloading||UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Connection reset<br><span class="button" onclick="Network.reconnect()">RECONNECT</span>',6e5)},Network.reconnect=function(){UI.showMessage("alert","",100),Games.switchGame()},Network.setup=function(){if(DEVELOPMENT){r=-1!=document.domain.indexOf("192.168.")?"ws://"+document.domain+":8010/"+game.playPath:"ws://"+game.playHost+".airmash.devel:8000/"+game.playPath}else r="wss://game-"+game.playHost+".airma.sh/"+game.playPath;t&&n&&t.close(),(e=new WebSocket(r)).binaryType="arraybuffer",e.onopen=function(){E({c:P.LOGIN,protocol:game.protocol,name:game.myName,session:config.settings.session?config.settings.session:"none",horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale),flag:game.myFlag})},e.onclose=function(){null!=o&&clearInterval(o),game.state!==Network.STATE.CONNECTING&&(game.state=Network.STATE.CONNECTING,!1===p&&Network.reconnectMessage())},e.onerror=function(e){},e.onmessage=function(e){y(T(e.data))}};var x=function(){(t=new WebSocket(r)).binaryType="arraybuffer";t.onopen=function(){E({c:P.BACKUP,token:game.myToken},!0)},t.onclose=function(){n=!1},t.onerror=function(e){},t.onmessage=function(e){var t=T(e.data);t.c===A.BACKUP&&(n=!0),t.backup=!0,y(t)}},w=function(e,t){var n,r=1,i=[],o=M[e.c];if(null==o)return null;for(n=0;n<o.length;n++)switch(o[n][1]){case I.text:var s=Tools.encodeUTF8(e[o[n][0]]);i.push(s),r+=1+s.length;break;case I.array:case I.arraysmall:break;case I.uint8:r+=1;break;case I.uint16:r+=2;break;case I.uint32:case I.float32:r+=4;break;case I.float64:r+=8;break;case I.boolean:r+=1}var a=new ArrayBuffer(r),l=new DataView(a),u=0,c=1;for(l.setUint8(0,e.c,!0),n=0;n<o.length;n++)switch(o[n][1]){case I.text:var h=i[u].length;l.setUint8(c,h,!0),c+=1;for(var d=0;d<h;d++)l.setUint8(c+d,i[u][d],!0);i[u],u++,c+=h;break;case I.array:case I.arraysmall:break;case I.uint8:l.setUint8(c,e[o[n][0]],!0),c+=1;break;case I.uint16:l.setUint16(c,e[o[n][0]],!0),c+=2;break;case I.uint32:l.setUint32(c,e[o[n][0]],!0),c+=4;break;case I.float32:l.setFloat32(c,e[o[n][0]],!0),c+=4;break;case I.float64:l.setFloat64(c,e[o[n][0]],!0),c+=8;break;case I.boolean:l.setUint8(c,!1===e[o[n][0]]?0:1),c+=1}return a},T=function(e,t){var n=new DataView(e),r={c:n.getUint8(0,!0)},i=1,o=O[r.c];if(null==o)return null;for(var s=0;s<o.length;s++){var a=o[s][0];switch(o[s][1]){case I.text:case I.textbig:if(o[s][1]==I.text){var l=n.getUint8(i,!0);i+=1}else{l=n.getUint16(i,!0);i+=2}for(var u=new Uint8Array(l),c=0;c<l;c++)u[c]=n.getUint8(i+c,!0);var h=Tools.decodeUTF8(u);r[a]=h,i+=l;break;case I.array:case I.arraysmall:if(o[s][1]==I.arraysmall){var d=n.getUint8(i,!0);i+=1}else{d=n.getUint16(i,!0);i+=2}r[a]=[];for(var p=o[s][2],f=0;f<d;f++){for(var g={},m=0;m<p.length;m++){var v=p[m][0];switch(p[m][1]){case I.text:case I.textbig:if(p[m][1]==I.text){l=n.getUint8(i,!0);i+=1}else{l=n.getUint16(i,!0);i+=2}for(u=new Uint8Array(l),c=0;c<l;c++)u[c]=n.getUint8(i+c,!0);h=Tools.decodeUTF8(u);g[v]=h,i+=l;break;case I.uint8:g[v]=n.getUint8(i,!0),i+=1;break;case I.uint16:g[v]=n.getUint16(i,!0),i+=2;break;case I.uint24:var y=256*n.getUint16(i,!0);i+=2,r[v]=y+n.getUint8(i,!0),i+=1;break;case I.uint32:g[v]=n.getUint32(i,!0),i+=4;break;case I.float32:g[v]=n.getFloat32(i,!0),i+=4;break;case I.float64:g[v]=n.getFloat64(i,!0),i+=8;break;case I.boolean:g[v]=0!=n.getUint8(i,!0),i+=1;break;case I.speed:g[v]=Tools.decodeSpeed(n.getUint16(i,!0)),i+=2;break;case I.accel:g[v]=Tools.decodeAccel(n.getUint16(i,!0)),i+=2;break;case I.coordx:g[v]=Tools.decodeCoordX(n.getUint16(i,!0)),i+=2;break;case I.coordy:g[v]=Tools.decodeCoordY(n.getUint16(i,!0)),i+=2;break;case I.coord24:y=256*n.getUint16(i,!0);i+=2,r[v]=Tools.decodeCoord24(y+n.getUint8(i,!0)),i+=1;break;case I.rotation:g[v]=Tools.decodeRotation(n.getUint16(i,!0)),i+=2;break;case I.regen:g[v]=Tools.decodeRegen(n.getUint16(i,!0)),i+=2;break;case I.healthnergy:g[v]=Tools.decodeHealthnergy(n.getUint8(i,!0)),i+=1}}r[a].push(g)}break;case I.uint8:r[a]=n.getUint8(i,!0),i+=1;break;case I.uint16:r[a]=n.getUint16(i,!0),i+=2;break;case I.uint24:y=256*n.getUint16(i,!0);i+=2,r[a]=y+n.getUint8(i,!0),i+=1;break;case I.uint32:r[a]=n.getUint32(i,!0),i+=4;break;case I.float32:r[a]=n.getFloat32(i,!0),i+=4;break;case I.float64:r[a]=n.getFloat64(i,!0),i+=8;break;case I.boolean:r[a]=0!=n.getUint8(i,!0),i+=1;break;case I.speed:r[a]=Tools.decodeSpeed(n.getUint16(i,!0)),i+=2;break;case I.accel:r[a]=Tools.decodeAccel(n.getUint16(i,!0)),i+=2;break;case I.coordx:r[a]=Tools.decodeCoordX(n.getUint16(i,!0)),i+=2;break;case I.coordy:r[a]=Tools.decodeCoordY(n.getUint16(i,!0)),i+=2;break;case I.coord24:y=256*n.getUint16(i,!0);i+=2,r[a]=Tools.decodeCoord24(y+n.getUint8(i,!0)),i+=1;break;case I.rotation:r[a]=Tools.decodeRotation(n.getUint16(i,!0)),i+=2;break;case I.regen:r[a]=Tools.decodeRegen(n.getUint16(i,!0)),i+=2;break;case I.healthnergy:r[a]=Tools.decodeHealthnergy(n.getUint8(i,!0)),i+=1;break;default:return null}}return r},E=function(n,r){r?t.send(w(n)):e.send(w(n))},S={UP:1,DOWN:2,LEFT:3,RIGHT:4,FIRE:5,SPECIAL:6},I={text:1,textbig:2,array:3,arraysmall:4,uint8:5,uint16:6,uint24:7,uint32:8,float32:9,float64:10,boolean:11,speed:12,accel:13,coordx:14,coordy:15,coord24:16,rotation:17,healthnergy:18,regen:19},P={LOGIN:0,BACKUP:1,HORIZON:2,ACK:5,PONG:6,KEY:10,COMMAND:11,SCOREDETAILED:12,CHAT:20,WHISPER:21,SAY:22,TEAMCHAT:23,VOTEMUTE:24,LOCALPING:255},M={[P.LOGIN]:[["protocol",I.uint8],["name",I.text],["session",I.text],["horizonX",I.uint16],["horizonY",I.uint16],["flag",I.text]],[P.BACKUP]:[["token",I.text]],[P.HORIZON]:[["horizonX",I.uint16],["horizonY",I.uint16]],[P.ACK]:[],[P.PONG]:[["num",I.uint32]],[P.KEY]:[["seq",I.uint32],["key",I.uint8],["state",I.boolean]],[P.COMMAND]:[["com",I.text],["data",I.text]],[P.SCOREDETAILED]:[],[P.CHAT]:[["text",I.text]],[P.WHISPER]:[["id",I.uint16],["text",I.text]],[P.SAY]:[["text",I.text]],[P.TEAMCHAT]:[["text",I.text]],[P.VOTEMUTE]:[["id",I.uint16]],[P.LOCALPING]:[["auth",I.uint32]]},A={LOGIN:0,BACKUP:1,PING:5,PING_RESULT:6,ACK:7,ERROR:8,COMMAND_REPLY:9,PLAYER_NEW:10,PLAYER_LEAVE:11,PLAYER_UPDATE:12,PLAYER_FIRE:13,PLAYER_HIT:14,PLAYER_RESPAWN:15,PLAYER_FLAG:16,PLAYER_KILL:17,PLAYER_UPGRADE:18,PLAYER_TYPE:19,PLAYER_POWERUP:20,PLAYER_LEVEL:21,PLAYER_RETEAM:22,GAME_FLAG:30,GAME_SPECTATE:31,GAME_PLAYERSALIVE:32,GAME_FIREWALL:33,EVENT_REPEL:40,EVENT_BOOST:41,EVENT_BOUNCE:42,EVENT_STEALTH:43,EVENT_LEAVEHORIZON:44,MOB_UPDATE:60,MOB_UPDATE_STATIONARY:61,MOB_DESPAWN:62,MOB_DESPAWN_COORDS:63,CHAT_PUBLIC:70,CHAT_TEAM:71,CHAT_SAY:72,CHAT_WHISPER:73,CHAT_VOTEMUTEPASSED:78,CHAT_VOTEMUTED:79,SCORE_UPDATE:80,SCORE_BOARD:81,SCORE_DETAILED:82,SCORE_DETAILED_CTF:83,SCORE_DETAILED_BTR:84,SERVER_MESSAGE:90,SERVER_CUSTOM:91},O={[A.LOGIN]:[["success",I.boolean],["id",I.uint16],["team",I.uint16],["clock",I.uint32],["token",I.text],["type",I.uint8],["room",I.text],["players",I.array,[["id",I.uint16],["status",I.uint8],["level",I.uint8],["name",I.text],["type",I.uint8],["team",I.uint16],["posX",I.coordx],["posY",I.coordy],["rot",I.rotation],["flag",I.uint16],["upgrades",I.uint8]]]],[A.BACKUP]:[],[A.PING]:[["clock",I.uint32],["num",I.uint32]],[A.PING_RESULT]:[["ping",I.uint16],["playerstotal",I.uint32],["playersgame",I.uint32]],[A.ACK]:[],[A.ERROR]:[["error",I.uint8]],[A.COMMAND_REPLY]:[["type",I.uint8],["text",I.textbig]],[A.PLAYER_NEW]:[["id",I.uint16],["status",I.uint8],["name",I.text],["type",I.uint8],["team",I.uint16],["posX",I.coordx],["posY",I.coordy],["rot",I.rotation],["flag",I.uint16],["upgrades",I.uint8]],[A.PLAYER_LEAVE]:[["id",I.uint16]],[A.PLAYER_UPDATE]:[["clock",I.uint32],["id",I.uint16],["keystate",I.uint8],["upgrades",I.uint8],["posX",I.coord24],["posY",I.coord24],["rot",I.rotation],["speedX",I.speed],["speedY",I.speed]],[A.PLAYER_FIRE]:[["clock",I.uint32],["id",I.uint16],["energy",I.healthnergy],["energyRegen",I.regen],["projectiles",I.arraysmall,[["id",I.uint16],["type",I.uint8],["posX",I.coordx],["posY",I.coordy],["speedX",I.speed],["speedY",I.speed],["accelX",I.accel],["accelY",I.accel],["maxSpeed",I.speed]]]],[A.PLAYER_SAY]:[["id",I.uint16],["text",I.text]],[A.PLAYER_RESPAWN]:[["id",I.uint16],["posX",I.coord24],["posY",I.coord24],["rot",I.rotation],["upgrades",I.uint8]],[A.PLAYER_FLAG]:[["id",I.uint16],["flag",I.uint16]],[A.PLAYER_HIT]:[["id",I.uint16],["type",I.uint8],["posX",I.coordx],["posY",I.coordy],["owner",I.uint16],["players",I.arraysmall,[["id",I.uint16],["health",I.healthnergy],["healthRegen",I.regen]]]],[A.PLAYER_KILL]:[["id",I.uint16],["killer",I.uint16],["posX",I.coordx],["posY",I.coordy]],[A.PLAYER_UPGRADE]:[["upgrades",I.uint16],["type",I.uint8],["speed",I.uint8],["defense",I.uint8],["energy",I.uint8],["missile",I.uint8]],[A.PLAYER_TYPE]:[["id",I.uint16],["type",I.uint8]],[A.PLAYER_POWERUP]:[["type",I.uint8],["duration",I.uint32]],[A.PLAYER_LEVEL]:[["id",I.uint16],["type",I.uint8],["level",I.uint8]],[A.PLAYER_RETEAM]:[["players",I.array,[["id",I.uint16],["team",I.uint16]]]],[A.GAME_FLAG]:[["type",I.uint8],["flag",I.uint8],["id",I.uint16],["posX",I.coord24],["posY",I.coord24],["blueteam",I.uint8],["redteam",I.uint8]],[A.GAME_SPECTATE]:[["id",I.uint16]],[A.GAME_PLAYERSALIVE]:[["players",I.uint16]],[A.GAME_FIREWALL]:[["type",I.uint8],["status",I.uint8],["posX",I.coordx],["posY",I.coordy],["radius",I.float32],["speed",I.float32]],[A.EVENT_REPEL]:[["clock",I.uint32],["id",I.uint16],["posX",I.coordx],["posY",I.coordy],["rot",I.rotation],["speedX",I.speed],["speedY",I.speed],["energy",I.healthnergy],["energyRegen",I.regen],["players",I.arraysmall,[["id",I.uint16],["keystate",I.uint8],["posX",I.coordx],["posY",I.coordy],["rot",I.rotation],["speedX",I.speed],["speedY",I.speed],["energy",I.healthnergy],["energyRegen",I.regen],["playerHealth",I.healthnergy],["playerHealthRegen",I.regen]]],["mobs",I.arraysmall,[["id",I.uint16],["type",I.uint8],["posX",I.coordx],["posY",I.coordy],["speedX",I.speed],["speedY",I.speed],["accelX",I.accel],["accelY",I.accel],["maxSpeed",I.speed]]]],[A.EVENT_BOOST]:[["clock",I.uint32],["id",I.uint16],["boost",I.boolean],["posX",I.coord24],["posY",I.coord24],["rot",I.rotation],["speedX",I.speed],["speedY",I.speed],["energy",I.healthnergy],["energyRegen",I.regen]],[A.EVENT_BOUNCE]:[["clock",I.uint32],["id",I.uint16],["keystate",I.uint8],["posX",I.coord24],["posY",I.coord24],["rot",I.rotation],["speedX",I.speed],["speedY",I.speed]],[A.EVENT_STEALTH]:[["id",I.uint16],["state",I.boolean],["energy",I.healthnergy],["energyRegen",I.regen]],[A.EVENT_LEAVEHORIZON]:[["type",I.uint8],["id",I.uint16]],[A.MOB_UPDATE]:[["clock",I.uint32],["id",I.uint16],["type",I.uint8],["posX",I.coordx],["posY",I.coordy],["speedX",I.speed],["speedY",I.speed],["accelX",I.accel],["accelY",I.accel],["maxSpeed",I.speed]],[A.MOB_UPDATE_STATIONARY]:[["id",I.uint16],["type",I.uint8],["posX",I.float32],["posY",I.float32]],[A.MOB_DESPAWN]:[["id",I.uint16],["type",I.uint8]],[A.MOB_DESPAWN_COORDS]:[["id",I.uint16],["type",I.uint8],["posX",I.coordx],["posY",I.coordy]],[A.SCORE_UPDATE]:[["id",I.uint16],["score",I.uint32],["earnings",I.uint32],["upgrades",I.uint16],["totalkills",I.uint32],["totaldeaths",I.uint32]],[A.SCORE_BOARD]:[["data",I.array,[["id",I.uint16],["score",I.uint32],["level",I.uint8]]],["rankings",I.array,[["id",I.uint16],["x",I.uint8],["y",I.uint8]]]],[A.SCORE_DETAILED]:[["scores",I.array,[["id",I.uint16],["level",I.uint8],["score",I.uint32],["kills",I.uint16],["deaths",I.uint16],["damage",I.float32],["ping",I.uint16]]]],[A.SCORE_DETAILED_CTF]:[["scores",I.array,[["id",I.uint16],["level",I.uint8],["captures",I.uint16],["score",I.uint32],["kills",I.uint16],["deaths",I.uint16],["damage",I.float32],["ping",I.uint16]]]],[A.SCORE_DETAILED_BTR]:[["scores",I.array,[["id",I.uint16],["level",I.uint8],["alive",I.boolean],["wins",I.uint16],["score",I.uint32],["kills",I.uint16],["deaths",I.uint16],["damage",I.float32],["ping",I.uint16]]]],[A.CHAT_TEAM]:[["id",I.uint16],["text",I.text]],[A.CHAT_PUBLIC]:[["id",I.uint16],["text",I.text]],[A.CHAT_SAY]:[["id",I.uint16],["text",I.text]],[A.CHAT_WHISPER]:[["from",I.uint16],["to",I.uint16],["text",I.text]],[A.CHAT_VOTEMUTEPASSED]:[["id",I.uint16]],[A.CHAT_VOTEMUTED]:[],[A.SERVER_MESSAGE]:[["type",I.uint8],["duration",I.uint32],["text",I.textbig]],[A.SERVER_CUSTOM]:[["type",I.uint8],["data",I.textbig]]};Network.KEYPACKET=S,Network.KEYLOOKUP={1:"UP",2:"DOWN",3:"LEFT",4:"RIGHT",5:"FIRE",6:"SPECIAL"},Network.CLIENTPACKET=P,Network.SERVERPACKET=A,Network.STATE={LOGIN:1,CONNECTING:2,PLAYING:3}}(),function(){var e={},t={},n={},r=null,i=0,o=2*Math.PI,s=null,a=!1,l={},u=!1,c=null,h=0,d={LEFT:["LEFT","A"],RIGHT:["RIGHT","D"],UP:["UP","W"],DOWN:["DOWN","S"],STRAFELEFT:["Q"],STRAFERIGHT:["E"],FIRE:["SPACE"],SPECIAL:["CTRL","SHIFT"],SHOWSCORE:["TAB"],MAINMENU:["F1"],SHOWGAMES:["F2"],FULLSCREEN:["F"],MINIMIZECHAT:["PGDOWN"],MAXIMIZECHAT:["PGUP"],SAY:["GRAVE"],TEAM:["T"],REPLY:["R"],SPECTATE:["V"],UPGRADE1:["1"],UPGRADE2:["2"],UPGRADE3:["3"],UPGRADE4:["4"],SOUND:["G"],HELP:["H"],INVITE:["I"],MOUSEMODE:["M"]},p={},f={LEFT:!0,RIGHT:!0,UP:!0,DOWN:!0,FIRE:!0,SPECIAL:!0,STRAFELEFT:!0,STRAFERIGHT:!0},g={},m={MAINMENU:!0,FULLSCREEN:!0,INVITE:!0,SOUND:!0,SHOWSCORE:!0,SHOWGAMES:!0,HELP:!0},v=[["Forward","UP"],["Backward","DOWN"],["Turn Left","LEFT"],["Turn Right","RIGHT"],["Fire","FIRE"],["Special","SPECIAL"],["Strafe Left","STRAFELEFT"],["Strafe Right","STRAFERIGHT"],[""],["Spectate","SPECTATE"],["Upgrade Speed","UPGRADE1"],["Upgrade Defense","UPGRADE2"],["Upgrade Energy","UPGRADE3"],["Upgrade Missiles","UPGRADE4"],["Scoreboard","SHOWSCORE"],["Main Menu","MAINMENU"],["Show Games","SHOWGAMES"],["Fullscreen","FULLSCREEN"],["Maximize Chat","MAXIMIZECHAT"],["Minimize Chat","MINIMIZECHAT"],[""],["In-game Say","SAY"],["Team Chat","TEAM"],["Reply","REPLY"],["Toggle Sound","SOUND"],["Help","HELP"],["Invite Friends","INVITE"],["Mouse Mode","MOUSEMODE"]],y={},b={BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS:20,SPACE:32,PGUP:33,PGDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,WINDOWL:91,WINDOWR:92,SELECT:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,"*":106,"+":107,"-":109,DECIMAL:110,"/":111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL:145,":":186,"=":187,",":188,"-":189,".":190,"/":191,GRAVE:192,"[":219,"\\":220,"]":221,QUOTE:222},_=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"],x=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"];Input.setup=function(){for(var e in b)y[b[e]]=e;p=JSON.parse(JSON.stringify(d)),I(),M(!0),$(window).on("keydown",w),$(window).on("keyup",T),$(window).on("gamepadconnected",function(e){UI.showMessage("alert",'<span class="info">GAMEPAD CONNECTED</span>'+UI.escapeHTML(e.originalEvent.gamepad.id),3e3),a=!0,S()}),$(window).on("gamepaddisconnected",function(e){UI.showMessage("alert",'<span class="info">GAMEPAD DISCONNECTED</span>'+UI.escapeHTML(e.originalEvent.gamepad.id),3e3),a=!1,S()})};var w=function(r){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var i=r.which;if(72!=i&&UI.hideHelp(),null!=c&&P(i))r.preventDefault();else{var o=Input.getBind(i);if(!E(i))return null==f[o]?(n[i]||(n[i]=!0,UI.controlKey(i,o,!0)),r.preventDefault(),!1):(e[o]||(e[o]=!0,C(o)),t[i]||(t[i]=!0),r.preventDefault(),!1)}}},T=function(r){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var i=r.which,o=Input.getBind(i);if(null==f[o]&&n[i]&&(n[i]=!1),!E(i))return e[o]&&(e[o]=!1,R(o)),t[i]&&(t[i]=!1),r.preventDefault(),!1}},E=function(e,t){return!!UI.chatBoxOpen()&&(9!=e&&27!=e&&13!=e&&38!=e&&40!=e&&37!=e&&39!=e&&112!=e&&113!=e&&114!=e&&115!=e&&116!=e&&117!=e&&118!=e&&119!=e&&120!=e&&121!=e&&122!=e&&123!=e)},S=function(){l={forward:!0,left:!1,right:!1,up:!1,down:!1,fire:!1,special:!1,angle:0,force:0}};Input.toggleKeybinds=function(){u?Input.closeKeybinds():Input.openKeybinds()},Input.getBind=function(e){var t=g[e];return null==t?null:t},Input.bindKey=function(e,t,n){null==c&&(c=t,h=n,$(e.target).html("press key"))},Input.closeBind=function(){null!=c&&(M(),c=null)},Input.resetBinds=function(){d=JSON.parse(JSON.stringify(p)),Tools.removeSetting("keybinds"),c=null,M()};var I=function(){if(null!=config.settings.keybinds)for(var e in config.settings.keybinds)d[e]=JSON.parse(JSON.stringify(config.settings.keybinds[e]))},P=function(e){var t=y[e];if(27==e&&(t=""),null!=t){for(var n in d)d[n][0]==t&&(d[n][0]=""),d[n].length>1&&d[n][1]==t&&(d[n][1]="");d[c][h]=t;for(n in d)d[n].length>1&&""==d[n][0]&&""!=d[n][1]&&(d[n]=[d[n][1]]),2==d[n].length&&""===d[n][1]&&d[n].splice(-1,1);return M(),function(){var e={},t="";for(var n in d)null!=p[n]&&(t=JSON.stringify(d[n]))!==JSON.stringify(p[n])&&(e[n]=JSON.parse(t));Object.keys(e).length>0?Tools.setSettings({keybinds:e}):Tools.removeSetting("keybinds")}(),c=null,!0}return!1},M=function(e){var t="",n="",r="",i=null;t+='<div class="left-binds">';for(var o=0;o<v.length;o++)null!=v[o][0]&&(""!=v[o][0]?(null==(i=d[v[o][1]])?(n="&nbsp;",r="&nbsp;"):(""==(n=i[0])&&(n="&nbsp;"),""==(r=1==i.length?"":i[1])&&(r="&nbsp;")),t+='<div class="item"><div class="name">'+v[o][0]+'</div><div class="bind'+("&nbsp;"==n?" blank":"")+'" onclick="Input.bindKey(event,\''+v[o][1]+"',0)\">"+n+'</div><div class="bind'+("&nbsp;"==r?" blank":"")+'" onclick="Input.bindKey(event,\''+v[o][1]+"',1)\">"+r+"</div></div>",13==o&&(t+='</div><div class="right-binds">')):t+='<div class="item empty"></div>');t+="</div>",null==e&&$("#keybinds-list").html(t),g={};o=0;var s=0;for(var a in d){for(o=0;o<d[a].length;o++)null!=(s=b[d[a][o]])&&(g[s]=a);null!=m[a]&&$("#keybind-"+a.toLowerCase()).html(""==d[a]?"&nbsp;":"("+d[a]+")")}};Input.openKeybinds=function(){config.mobile||u||(UI.closeAllPanels("keybinds"),M(),UI.showPanel("#keybinds"),u=!0)},Input.closeKeybinds=function(){u&&(UI.hidePanel("#keybinds",u),u=!1,c=null)},Input.update=function(){if(a&&null!=navigator.getGamepads){var e=navigator.getGamepads();if(null!=e&&null!=e.length&&0!=e.length&&null!=e[0]){var t=e[0];if(!(t.buttons.length<16)){var n=t.buttons[12].pressed,r=t.buttons[13].pressed,i=t.buttons[15].pressed,s=t.buttons[14].pressed,u=t.buttons[0].pressed||t.buttons[2].pressed,c=t.buttons[1].pressed||t.buttons[3].pressed;l.up!=n&&(A("UP",n),l.up=n),l.down!=r&&(A("DOWN",r),l.down=r),l.right!=i&&(A("RIGHT",i),l.right=i),l.left!=s&&(A("LEFT",s),l.left=s),l.fire!=u&&(A("FIRE",u),l.fire=u),l.special!=c&&(A("SPECIAL",c),l.special=c);var h=new Vector(t.axes[1],t.axes[0]),d=h.length(),p=-h.angle()+Math.PI/2,f=p=(p%o+o)%o;d>.2?(l.forward=!0,O(f,d)):(l.forward&&!n&&A("UP",!1),l.forward=!1)}}else a=!1}},Input.unpressKey=function(e){delete n[e]},Input.keyState=function(t){return e[t]},Input.clearKeys=function(n){if(game.state===Network.STATE.PLAYING){for(var r of _)if(e[r]){if(n&&(t[38]||t[40]||t[37]||t[39]))continue;e[r]=!1,R(r)}for(var i in t)(!n||38!=i&&40!=i&&37!=i&&39!=i)&&(t[i]=!1)}},Input.touchCloseAll=function(){game.state==Network.STATE.LOGIN?(Games.closeDropdowns(),UI.closeLogin()):game.state==Network.STATE.PLAYING&&(UI.closeAllPanels(),UI.closeTooltip())},Input.addTouchRejection=function(e){$(e).on("touchstart",function(e){e.stopPropagation()}),$(e).on("touchmove",function(e){e.preventDefault(),e.stopPropagation()})},Input.setupLogin=function(){$(window).on("touchstart",function(e){Input.touchCloseAll(),e.preventDefault()}),Input.addTouchRejection("#logon,#big-message,#loginselector")},Input.setupTouch=function(){$(window).on("touchcancel",function(e){null!=s&&s.processOnEnd(e)});Input.addTouchRejection("#settings,#sidebar,#roomnamecontainer,#menu,#gameselector,#mainmenu,#scoredetailed,#invitefriends,#msg-alert,#msg-information");$("body").append('<div id="touch-joystick"></div><div id="touch-fire"><div class="circle"></div></div><div id="touch-special"><div class="circle"></div></div>'),$("#touch-fire").on("touchstart",function(e){A("FIRE",!0),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),e.preventDefault()}),$("#touch-fire").on("touchend",function(e){A("FIRE",!1),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),e.preventDefault()}),$("#touch-special").on("touchstart",function(e){A("SPECIAL",!0),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),e.preventDefault()}),$("#touch-special").on("touchend",function(e){A("SPECIAL",!1),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),e.preventDefault()});var e={zone:$("#touch-joystick")[0],mode:"static",position:{bottom:"50%",left:"50%"}};(s=nipplejs.create(e)).on("end",Input.touchEnd),s.on("move",Input.touchMove)},Input.toggleMouse=function(e){if(!config.mobile)if($(window).off("mousedown"),$(window).off("mouseup"),config.mouse=!config.mouse,config.mouse){if($(window).on("mousedown",Input.mouseDown),$(window).on("mouseup",Input.mouseUp),e)return;UI.showMessage("alert",'<span class="info">MOUSE MODE</span>Enabled<div class="mousemode"><span class="info">LEFT CLICK</span>Fire&nbsp;&nbsp;&nbsp;<span class="info">RIGHT CLICK</span>Special&nbsp;&nbsp;&nbsp;<span class="info">WASD</span>Move</div>',7e3),Tools.setSettings({mousemode:!0})}else UI.showMessage("alert",'<span class="info">MOUSE MODE</span>Disabled',3e3),Tools.removeSetting("mousemode")},Input.mouseDown=function(e){var t=e.originalEvent;if((0==t.button||2==t.button)&&null!=t.target.tagName&&"canvas"==t.target.tagName.toLowerCase()){var n=0==t.button?"FIRE":"SPECIAL";A(n,!0),e.preventDefault()}},Input.mouseUp=function(e){var t=e.originalEvent;if(0==t.button||2==t.button)if(null!=t.target.tagName&&"canvas"==t.target.tagName.toLowerCase()){var n=0==t.button?"FIRE":"SPECIAL";A(n,!1),e.preventDefault()}else A("FIRE",!1),A("SPECIAL",!1)};var A=function(t,n){(e[t]==!n||n&&null==e[t])&&(Network.sendKey(t,n),e[t]=n)},O=function(e,t){var n=Players.getMe();if(null!=n){var o=e-n.rot;o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);var s=Math.round(Math.abs(o)/(60*config.ships[n.type].turnFactor)*1e3);if(!((s-=Math.round(game.ping))<10||game.time-i<100)){null!=r&&clearTimeout(r),i=game.time;var a=o>0?"RIGHT":"LEFT",l=o<=0?"RIGHT":"LEFT";A("UP",!(null!=t&&t<.5)),A(a,!0),A(l,!1),r=setTimeout(function(){A(a,!1)},s)}}};Input.touchMove=function(e,t){var n=-t.angle.radian+Math.PI/2,r=n=(n%o+o)%o;O(r,t.force)},Input.touchEnd=function(e,t){A("UP",!1),A("LEFT",!1),A("RIGHT",!1)},Input.gameFocus=function(){game.focus=!0},Input.gameBlur=function(){game.focus=!1,Input.clearKeys()};var C=function(e){if(3==game.myType&&("STRAFELEFT"===e||"STRAFERIGHT"===e))return C("SPECIAL"),void C("STRAFELEFT"===e?"LEFT":"RIGHT");-1!==x.indexOf(e)&&Network.sendKey(e,!0)},R=function(t){if(3!=game.myType||"STRAFELEFT"!==t&&"STRAFERIGHT"!==t)-1!==_.indexOf(t)&&Network.sendKey(t,!1);else{R("STRAFELEFT"===t?"LEFT":"RIGHT");e["STRAFERIGHT"===t?"STRAFELEFT":"STRAFERIGHT"]||R("SPECIAL")}}}();class Player{constructor(e,t){this.id=e.id,this.status=e.status,this.level=null==e.level||0==e.level?null:e.level,this.reel=1==e.reel,this.name=e.name,this.type=e.type,this.team=e.team,this.pos=new Vector(e.posX,e.posY),this.lowResPos=new Vector(e.posX,e.posY),this.speed=Vector.zero(),this.speedupgrade=0,this.rot=e.rot,this.flag=e.flag,this.speedLength=0,this.sprites={},this.randomness=Tools.rand(0,1e5),this.keystate={},this.lastTick=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.stealthed=!1,this.alpha=1,this.scale=1,this.powerups={shield:!1,rampage:!1},this.powerupsShown={shield:!1,rampage:!1},this.powerupActive=!1,this.render=!0,this.hidden=!1,this.culled=!1,this.timedout=!1,this.reducedFactor=!1,this.lastPacket=game.timeNetwork,this.state={thrustLevel:0,thrustDir:0,bubble:!1,bubbleProgress:0,bubbleFade:0,bubbleTime:0,bubbleTextWidth:0,hasBadge:!1,badge:0,stealthLevel:0,scaleLevel:1,powerupAngle:0,powerupFade:0,powerupFadeState:0,lastBounceSound:0},this.setupGraphics(),0==this.status?(Tools.decodeUpgrades(this,e.upgrades),this.updatePowerups()):(this.hidden=!0,this.me()&&UI.visibilityHUD(!1)),this.reel?(this._prevPos=null,this._offset=null):this.visibilityUpdate(),(!t&&this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.me()&&(game.myType=e.type,UI.aircraftSelected(e.type))}setupGraphics(e){var t=null;switch(this.me()&&(t={layer:"aircraftme"}),this.sprites.powerup=Textures.init("powerupShield",{visible:!1,alpha:.75}),this.sprites.powerupCircle=Textures.init("powerupCircle",{visible:!1,alpha:.75}),this.type){case 1:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipRaptor",t),this.sprites.shadow=Textures.init("shipRaptorShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster=Textures.init("shipRaptorThruster"),this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall"),this.sprites.thrusterShadow=Textures.init("thrusterShadow");break;case 2:this.state.baseScale=.35,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipSpirit",t),this.sprites.shadow=Textures.init("shipSpiritShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 3:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipComanche",t),this.sprites.rotor=Textures.init("shipComancheRotor",t),this.sprites.shadow=Textures.init("shipComancheShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.rotorShadow=Textures.init("shipComancheRotorShadow",{scale:2*this.state.baseScale*(2.4/config.shadowScaling)});break;case 4:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipTornado",t),this.sprites.shadow=Textures.init("shipTornadoShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 5:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipProwler",t),this.sprites.shadow=Textures.init("shipProwlerShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow")}if(this.reel||e||(this.setupNameplate(),this.setupChatBubbles(),null!=this.level&&this.setupLevelPlate()),config.debug.collisions){this.col=new PIXI.Graphics;for(var n of config.ships[this.type].collisions)this.col.beginFill(16777215,.2),this.col.drawCircle(n[0],n[1],n[2]),this.col.endFill();game.graphics.layers.explosions.addChild(this.col)}}reteam(e){this.team=e,this.sprites.name.style=new PIXI.TextStyle(this.nameplateTextStyle()),UI.changeMinimapTeam(this.id,this.team)}nameplateTextStyle(){if(2==game.gameType)var e=1==this.team?"#4076E2":"#EA4242";else e=this.team==game.myTeam?"#FFFFFF":"#FFEC52";return{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"33px",fill:e,dropShadow:!0,dropShadowBlur:10,dropShadowDistance:0,padding:4}}setupNameplate(){var e="";2==game.gameType&&(e="  â "),this.sprites.name=new PIXI.Text(this.name+e,this.nameplateTextStyle()),this.sprites.name.scale.set(.5,.5),this.sprites.flag=Textures.sprite("flag_"+this.flag),this.sprites.flag.scale.set(.4,.4),this.sprites.flag.anchor.set(.5,.5),this.sprites.badge=Textures.sprite("badge_gold"),this.sprites.badge.scale.set(.3),this.sprites.badge.visible=!1,game.graphics.layers.playernames.addChild(this.sprites.badge),game.graphics.layers.playernames.addChild(this.sprites.flag),game.graphics.layers.playernames.addChild(this.sprites.name)}setupChatBubbles(){this.sprites.bubble=new PIXI.Container,this.sprites.bubbleLeft=Graphics.initSprite("chatbubbleleft",this.sprites.bubble,{scale:.5}),this.sprites.bubbleRight=Graphics.initSprite("chatbubbleright",this.sprites.bubble,{scale:.5}),this.sprites.bubbleCenter=Graphics.initSprite("chatbubblecenter",this.sprites.bubble,{scale:.5}),this.sprites.bubblePoint=Graphics.initSprite("chatbubblepoint",this.sprites.bubble,{scale:.5}),this.sprites.emote=Graphics.initSprite("emote_tf",this.sprites.bubble,{scale:.6,anchor:[.5,.5]}),this.sprites.bubbleText=new PIXI.Text("a",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"12px",fill:"white"}),this.sprites.bubble.addChild(this.sprites.bubbleText),this.sprites.bubble.visible=!1,this.sprites.bubble.pivot.set(.5,34),game.graphics.layers.bubbles.addChild(this.sprites.bubble)}visibilityUpdate(e){this.culled=!Graphics.inScreen(this.pos,128);var t=!(this.hidden||this.culled||this.timedout);if(e||this.render!=t){switch(this.sprites.sprite.visible=t,this.sprites.shadow.visible=t,this.sprites.flag.visible=t,this.sprites.name.visible=t,null!=this.sprites.level&&(this.sprites.level.visible=t,this.sprites.levelBorder.visible=t),this.sprites.badge.visible=this.state.hasBadge&&t,this.sprites.powerup.visible=this.powerupActive&&t,this.sprites.powerupCircle.visible=this.powerupActive&&t,this.type){case 1:this.sprites.thruster.visible=t,this.sprites.thrusterGlow.visible=t,this.sprites.thrusterShadow.visible=t;break;case 2:case 4:case 5:this.sprites.thruster1.visible=t,this.sprites.thruster1Glow.visible=t,this.sprites.thruster1Shadow.visible=t,this.sprites.thruster2.visible=t,this.sprites.thruster2Glow.visible=t,this.sprites.thruster2Shadow.visible=t;break;case 3:this.sprites.rotor.visible=t,this.sprites.rotorShadow.visible=t}this.render=t,t||Sound.clearThruster(this.id)}}stealth(e){this.lastPacket=game.timeNetwork,this.energy=e.energy,this.energyRegen=e.energyRegen,e.state?(this.stealthed=!0,this.state.stealthLevel=0,this.team!=game.myTeam&&(this.keystate.LEFT&&delete this.keystate.LEFT,this.keystate.RIGHT&&delete this.keystate.RIGHT)):this.unstealth()}unstealth(){this.stealthed=!1,this.state.stealthLevel=0,this.opacity(1)}opacity(e){this.alpha=e,this.sprites.sprite.alpha=e,this.sprites.shadow.alpha=e,this.sprites.flag.alpha=e,this.sprites.name.alpha=e,this.sprites.badge.alpha=e,this.sprites.powerup.alpha=.75*e,this.sprites.powerupCircle.alpha=.75*e,null!=this.sprites.level&&(this.sprites.level.alpha=e,this.sprites.levelBorder.alpha=.4*e),5==this.type&&(this.sprites.thruster1.alpha=e,this.sprites.thruster1Glow.alpha=e,this.sprites.thruster2.alpha=e,this.sprites.thruster2Glow.alpha=e)}kill(e){if(this.status=1,this.keystate={},this.pos.x=e.posX,this.pos.y=e.posY,this.speed=Vector.zero(),this.me()&&UI.resetPowerups(),this.resetPowerups(),this.hidden=!0,this.visibilityUpdate(),this.stealthed&&this.unstealth(),!this.culled&&!0!==e.spectate){switch(this.type){case 1:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));break;case 2:Particles.explosion(this.pos.clone(),Tools.rand(2,2.5),Tools.randInt(4,7));break;case 3:case 4:case 5:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3))}Graphics.shakeCamera(this.pos,this.me()?20:10),Sound.clearThruster(this.id),Sound.playerKill(this)}}me(){return game.myID==this.id}destroy(e){var t=this.me()?game.graphics.layers.aircraftme:game.graphics.layers.aircraft;switch(t.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.powerup.destroy(),this.sprites.powerupCircle.destroy(),this.type){case 1:game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.thrusters.removeChild(this.sprites.thrusterGlow),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.thrusterShadow.destroy();break;case 2:case 4:case 5:game.graphics.layers.thrusters.removeChild(this.sprites.thruster1,this.sprites.thruster2),game.graphics.layers.thrusters.removeChild(this.sprites.thruster1Glow,this.sprites.thruster2Glow),this.sprites.thruster1.destroy(),this.sprites.thruster2.destroy(),this.sprites.thruster1Glow.destroy(),this.sprites.thruster2Glow.destroy(),this.sprites.thruster1Shadow.destroy(),this.sprites.thruster2Shadow.destroy();break;case 3:t.removeChild(this.sprites.rotor),this.sprites.rotor.destroy(),game.graphics.layers.shadows.removeChild(this.sprites.rotorShadow),this.sprites.rotorShadow.destroy()}e&&!this.reel&&(game.graphics.layers.playernames.removeChild(this.sprites.badge,this.sprites.name,this.sprites.flag),null!=this.sprites.level&&(game.graphics.layers.playernames.removeChild(this.sprites.level,this.sprites.levelBorder),this.sprites.level.destroy(),this.sprites.levelBorder.destroy()),game.graphics.layers.bubbles.removeChild(this.sprites.bubble),this.sprites.badge.destroy(),this.sprites.name.destroy(),this.sprites.flag.destroy(),this.sprites.bubble.destroy({children:!0}))}sayBubble(e){this.state.bubbleTime=game.time,this.state.bubbleFade=0,this.state.bubble||(this.state.bubble=!0,this.state.bubbleProgress=0,this.sprites.bubble.visible=!0,this.sprites.bubble.alpha=0,this.sprites.bubble.scale.set(0,0)),this.sprites.bubble.cacheAsBitmap=!1;var t=UI.isEmote(e.text,!0);if(t){this.sprites.bubbleText.visible=!1,this.sprites.emote.texture=Textures.get("emote_"+t),this.sprites.emote.visible=!0;var n=26;this.sprites.emote.position.set(0,0)}else{this.sprites.bubbleText.visible=!0,this.sprites.emote.visible=!1,this.sprites.bubbleText.text=e.text;n=this.sprites.bubbleText.width;this.sprites.bubbleText.position.set(-n/2,-7)}this.sprites.bubbleLeft.position.set(-n/2-16,-21),this.sprites.bubbleRight.position.set(n/2+8,-21),this.sprites.bubbleCenter.position.set(-n/2-9,-21),this.sprites.bubbleCenter.scale.set(n/82+18/82,.5),this.sprites.bubblePoint.position.set(-9,18),this.sprites.bubble.cacheAsBitmap=!0,this.state.bubbleTextWidth=n}networkKey(e,t){this.lastPacket=game.timeNetwork,1==this.status&&this.revive(),null!=t.posX&&(this.reducedFactor=Tools.reducedFactor(),this.pos.x=t.posX,this.pos.y=t.posY,this.rot=t.rot,this.speed.x=t.speedX,this.speed.y=t.speedY);var n=this.stealthed;null!=t.keystate&&Tools.decodeKeystate(this,t.keystate),null!=t.upgrades&&(Tools.decodeUpgrades(this,t.upgrades),this.updatePowerups()),null!=t.energy&&(this.energy=t.energy,this.energyRegen=t.energyRegen),null!=t.boost&&(this.boost=t.boost),this.team!=game.myTeam&&(this.stealthed||n&&!this.stealthed)&&this.unstealth(),this.me()||!n||this.stealthed||this.unstealth(),t.c==Network.SERVERPACKET.EVENT_BOUNCE&&game.time-this.state.lastBounceSound>300&&(this.state.lastBounceSound=game.time,Sound.playerImpact(this.pos,this.type,this.speed.length()/config.ships[this.type].maxSpeed))}updateLevel(e){this.me()&&(1==e.type&&Games.showLevelUP(e.level),UI.updateMyLevel(e.level)),this.level=e.level,this.setupLevelPlate()}setupLevelPlate(){null==this.sprites.level?(this.sprites.level=new PIXI.Text(this.level+"",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"28px",fill:"rgb(200, 200, 200)",dropShadow:!0,dropShadowBlur:6,dropShadowDistance:0,padding:4}),this.sprites.level.scale.set(.5,.5),this.sprites.levelBorder=Textures.sprite("levelborder"),this.sprites.levelBorder.alpha=.4,game.graphics.layers.playernames.addChild(this.sprites.levelBorder),game.graphics.layers.playernames.addChild(this.sprites.level)):this.sprites.level.text=this.level+"",this.sprites.levelBorder.scale.set((this.sprites.level.width+10)/32,.65),this.sprites.level.visible=this.render,this.sprites.levelBorder.visible=this.render}powerup(e){UI.addPowerup(e.type,e.duration)}resetPowerups(){this.powerupActive&&(this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1),this.powerups.shield=!1,this.powerupsShown.shield=!1,this.powerups.rampage=!1,this.powerupsShown.rampage=!1,this.powerupActive=!1,this.state.powerupFade=0,this.state.powerupFadeState=0}updatePowerups(){var e=!1;this.powerups.shield!=this.powerupsShown.shield&&(this.powerupsShown.shield=this.powerups.shield,this.powerups.shield&&(this.sprites.powerup.texture=Textures.get("powerup_shield"),this.sprites.powerupCircle.tint=16777215),e=!0),this.powerups.rampage!=this.powerupsShown.rampage&&(this.powerupsShown.rampage=this.powerups.rampage,this.powerups.rampage&&(this.sprites.powerup.texture=Textures.get("powerup_rampage"),this.sprites.powerupCircle.tint=16712448),e=!0),e&&(this.powerupActive=this.powerups.shield||this.powerups.rampage,this.powerupActive?(this.state.powerupFade=0,this.state.powerupFadeState=0,this.sprites.powerup.visible=!0,this.sprites.powerupCircle.visible=!0):(this.powerupActive=!0,this.state.powerupFade=0,this.state.powerupFadeState=1))}impact(e,t,n,r){this.health=n,this.healthRegen=r,this.stealthed&&this.unstealth(),200!=e&&Mobs.explosion(t,e),this.me()&&0==this.status&&Graphics.shakeCamera(t,8)}changeType(e){this.type!=e.type&&(this.destroy(!1),this.type=e.type,this.setupGraphics(!0),this.visibilityUpdate(!0))}respawn(e){this.lastPacket=game.timeNetwork,this.status=0,this.keystate={},this.pos.x=e.posX,this.pos.y=e.posY,this.rot=e.rot,this.speed.x=0,this.speed.y=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.state.thrustLevel=0,this.state.thrustDir=0,this.hidden=!1,this.timedout=!1,this.visibilityUpdate(),this.me()&&UI.resetPowerups(),Tools.decodeUpgrades(this,e.upgrades),this.updatePowerups(),(this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.stealthed&&this.unstealth(),this.me()&&(game.myType=this.type,game.spectatingID=null,UI.aircraftSelected(this.type),UI.visibilityHUD(!0),UI.hideSpectator()),this.updateGraphics(1),Sound.playerRespawn(this)}revive(){this.status=0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.hidden=!1,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.stealthed&&this.unstealth()}changeFlag(e){this.flag=e.flag,this.sprites.flag.texture=Textures.get("flag_"+e.flag)}changeBadge(e){this.sprites.badge.texture=Textures.get(e)}updateNameplate(){if(!this.reel){var e=(this.sprites.name.width+this.sprites.flag.width+10)/2,t=this.pos.x-e+(this.state.hasBadge?12:0)-(null!=this.level?this.sprites.level.width/2+8:0),n=this.pos.y+this.state.nameplateDist*this.scale;this.sprites.name.position.set(t+40,n),this.sprites.flag.position.set(t+15,n+10),null!=this.level&&(this.sprites.level.position.set(t+2*e+13,n+2),this.sprites.levelBorder.position.set(t+2*e+7.75,n-.5)),this.state.hasBadge&&this.sprites.badge.position.set(t-28,n)}}updateBubble(){this.state.bubbleProgress+=.015*game.timeFactor,this.state.bubbleProgress>=1&&(this.state.bubbleProgress=1),game.time-this.state.bubbleTime>4e3?(this.state.bubbleFade+=.08*game.timeFactor,this.state.bubbleFade>=1&&(this.state.bubbleFade=1),this.sprites.bubble.scale.set(1+.2*this.state.bubbleFade),this.sprites.bubble.alpha=1*(1-this.state.bubbleFade),this.state.bubbleFade>=1&&(this.state.bubble=!1,this.sprites.bubble.visible=!1)):(this.sprites.bubble.scale.set(Tools.easing.outElastic(this.state.bubbleProgress,.5)),this.sprites.bubble.alpha=1);var e=(this.state.bubbleTextWidth+game.screenX)%2==0?.5:0,t=game.screenY%2==0?0:.5,n=this.state.nameplateDist*this.scale;this.powerupActive&&(n+=60),this.sprites.bubble.position.set(this.pos.x*game.scale+e,(this.pos.y-n)*game.scale+t)}detectTimeout(){if(!this.me()){var e=this.timedout;this.timedout=!game.lagging&&game.timeNetwork-this.lastPacket>3e3,this.timedout&&!e&&(this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}}leaveHorizon(){this.me()||this.timedout||(this.lastPacket=-1e4,this.timedout=!0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}update(e){if(this.reel)this.clientCalcs(e);else{if(this.detectTimeout(),this.visibilityUpdate(),!this.render)return this.health+=e*this.healthRegen,void(this.health>=1&&(this.health=1));if(!(!1!==this.reducedFactor&&(e-=this.reducedFactor,this.reducedFactor=!1,e<=0))){var t,n,r,i,o=e>.51?Math.round(e):1,s=e/o,a=2*Math.PI,l=this.boost?1.5:1;for(t=0;t<o;t++){this.energy+=s*this.energyRegen,this.energy>=1&&(this.energy=1),this.health+=s*this.healthRegen,this.health>=1&&(this.health=1),i=-999,this.strafe?(this.keystate.LEFT&&(i=this.rot-.5*Math.PI),this.keystate.RIGHT&&(i=this.rot+.5*Math.PI)):(this.keystate.LEFT&&(this.rot+=-s*config.ships[this.type].turnFactor),this.keystate.RIGHT&&(this.rot+=s*config.ships[this.type].turnFactor)),n=this.speed.x,r=this.speed.y,this.keystate.UP?-999==i?i=this.rot:i+=Math.PI*(this.keystate.RIGHT?-.25:.25):this.keystate.DOWN&&(-999==i?i=this.rot+Math.PI:i+=Math.PI*(this.keystate.RIGHT?.25:-.25)),-999!==i&&(this.speed.x+=Math.sin(i)*config.ships[this.type].accelFactor*s*l,this.speed.y-=Math.cos(i)*config.ships[this.type].accelFactor*s*l);var u=this.speed.length(),c=config.ships[this.type].maxSpeed*l*config.upgrades.speed.factor[this.speedupgrade],h=config.ships[this.type].minSpeed;this.powerups.rampage&&(c*=.75),this.flagspeed&&(c=5),u>c?this.speed.multiply(c/u):this.speed.x>h||this.speed.x<-h||this.speed.y>h||this.speed.y<-h?(this.speed.x*=1-config.ships[this.type].brakeFactor*s,this.speed.y*=1-config.ships[this.type].brakeFactor*s):(this.speed.x=0,this.speed.y=0),this.pos.x+=s*n+.5*(this.speed.x-n)*s*s,this.pos.y+=s*r+.5*(this.speed.y-r)*s*s,this.clientCalcs(s)}this.rot=(this.rot%a+a)%a,-1!=game.gameType?(this.pos.x<-16352&&(this.pos.x=-16352),this.pos.x>16352&&(this.pos.x=16352),this.pos.y<-8160&&(this.pos.y=-8160),this.pos.y>8160&&(this.pos.y=8160)):(this.pos.x<-16384&&(this.pos.x+=32768),this.pos.x>16384&&(this.pos.x-=32768),this.pos.y<-8192&&(this.pos.y+=16384),this.pos.y>8192&&(this.pos.y-=16384)),Sound.updateThruster(0,this)}}}clientCalcs(e){switch(this.type){case 1:case 2:case 4:case 5:var t=!1,n=!1,r=this.boost?1.5:1;!1!==(t=this.keystate.LEFT?.3:this.keystate.RIGHT?-.3:0)&&(this.state.thrustDir=Tools.converge(this.state.thrustDir,t,.1*e)),!1!==(n=this.keystate.UP?1:this.keystate.DOWN?-1:0)&&(this.state.thrustLevel=Tools.converge(this.state.thrustLevel,n*r,.2*e));break;case 3:this.state.thrustDir+=(.2+this.speed.length()/50)*e}this.culled||this.render&&(!this.stealthed&&this.health<.4&&Particles.planeDamage(this),!this.stealthed&&this.health<.2&&Particles.planeDamage(this),this.boost&&Particles.planeBoost(this,n>=0),5==this.type&&this.stealthed&&(this.state.stealthLevel+=.03*e,this.state.stealthLevel=Tools.clamp(this.state.stealthLevel,0,this.team==game.myTeam?.5:1),this.opacity(1-this.state.stealthLevel)),this.state.scaleLevel+=.005*e,this.state.scaleLevel>=1?(this.state.scaleLevel=1,this.scale=1):this.scale=Tools.easing.outElastic(this.state.scaleLevel,.5),this.powerupActive&&(this.state.powerupAngle+=.075*e,0==this.state.powerupFadeState?(this.state.powerupFade+=.05*e,this.state.powerupFade>=1&&(this.state.powerupFade=1)):(this.state.powerupFade+=.05*e,this.state.powerupFade>=1&&(this.powerupActive=!1,this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1))))}updateGraphics(e){var t=Tools.oscillator(.025,1e3,this.randomness)*this.scale,n=1.5*this.state.thrustLevel,r=this.rot,i=Graphics.shadowCoords(this.pos);if(Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,r,t*this.state.baseScale,t*this.state.baseScale),Graphics.transform(this.sprites.shadow,i.x,i.y,r,this.state.baseScale*(2.4/config.shadowScaling)*this.scale,this.state.baseScale*(2.4/config.shadowScaling)*this.scale),this.powerupActive){var o=.35*(0==this.state.powerupFadeState?2*(1-this.state.powerupFade)+1:1-this.state.powerupFade)*Tools.oscillator(.075,100,this.randomness),s=.75*(0==this.state.powerupFadeState?Tools.clamp(2*this.state.powerupFade,0,1):Tools.clamp(1-1.3*this.state.powerupFade,0,1))*this.alpha;Graphics.transform(this.sprites.powerup,this.pos.x,this.pos.y-80,0,o,o,s),Graphics.transform(this.sprites.powerupCircle,this.pos.x,this.pos.y-80,this.state.powerupAngle,1.35*o,1.35*o,s)}var a=Tools.oscillator(.1,.5,this.randomness),l=Math.abs(this.state.thrustLevel)<.01?0:this.state.thrustLevel/2+(this.state.thrustLevel>0?.5:-.5),u=Tools.clamp(2*Math.abs(this.state.thrustLevel)-.1,0,1);switch(this.type){case 1:Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-r)*(20*t),this.pos.y+Math.cos(-r)*(20*t),r+(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.5*a*l*this.scale,u),Graphics.transform(this.sprites.thrusterShadow,i.x+Math.sin(-r)*(20*t)/config.shadowScaling,i.y+Math.cos(-r)*(20*t)/config.shadowScaling,r+(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale*(4/config.shadowScaling),.5*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-r-.5*this.state.thrustDir)*(40*t),this.pos.y+Math.cos(-r-.5*this.state.thrustDir)*(40*t),null,1.5*n*this.scale,1*n*this.scale,.3*this.state.thrustLevel);break;case 2:this.state.thrustLevel<0&&(a*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-r-.5)*(32*t),this.pos.y+Math.cos(-r-.5)*(32*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale,.6*a*l*this.scale,u),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.5-r)*(32*t),this.pos.y+Math.cos(.5-r)*(32*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale,.6*a*l*this.scale,u),Graphics.transform(this.sprites.thruster1Shadow,i.x+Math.sin(-r-.5)*(32*t)/config.shadowScaling,i.y+Math.cos(-r-.5)*(32*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.5*a*l*this.scale*(4/config.shadowScaling),.6*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thruster2Shadow,i.x+Math.sin(.5-r)*(32*t)/config.shadowScaling,i.y+Math.cos(.5-r)*(32*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.5*a*l*this.scale*(4/config.shadowScaling),.6*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-r-.3)*(50*t),this.pos.y+Math.cos(-r-.3)*(50*t),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.3-r)*(50*t),this.pos.y+Math.cos(.3-r)*(50*t),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel);break;case 3:Graphics.transform(this.sprites.rotor,this.pos.x,this.pos.y,this.state.thrustDir,t*this.state.baseScale*2,t*this.state.baseScale*2,.8),Graphics.transform(this.sprites.rotorShadow,i.x,i.y,this.state.thrustDir,this.state.baseScale*(2.4/config.shadowScaling)*this.scale*2,this.state.baseScale*(2.4/config.shadowScaling)*this.scale*2);break;case 4:this.state.thrustLevel<0&&(a*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-r-.15)*(28*t),this.pos.y+Math.cos(-r-.15)*(28*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.5*a*l*this.scale,u),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.15-r)*(28*t),this.pos.y+Math.cos(.15-r)*(28*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.5*a*l*this.scale,u),Graphics.transform(this.sprites.thruster1Shadow,i.x+Math.sin(-r-.15)*(28*t)/config.shadowScaling,i.y+Math.cos(-r-.15)*(28*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale*(4/config.shadowScaling),.5*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thruster2Shadow,i.x+Math.sin(.15-r)*(28*t)/config.shadowScaling,i.y+Math.cos(.15-r)*(28*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale*(4/config.shadowScaling),.5*a*l*this.scale*(4/config.shadowScaling),u/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-r-.2)*(45*t),this.pos.y+Math.cos(-r-.2)*(45*t),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-r)*(45*t),this.pos.y+Math.cos(.2-r)*(45*t),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel);break;case 5:this.state.thrustLevel<0&&(a*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-r-.35)*(20*t),this.pos.y+Math.cos(-r-.35)*(20*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.4*a*l*this.scale,u*this.alpha),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.35-r)*(20*t),this.pos.y+Math.cos(.35-r)*(20*t),r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.3*a*l*this.scale,.4*a*l*this.scale,u*this.alpha),Graphics.transform(this.sprites.thruster1Shadow,i.x+Math.sin(-r-.35)*(20*t)/config.shadowScaling,i.y+Math.cos(-r-.35)*(20*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale*(4/config.shadowScaling),.4*a*l*this.scale*(4/config.shadowScaling),u*this.alpha/2.5),Graphics.transform(this.sprites.thruster2Shadow,i.x+Math.sin(.35-r)*(20*t)/config.shadowScaling,i.y+Math.cos(.35-r)*(20*t)/config.shadowScaling,r+.5*(this.state.thrustLevel>0?this.state.thrustDir:0),.4*a*l*this.scale*(4/config.shadowScaling),.4*a*l*this.scale*(4/config.shadowScaling),u*this.alpha/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-r-.2-0*this.state.thrustDir)*(35*t),this.pos.y+Math.cos(-r-.2-0*this.state.thrustDir)*(35*t),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-r-0*this.state.thrustDir)*(35*t),this.pos.y+Math.cos(.2-r-0*this.state.thrustDir)*(35*t),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha)}this.updateNameplate(),this.state.bubble&&this.updateBubble(),config.debug.collisions&&this.col&&(this.col.position.set(this.pos.x,this.pos.y),this.col.rotation=this.rot)}}!function(){var e={},t=[-1,-1,-1],n=["badge_gold","badge_silver","badge_bronze"];Players.update=function(){var t,n;for(t in e)0==(n=e[t]).status&&(n.update(game.timeFactor),n.updateGraphics(game.timeFactor));if(null!=game.spectatingID){if(null==(n=e[game.spectatingID]))return;if(game.timeNetwork-n.lastPacket>3e3)return;Graphics.setCamera(n.pos.x,n.pos.y)}else if(null!=game.myID){if(null==(n=e[game.myID]))return;0==n.status&&UI.updateHUD(n.health,n.energy,n),Graphics.setCamera(n.pos.x,n.pos.y)}},Players.add=function(t,n){e[t.id]=new Player(t,n)},Players.get=function(t){return e[t]},Players.getMe=function(){return e[game.myID]},Players.amIAlive=function(){var e=Players.getMe();return null!=e&&0==e.status},Players.getIDs=function(){var t={};for(var n in e)t[n]=!0;return t},Players.getByName=function(t){var n;for(n in e)if(e[n].name===t)return e[n];return null},Players.network=function(t,n){var r=e[n.id];if(null!=r)switch(t){case Network.SERVERPACKET.PLAYER_UPDATE:case Network.SERVERPACKET.PLAYER_FIRE:case Network.SERVERPACKET.EVENT_BOOST:case Network.SERVERPACKET.EVENT_BOUNCE:r.networkKey(t,n);break;case Network.SERVERPACKET.CHAT_SAY:r.sayBubble(n);break;case Network.SERVERPACKET.PLAYER_RESPAWN:r.respawn(n);break;case Network.SERVERPACKET.PLAYER_FLAG:n.id==game.myID&&(game.myFlag=game.lastFlagSet,Tools.setSettings({flag:game.lastFlagSet})),r.changeFlag(n)}},Players.stealth=function(t){var n=e[t.id];null!=n&&n.stealth(t)},Players.leaveHorizon=function(t){var n=e[t.id];null!=n&&n.leaveHorizon()},Players.updateBadges=function(r){for(var i,o=Tools.clamp(r.length,0,3),s=[],a=0;a<o;a++)null!=(i=e[r[a].id])&&(s.push(i.id),i.state.badge!=a&&(i.state.badge=a,i.changeBadge(n[a])),i.state.hasBadge||(i.state.hasBadge=!0,i.render&&(i.sprites.badge.visible=!0)));for(var l=0;l<t.length;l++)if(-1==s.indexOf(t[l])){if(null==(i=e[t[l]]))continue;i.state.hasBadge&&(i.state.hasBadge=!1,i.sprites.badge.visible=!1)}t=s},Players.chat=function(t){var n=e[t.id];null!=n&&UI.addChatLine(n,t.text,0)},Players.teamChat=function(t){var n=e[t.id];null!=n&&UI.addChatLine(n,t.text,3)},Players.votemutePass=function(t){var n=e[t.id];null!=n&&UI.chatVotemutePass(n)},Players.whisper=function(t){var n;if(t.to==game.myID){if(null==(r=e[t.from]))return;n=2}else{var r;if(null==(r=e[t.to]))return;n=1}UI.addChatLine(r,t.text,n)},Players.impact=function(t){for(var n=0;n<t.players.length;n++){var r=e[t.players[n].id];null!=r&&r.impact(t.type,new Vector(t.posX,t.posY),t.players[n].health,t.players[n].healthRegen)}},Players.powerup=function(e){Players.getMe().powerup(e)},Players.updateLevel=function(t){var n=e[t.id];null!=n&&n.updateLevel(t)},Players.reteam=function(t){var n=e[t.id];null!=n&&n.reteam(t.team)};Players.kill=function(t){var n=e[t.id];if(null!=n)if(0!=t.killer||0!=t.posX||0!=t.posY){if(n.kill(t),n.me()){UI.visibilityHUD(!1);var r=e[t.killer];null!=r&&UI.killedBy(r),UI.showSpectator('<div onclick="Network.spectateNext()" class="spectate">ENTER SPECTATOR MODE</div>')}else t.killer===game.myID&&UI.killed(n);n.me()||n.id!=game.spectatingID||3!=game.gameType||Games.spectatorSwitch(n.id)}else!function(e){e.kill({posX:0,posY:0,spectate:!0}),UI.visibilityHUD(!1)}(n)},Players.destroy=function(t){t==game.spectatingID&&($("#spectator-tag").html("Spectating"),Games.spectatorSwitch(t));var n=e[t];null!=n&&(n.destroy(!0),delete e[t])},Players.changeType=function(t){var n=e[t.id];null!=n&&n.changeType(t)},Players.count=function(){var t,n=0,r=0;for(t in e)n++,e[t].culled&&r++;return[n-r,n]},Players.wipe=function(){for(var t in e)e[t].destroy(!0),delete e[t]}}();class Mob{constructor(e){this.id=e.id,this.type=e.type,this.pos=new Vector(e.posX,e.posY),this.spriteRot=0,this.missile=1==this.type||2==this.type||3==this.type||5==this.type||6==this.type||7==this.type,this.missile&&e.c!==Network.SERVERPACKET.MOB_UPDATE_STATIONARY?(this.speed=new Vector(e.speedX,e.speedY),this.accel=new Vector(e.accelX,e.accelY),this.maxSpeed=e.maxSpeed,this.exhaust=config.mobs[this.type].exhaust,this.lastAccelX=0,this.lastAccelY=0,this.stationary=!1,this.spriteRot=this.speed.angle()+Math.PI):this.stationary=!0,this.sprites={},this.state={inactive:!1,despawnTicker:0,despawnType:0,baseScale:1,baseScaleShadow:1,luminosity:1},this.randomness=Tools.rand(0,1e5),this.culled=!1,this.visibility=!0,this.reducedFactor=!1,this.forDeletion=!1,this.spawnTime=game.time,this.lastPacket=game.timeNetwork,this.setupSprite()}setupSprite(){switch(4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall",{layer:"projectiles"}),this.sprites.smokeGlow=Textures.init("smokeGlow",{layer:"projectiles"}),this.sprites.thruster=Textures.init("missileThruster")),this.type){case 1:case 5:case 6:case 7:this.sprites.sprite=Textures.init("missile"),this.sprites.shadow=Textures.init("missileShadow",{scale:[.25,.2]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1.5,3),this.sprites.smokeGlow.alpha=.75;break;case 2:this.sprites.sprite=Textures.init("missileFat"),this.sprites.shadow=Textures.init("missileShadow",{scale:[.5,.25]}),this.sprites.thrusterGlow.scale.set(4,3),this.sprites.thrusterGlow.alpha=.25,this.sprites.smokeGlow.scale.set(2.5,3),this.sprites.smokeGlow.alpha=.75;break;case 3:this.sprites.sprite=Textures.init("missileSmall",{scale:[.28,.2]}),this.sprites.shadow=Textures.init("missileShadow",{scale:[.18,.14]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1,2),this.sprites.smokeGlow.alpha=.75;break;case 4:case 8:case 9:var e="crateUpgrade";8==this.type?e="crateShield":9==this.type&&(e="crateRampage"),this.state.baseScale=.33,this.state.baseScaleShadow=2.4/config.shadowScaling*.33,this.sprites.sprite=Textures.init(e,{scale:this.state.baseScale}),this.sprites.shadow=Textures.init("crateShadow",{scale:this.state.baseScaleShadow})}}despawn(e){if(4==this.type||8==this.type||9==this.type)return this.state.inactive=!0,this.state.despawnTicker=0,this.state.despawnType=e,void(1==e&&4!=this.type&&Sound.powerup(this.type,this.pos));this.state.inactive=!0,this.state.despawnTicker=0,this.sprites.thruster.renderable=!1,this.sprites.thrusterGlow.renderable=!1,this.sprites.smokeGlow.renderable=!1,this.accel.x=0,this.accel.y=0,this.missile&&Sound.updateThruster(1,this,!1)}destroy(e){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:game.graphics.layers.projectiles.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.projectiles.removeChild(this.sprites.thrusterGlow),game.graphics.layers.projectiles.removeChild(this.sprites.smokeGlow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.smokeGlow.destroy();break;case 4:case 8:case 9:game.graphics.layers.crates.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow)}e.c===Network.SERVERPACKET.MOB_DESPAWN_COORDS&&(Mobs.explosion(this.pos,e.type),this.missile&&Sound.updateThruster(1,this,!1))}network(e){this.lastPacket=game.timeNetwork,e.c===Network.SERVERPACKET.MOB_UPDATE&&(this.reducedFactor=Tools.reducedFactor()),this.pos.x=e.posX,this.pos.y=e.posY,null!=e.speedX&&(this.speed.x=e.speedX,this.speed.y=e.speedY),null!=e.accelX&&(this.accel.x=e.accelX,this.accel.y=e.accelY)}visible(e){e==this.visibility&&e!=this.culled||(this.sprites.sprite.visible=e,this.sprites.shadow.visible=e,4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thruster.visible=e,this.sprites.thrusterGlow.visible=e),this.visibility=e)}visibilityUpdate(){this.culled=!Graphics.inScreen(this.pos,128),this.visible(!this.culled)}update(e){if(this.visibilityUpdate(),!(!1!==this.reducedFactor&&(e-=this.reducedFactor,this.reducedFactor=!1,e<=0))){var t,n,r,i=e>.51?Math.round(e):1,o=e/i;for(t=0;t<i;t++)if(this.stationary)this.clientCalcs(o);else{n=this.speed.x,r=this.speed.y,this.speed.x+=this.accel.x*o,this.speed.y+=this.accel.y*o;var s=this.speed.length();s>this.maxSpeed&&this.speed.multiply(this.maxSpeed/s),this.state.inactive&&this.speed.multiply(1-.03*o),this.pos.x+=o*n+.5*(this.speed.x-n)*o,this.pos.y+=o*r+.5*(this.speed.y-r)*o,this.pos.x<-16384&&(this.pos.x+=32768),this.pos.x>16384&&(this.pos.x-=32768),this.pos.y<-8192&&(this.pos.y+=16384),this.pos.y>8192&&(this.pos.y-=16384),this.clientCalcs(o)}this.missile&&!this.state.inactive&&Sound.updateThruster(1,this,this.visibility)}}clientCalcs(e){if(!this.forDeletion)switch(this.state.luminosity-=.075*e,this.state.luminosity<0&&(this.state.luminosity=0),this.type){case 1:case 2:case 3:case 5:case 6:case 7:var t=1;if(this.state.inactive){if(this.state.despawnTicker+=.01*e,this.state.despawnTicker>.75){var n=1-4*(this.state.despawnTicker-.75);this.sprites.sprite.alpha=n,this.sprites.shadow.alpha=n}if(this.state.despawnTicker>1)return void(this.forDeletion=!0);t=Tools.clamp(1-this.state.despawnTicker,.3,1)}if(!this.culled&&t>.3){var r=this.speed.angle()+Math.PI;r-this.spriteRot>=Math.PI?this.spriteRot+=2*Math.PI:this.spriteRot-r>Math.PI&&(this.spriteRot-=2*Math.PI),this.spriteRot=Tools.converge(this.spriteRot,r,.1*e),Particles.missileSmoke(this,this.exhaust,t)}break;case 4:case 8:case 9:if(this.state.inactive&&(this.state.despawnTicker+=.05*e,this.state.despawnTicker>1))return void(this.forDeletion=!0)}}updateGraphics(e){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:var t=Graphics.shadowCoords(this.pos),n=Tools.oscillator(.1,.5,this.randomness),r=Tools.oscillator(.15,10,this.randomness);Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,this.spriteRot),Graphics.transform(this.sprites.shadow,t.x,t.y,this.spriteRot),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),null,null,null,(.5*this.state.luminosity+.2)*r),Graphics.transform(this.sprites.smokeGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),this.spriteRot),Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-this.spriteRot)*this.exhaust,this.pos.y+Math.cos(-this.spriteRot)*this.exhaust,this.spriteRot,config.mobs[this.type].thruster[0]*n,config.mobs[this.type].thruster[1]*n);break;case 4:case 8:case 9:var i;t=Graphics.shadowCoords(this.pos);i=0==this.state.despawnType?1-this.state.despawnTicker:1+2*this.state.despawnTicker,i*=Tools.oscillator(.08,500,this.randomness),Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y+20*(Tools.oscillator(.08,330,this.randomness)-1.04),null,this.state.baseScale*i,this.state.baseScale*i,1-this.state.despawnTicker),Graphics.transform(this.sprites.shadow,t.x,t.y,null,this.state.baseScaleShadow*i,this.state.baseScaleShadow*i,1-this.state.despawnTicker)}}}!function(){var e={},t=[],n={};Mobs.add=function(t,n){e[t.id]=new Mob(t),n&&e[t.id].network(t)},Mobs.update=function(){var t,n;for(t in e)(n=e[t]).update(game.timeFactor),n.forDeletion?Mobs.destroy(n):n.updateGraphics(game.timeFactor)},Mobs.network=function(t){var n=e[t.id];null==n?Mobs.add(t,!0):n.network(t)},Mobs.despawn=function(t){var n=e[t.id];null!=n&&n.despawn(t.type)},Mobs.destroy=function(t){var n=e[t.id];null!=n&&(n.destroy(t),delete e[t.id])},Mobs.explosion=function(e,t){switch(t){case 1:case 5:case 6:case 7:Particles.explosion(e,Tools.rand(1,1.2));break;case 2:Particles.explosion(e,Tools.rand(1.3,1.6));break;case 3:Particles.explosion(e,Tools.rand(.8,1))}Sound.mobExplosion(e,t)},Mobs.count=function(){var t,n=0,r=0;for(t in e)n++,e[t].culled&&r++;return[n-r,n]},Mobs.wipe=function(){for(var t in e)e[t].destroy({}),delete e[t]},Mobs.countDoodads=function(){return[t.length,config.doodads.length]},Mobs.setupDoodads=function(){config.doodads=config.doodads.concat(config.groundDoodads);for(var e=0;e<config.doodads.length;e++)Mobs.addDoodad(config.doodads[e])},Mobs.addDoodad=function(e){var t=Number.isInteger(e[2]),n=Textures.init((t?"mountain":"")+e[2]);n.scale.set(e[3]),n.position.set(e[0],e[1]),n.visible=!1,e[4]&&(n.rotation=e[4]),e[5]&&(n.alpha=e[5]),e[6]&&(n.tint=e[6]),e[7]=!1,e[8]=n,e[9]=t?0:1},Mobs.getClosestDoodad=function(e){for(var n,r,i=2,o=0;o<t.length;o++)0==(r=t[o])[5]&&Tools.distFastCheckFloat(e.x,e.y,r[0],r[1],256*r[3])&&(n=Tools.distance(e.x,e.y,r[0],r[1])/(256*r[3]))<i&&(i=n);return Tools.clamp(3.333*(i-.5),.2,1)},Mobs.updateDoodads=function(){for(var e,r=Tools.getBucketBounds(Graphics.getCamera(),512+game.halfScreenX/game.scale,512+game.halfScreenY/game.scale),i=r[0];i<=r[1];i++)for(var o=r[2];o<=r[3];o++)for(var s=0;s<game.buckets[i][o][0].length;s++)a=game.buckets[i][o][0][s],e=config.doodads[a],game.state==Network.STATE.LOGIN&&0!=e[9]||Graphics.inScreen(new Vector(e[0],e[1]),256*e[3]+config.overdraw)&&(e[7]||(e[8].visible=!0,e[7]=!0,n[a]||(n[a]=!0,t.push([e[0],e[1],e[2],e[3],a,e[9]]))));for(var a,l=t.length-1;l>=0;l--)a=t[l][4],e=config.doodads[a],Graphics.inScreen(new Vector(e[0],e[1]),256*e[3]+config.overdraw)||e[7]&&(e[8].visible=!1,e[7]=!1,t.splice(l,1),delete n[a])}}(),function(){class e{constructor(e,t,n,r){this.maxParticles=t,this.container=new PIXI.Container,null!=n&&(this.container.blendMode=n),this.particles=[],this.first=-1,this.last=-1,this.emitters={},this.emitterId=0,this.shadow=r,e.addChild(this.container)}addParticle(e,t,n,r,i,o,s,a,l,u,c,h,d,p){if(!(game.timeFactorUncapped>20||this.particles.length>=this.maxParticles)){var f=Textures.sprite(t),g={type:e,sprite:f,speed:n,pos:r,scale:i,alpha:o,rotationSpeed:s,rotation:a,lastRotation:0,time:game.time,tint:l,life:0,data:null!=d?d:0,emitter:null!=p?p:null,_prev:-1,_next:-1};null!=l&&(f.tint=l),null!=c&&(f.blendMode=c),null!=h&&(g.life=h),null!=u?f.anchor.set(u.x,u.y):f.anchor.set(.5,.5),this.container.addChild(f);var m=this.particles.length;m>0?(this.particles[this.last]._next=m,g._prev=this.last,this.last=m):(this.first=m,this.last=m),this.particles.push(g)}}wipe(){this.emitters={},this.emitterId=0;for(var e=0;e<this.particles.length;e++)this.container.removeChild(this.particles[e].sprite),this.particles[e].sprite.destroy();this.particles=[],this.first=-1,this.last=-1}addEmitter(e,t,n,r,i){game.timeFactorUncapped>20||(this.emitters[this.emitterId]={type:e,pos:n,speed:t,life:null!=r?r:0,shadowLayer:i},this.emitterId++)}updateEmitters(e){var t,r;for(t in this.emitters){switch((r=this.emitters[t]).type){case n.EMITTER_EXPLOSION_FRAGMENT:r.life+=.02*e,r.speed.multiply(1-.02*e)}if(r.life>1)delete this.emitters[t];else switch(r.pos.x+=r.speed.x*e,r.pos.y+=r.speed.y*e,r.type){case n.EMITTER_EXPLOSION_FRAGMENT:var i=Tools.randInt(1,16),o=.5*(1-r.life),s=1-r.life,a=Tools.rand(-.1,.1),l=Tools.randCircle();this.addParticle(n.FRAGMENT_SMOKE,"smoke_"+i,Vector.zero(),r.pos.clone(),Vector.diag(o),1,a,l,null,null,null,null,s+.2),r.shadowLayer&&r.shadowLayer.addParticle(n.FRAGMENT_SMOKE,"smokeshadow_"+i,Vector.zero(),r.pos.clone(),Vector.diag(o),1,a,l,null,null,null,null,s+.2)}}}destroy(e){var t=this.particles.length;if(0!=t&&!(e>=t)){this.container.removeChild(this.particles[e].sprite),this.particles[e].sprite.destroy();var n=this.particles[e]._prev,r=this.particles[e]._next;return t--,-1!=n?this.particles[n]._next=r:this.first=r,-1!=r?this.particles[r]._prev=n:this.last=n,e!=t&&(this.particles[e]=this.particles[t],-1!=this.particles[e]._prev?this.particles[this.particles[e]._prev]._next=e:this.first=e,-1!=this.particles[e]._next?this.particles[this.particles[e]._next]._prev=e:this.last=e),this.particles.splice(t,1),r==t?e:r}}update(e){var t;this.updateEmitters(e);for(var r=this.first;-1!=r;){switch((t=this.particles[r]).type){case n.MISSILE:case n.MISSILE_FAT:case n.MISSILE_SMALL:t.type==n.MISSILE?(t.scale.add(.2*e),t.scale.ceil(2*t.data),t.life+=.05*e):t.type==n.MISSILE_FAT?(t.scale.add(.3*e),t.scale.ceil(3*t.data),t.life+=.05*e):(t.scale.add(.14*e),t.scale.ceil(1.4*t.data),t.life+=.08*e),t.speed.multiply(1-.05*e),t.alpha=.7*(1-t.life),t.sprite.tint=Tools.colorLerp(t.tint,16777215,2*(1-t.life));break;case n.SHOCKWAVE_SMOKE:t.life+=.05*e,t.alpha=.7*Tools.easing.custom(t.life,"shockwave");break;case n.SHOCKWAVE_INNER:case n.SHOCKWAVE_OUTER:t.life+=.05*e;var i=Tools.easing.custom(t.life,"shockwave");t.alpha=.4*i,t.type==n.SHOCKWAVE_OUTER?t.scale.both(4*t.life):t.scale.both(3*t.life);break;case n.EXPLOSION_FLASH:t.life+=.1*e,t.alpha=1-t.life;break;case n.EXPLOSION_FLASH_BIG:t.life+=.04*e,t.alpha=1-t.life;break;case n.EXPLOSION_HOT_SMOKE:t.life+=.035*e,t.alpha=1-t.life,t.scale.add(.05*e),t.speed.multiply(1-.1*e),t.rotationSpeed*=1-.05*e;break;case n.EXPLOSION_SMOKE:t.life+=.01*e,t.alpha=Tools.easing.custom(t.life,"explosionSmoke"),t.scale.add(.05*e),t.speed.multiply(1-.05*e),t.rotationSpeed*=1-.05*e;break;case n.EXPLOSION_SPARK:t.life+=.02*e,t.alpha=2*(1-t.life),t.speed.multiply(1-.05*e),t.rotationSpeed*=1-.05*e;break;case n.FRAGMENT_SMOKE:t.life+=.02*e,t.scale.add(.075*e*t.data),t.scale.ceil(2*t.data),t.rotationSpeed*=1-.05*e,t.alpha=.3*(1-t.life);break;case n.PLANE_DAMAGE:t.life+=.02*e,t.alpha=2*(1-t.life),t.speed.multiply(1-.1*e)}if(t.life>1)r=this.destroy(r);else{if(t.pos.x+=t.speed.x*e,t.pos.y+=t.speed.y*e,t.rotation+=t.rotationSpeed*e,this.shadow){var o=Graphics.shadowCoords(t.pos);t.sprite.position.x=o.x,t.sprite.position.y=o.y,t.sprite.scale.x=t.scale.x/config.shadowScaling,t.sprite.scale.y=t.scale.y/config.shadowScaling,t.sprite.alpha=Tools.clamp(2*t.alpha,0,1)}else t.sprite.position.x=t.pos.x,t.sprite.position.y=t.pos.y,t.sprite.scale.x=t.scale.x,t.sprite.scale.y=t.scale.y,t.sprite.alpha=Tools.clamp(t.alpha,0,1);Math.abs(t.rotation-t.lastRotation)>.03&&(t.sprite.rotation=t.rotation,t.lastRotation=t.rotation),r=this.particles[r]._next}}}}var t={};Math.PI;Particles.setup=function(){t.smoke=new e(game.graphics.layers.smoke,2e3),t.shadows=new e(game.graphics.layers.shadows,2e3,null,!0),t.explosions=new e(game.graphics.layers.explosions,2e3)},Particles.update=function(){for(var e=game.timeFactor>.51?Math.round(game.timeFactor):1,n=game.timeFactor/e,r=0;r<e;r++)t.smoke.update(n),t.explosions.update(n),t.shadows.update(n)},Particles.wipe=function(){t.smoke.wipe(),t.explosions.wipe(),t.shadows.wipe()},Particles.planeDamage=function(e){var r=2==e.type?2:1,i=Tools.randInt(1,4),o=Tools.randCircle(),s=Tools.rand(.5,2),a=Tools.rand(.2,.8),l=Tools.rand(0,.3),u=Vector.createOff(e.pos,o,Tools.rand(0,5*r)),c=Vector.create(o,s);t.explosions.addParticle(n.PLANE_DAMAGE,"spark_"+i,new Vector(c.x+e.speed.x,c.y+e.speed.y),u,Vector.diag(a),0,0,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,l)},Particles.explosion=function(e,r,i){for(var o=r>1?1+(r-1)/1.5:r,s=0;s<2;s++)t.explosions.addParticle(n.EXPLOSION_FLASH,"flash_"+Tools.randInt(1,4),Vector.zero(),e.clone(),Vector.diag(1.5*r),0,0,Tools.randCircle(),15987628,null,PIXI.BLEND_MODES.ADD);var a,l,u,c,h,d,p,f,g;a=Math.round(Tools.rand(20,30)*r);for(s=0;s<a;s++)l=Tools.randInt(1,4),u=Tools.randCircle(),h=Tools.rand(3,10)*o,d=Tools.rand(-.2,.2),p=Tools.rand(.4,1.5)*o,g=Tools.rand(0,.3),t.explosions.addParticle(n.EXPLOSION_SPARK,"spark_"+l,Vector.create(u,h),e.clone(),Vector.diag(p),0,d,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,g);for(s=0;s<i;s++)u=Tools.randCircle(),h=Tools.rand(3,7)*o,c=Tools.rand(15,30)*r,t.explosions.addEmitter(n.EMITTER_EXPLOSION_FRAGMENT,Vector.create(u,h),Vector.createOff(e,u,c),Tools.rand(0,.5),t.shadows);a=Math.round(Tools.rand(20,30)*r);for(s=0;s<a;s++)l=Tools.randInt(1,16),u=Tools.randCircle(),c=Tools.rand(0,10)*r,h=Tools.rand(0,3)*r,d=Tools.rand(-.1,.1),p=Tools.rand(.5,.8)*r,f=Tools.randCircle(),t.explosions.addParticle(n.EXPLOSION_SMOKE,"smoke_"+l,Vector.create(u,h),Vector.createOff(e,u,c),Vector.diag(p),0,d,f),t.shadows.addParticle(n.EXPLOSION_SMOKE,"smokeshadow_"+l,Vector.create(u,h),Vector.createOff(e,u,c),Vector.diag(p),0,d,f);t.explosions.addParticle(n.EXPLOSION_FLASH_BIG,"glowsmall",Vector.zero(),e.clone(),Vector.diag(6*r),0,0,0,null,null,PIXI.BLEND_MODES.ADD),a=Math.round(Tools.rand(5,10)*r);for(s=0;s<a;s++)l=Tools.randInt(1,4),u=Tools.randCircle(),h=Tools.rand(1,3)*r,d=Tools.rand(-.1,.1),p=Tools.rand(.1,.3)*r,t.explosions.addParticle(n.EXPLOSION_HOT_SMOKE,"hotsmoke_"+l,Vector.create(u,h),e.clone(),Vector.diag(p),0,d,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD)},Particles.missileSmoke=function(e,r,i){var o=[null,n.MISSILE,n.MISSILE_FAT,n.MISSILE_SMALL,null,n.MISSILE,n.MISSILE,n.MISSILE][e.type],s=e.spriteRot+Math.PI,a=Vector.createOff(e.pos,s,r),l=.2*(i=i||1),u=Tools.rand(-.1,.1),c=Vector.create(s+u,5*i),h=Tools.randInt(1,16),d=Tools.rand(-.1,.1);Tools.randCircle();t.smoke.addParticle(o,"smoke_"+h,c.clone(),a.clone(),new Vector(1.25*l,4*l),1,d,s,16775590,null,null,null,i),t.shadows.addParticle(o,"smokeshadow_"+h,c.clone(),a.clone(),new Vector(1.25*l,4*l),1,d,s,null,null,null,null,i)},Particles.planeBoost=function(e,r){var i=e.rot+e.state.thrustDir/2+Math.PI,o=Vector.createOff(e.pos,i,r?40:-20),s=Tools.rand(-.1,.1),a=r?0:Math.PI,l=Vector.create(i+s+a,6),u=Tools.randInt(1,16),c=Tools.rand(-.1,.1);Tools.randCircle();t.smoke.addParticle(n.MISSILE,"smoke_"+u,l.clone(),o.clone(),new Vector(.3,1.2),1,c,i,16775590,null,null,null,1.2),t.shadows.addParticle(n.MISSILE,"smokeshadow_"+u,l.clone(),o.clone(),new Vector(.3,1.2),1,c,i,null,null,null,null,1.2)},Particles.spiritShockwave=function(e){for(var r,i,o=0;o<40;o++)i=o/40*2*Math.PI,r=Tools.randInt(1,16),t.smoke.addParticle(n.SHOCKWAVE_SMOKE,"smoke_"+r,Vector.create(i,8),e.clone(),Vector.diag(2),0,.4,Tools.randCircle());t.smoke.addParticle(n.SHOCKWAVE_INNER,"shockwave",Vector.zero(),e.clone(),Vector.zero(),0,0,-.35+Math.PI),t.smoke.addParticle(n.SHOCKWAVE_OUTER,"shockwave",Vector.zero(),e.clone(),Vector.zero(),0,0,-.35)},Particles.count=function(){var e=0;for(var n in t)e+=t[n].particles.length;return e};var n={MISSILE:0,MISSILE_FAT:1,MISSILE_SMALL:2,SHOCKWAVE_SMOKE:3,SHOCKWAVE_INNER:4,SHOCKWAVE_OUTER:5,EXPLOSION_FLASH:6,EXPLOSION_FLASH_BIG:7,EXPLOSION_SMOKE:8,EXPLOSION_HOT_SMOKE:9,EXPLOSION_SPARK:10,FRAGMENT_SMOKE:11,PLANE_DAMAGE:12,EMITTER_EXPLOSION_FRAGMENT:100};Particles.PTYPE=n}(),function(){var e={},t={},n=null,r=!1,i=0,o=!1,s=-1,a=0,l=!1,u=0,c=!1,h=null,d=!1,p=null,f=!1,g=!1,m=!1,v=null,y=0,b=!1,_=!1,x=null,w=!1,T=null,E={x:0,y:0,width:0,height:0},S={alert:null,information:null,default:null,destroyed:null},I={alert:!1,information:!1,default:!1,destroyed:!1},P={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},M=!1,A={},O=[],C=0,R={1:["Predator",80,50,75,60,"BOOST","Temporarily increases speed by burning energy"],2:["Goliath",30,100,30,100,"REPEL","Repels enemy aircraft and missiles"],3:["Mohawk",100,40,100,40,"STRAFE","Enables sideways flight"],4:["Tornado",60,70,50,80,"MULTIFIRE","Launches 3 missiles at the same time"],5:["Prowler",50,70,40,60,"STEALTH","Becomes invisible to enemy aircraft"],101:["Speed"],102:["Defense"],103:["Energy Regen"],104:["Missile Speed"]},D=["tf","pepe","clap","lol","bro","kappa","cry","rage"],k=["","Shield","Inferno"];UI.show=function(e,t){$(e).css({display:t?"inline-block":"block"})},UI.hide=function(e){$(e).css({display:"none"})},UI.isEmote=function(e,t){for(var n=0;n<D.length;n++)if(t){if(e===":"+D[n]+":")return D[n]}else if(e===D[n])return D[n];return!1},UI.serverMessage=function(e){var t="alert";2==e.type&&(t="information"),UI.showMessage(t,e.text,e.duration)},UI.showMessage=function(e,t,n){$("#msg-"+e).removeClass("hidemsg").removeClass("popmsg"),$("#msg-"+e).html(t);var r=$("#msg-"+e).height();"default"!=e&&"destroyed"!=e||$("#msg-"+e).css({"margin-top":"-"+Math.round(r/2)+"px"}),$("#msg-"+e).addClass("popmsg"),I[e]=!0,clearTimeout(S[e]),S[e]=setTimeout(UI.hideMessage,n||2e3,e)},UI.hideMessage=function(e){$("#msg-"+e).addClass("hidemsg"),I[e]=!1,S[e]=setTimeout(function(t){$("#msg-"+e).removeClass("popmsg").removeClass("hidemsg"),$("#msg-"+t).html("")},2500,e)},UI.wipeAllMessages=function(){for(var e in I)I[e]&&UI.showMessage(e,"",100)},UI.updateMyLevel=function(e){game.myLevel=e,$("#score-rank").html(e),$("#lifetime-rank").html(e)},UI.newScore=function(e){if(e.id!=game.myID)return!1;var t=e.score-game.myScore,n="";if(Math.abs(t)<1&&(t=!1),game.myScore=e.score,e.score!=P.score&&(P.score=e.score,$("#score-score").html(e.score)),e.upgrades!=P.upgrades){var r=e.upgrades-P.upgrades,i=-1!=P.upgrades;if(P.upgrades=e.upgrades,$("#score-upgrades").html(e.upgrades),X(),i&&r>0){if(Sound.powerup(4,null),M&&(M.msg+="<br>"),I.default)return n+='&nbsp;&nbsp;<span class="upgrade">+'+r+"</span>",void $("#alert-update").append(n);n+='<span id="alert-update"><span class="upgrade">+'+r+'<span class="bold"> upgrade</span></span></span>'}}if(e.earnings!=P.earnings&&0!=game.myLevel){P.earnings=e.earnings,$("#lifetime-totalbounty").html(e.earnings);var o=Math.ceil(Tools.rankToEarnings(game.myLevel+1)-e.earnings);$("#lifetime-nextbounty").html("+"+o)}if(e.totalkills!=P.kills||e.totaldeaths!=P.deaths){var s=0==e.totalkills||0==e.totaldeaths?"-":(e.totalkills/e.totaldeaths).toFixed(2);$("#lifetime-kdratio").html(s)}e.totalkills!=P.kills&&(P.kills=e.totalkills,$("#lifetime-kills").html(e.totalkills)),e.totaldeaths!=P.deaths&&(P.deaths=e.totaldeaths,$("#lifetime-deaths").html(e.totaldeaths)),t&&(M&&(M.msg+="<br>"),n+=UI.getScoreString(t)),M?(UI.showMessage(M.type,M.msg+n,M.duration),M=!1):""!=n&&UI.showMessage("default",n,3e3)},UI.getScoreString=function(e,t,n){var r="positive",i="+";return e<0&&(r="negative",i="-"),t&&(r=t),'<span id="alert-update" class="'+r+'">'+i+Math.abs(e)+"</span>"};var L=function(e){e.sprite.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-e.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-e.y)/16384))};UI.wipeAllMinimapMobs=function(){for(var t in e)game.graphics.layers.ui1.removeChild(e[t].sprite),e[t].sprite.destroy(),delete e[t]},UI.showSpectator=function(e){if(!w){var t=config.mobile?' class="mobile"':"";$("body").append('<div id="spectator"'+t+"></div>"),w=!0}$("#spectator").html(e),Input.addTouchRejection("#spectator")},UI.hideSpectator=function(){w&&($("#spectator").remove(),w=!1)},UI.addPowerup=function(e,t){null!=x&&clearTimeout(x);var n='<div class="powerup" id="powerup-'+e+'"><div class="percent '+(1==e?"shield":"rampage")+'" id="powerup-'+e+'-percent" style="transition: width '+t+'ms linear;"></div><div class="name">'+k[e]+"</div></div>";$("#powerups").html(n),$("#powerup-"+e+"-percent").width(),$("#powerup-"+e+"-percent").css({width:"7%"}),x=setTimeout(function(){$("#powerup-"+e).remove()},t)},UI.resetPowerups=function(){$("#powerups").html("")},UI.changeMinimapTeam=function(t,n){if(null!=e[t]&&null!=e[t].sprite){var r=1==n?"minimapBlue":"minimapMob";e[t].sprite.texture=Textures.getNamed(r)}},UI.scoreboardUpdate=function(t,n,r){for(var i,o,s,a,l,u=0,c="",h={},d=!1,p=0,f={},g="",m="",v="",y=0;y<n.length;y++)null!=(i=Players.get(n[y].id))&&(f=Tools.decodeMinimapCoords(n[y].x,n[y].y),i.lowResPos.x=f.x,i.lowResPos.y=f.y,n[y].id!=game.myID?0==n[y].x&&0==n[y].y||(h[i.id]=!0,null==e[n[y].id]?(v="minimapMob",2==game.gameType&&1==i.team&&(v="minimapBlue"),e[n[y].id]={sprite:Textures.init(v),x:f.x,y:f.y}):(e[n[y].id].x=f.x,e[n[y].id].y=f.y),L(e[n[y].id])):p=y+1);for(var b in e)null==h[b]&&(game.graphics.layers.ui1.removeChild(e[b].sprite),e[b].sprite.destroy(),delete e[b]);if(0!=p){r=r?Tools.clamp(r,1,t.length):t.length;for(y=0;y<r&&(null==(i=Players.get(t[y].id))||(u++,o=1==u?'<span class="badge scoreboard gold"></span>':2==u?'<span class="badge scoreboard silver"></span>':3==u?'<span class="badge scoreboard bronze"></span>':u+".",s=i.me()?" sel":"",a=t[y].score,l=t[y].level,p>r&&u==r-1&&(c+='<div class="line dottedline">&middot; &middot; &middot;</div>',!0,i=Players.get(game.myID),o=p+".",a=game.myScore,l=game.myLevel,s=" sel",d=!0),g="",2==game.gameType&&(g=" team-"+i.team),m="",4==(o+"").length&&(m=" bigger"),c+='<div class="line'+s+'"><span class="place'+m+'">'+o+'</span><span class="flag small flag-'+i.flag+'"></span><span class="nick'+g+'">'+UI.escapeHTML(i.name)+"</span>"+(0==l?"":'<span class="holder">&nbsp;<span class="rank">'+l+"</span></span>")+'<span class="score">'+N(a)+"</span></div>",!d));y++);$("#scoreboard").html(c)}};var N=function(e){var t="";e+="";for(var n=0;n<e.length;n++)t+="<span>"+e[n]+"</span>";return t};UI.toggleChatBox=function(e){if(!config.mobile)if(r){if(r=!1,e){var t=$("#chatinput").val();""!==t&&""!==t.trim()&&(UI.parseCommand(t.trim())||Network.sendChat(t)),U()}UI.hide("#chatinput"),$("#chatinput").val(""),$("#chatinput").blur()}else l&&UI.maximizeChat(),Input.clearKeys(!0),r=!0,UI.show("#chatinput"),$("#chatinput").focus()},UI.shortcutChat=function(e){r||($("#chatinput").val(e),UI.toggleChatBox())};var U=function(){o||(o=!0,$("#chat-0").length&&$("#chat-0").remove())};UI.parseCommand=function(e){if("/"!==e[0])return!1;var t=e.split(" "),n=t[0].substr(1).toLowerCase();if(0==n.length)return!1;if("s"===n){var r=e.indexOf(" "),i=e.substr(r+1);i.length>0&&Network.sendSay(i)}else if("t"===n){r=e.indexOf(" ");var o=e.substr(r+1);o.length>0&&Network.sendTeam(o)}else if("ignore"===n){null==(s=Players.getByName(G(t[1])))?UI.addChatMessage("Unknown player"):UI.chatIgnore(s.id)}else if("unignore"===n){null==(s=Players.getByName(G(t[1])))?UI.addChatMessage("Unknown player"):UI.chatUnignore(s)}else if("votemute"===n){null==(s=Players.getByName(G(t[1])))?UI.addChatMessage("Unknown player"):UI.chatVotemute(s)}else if("w"===n)t.length>=3?UI.chatWhisper(t[1],e.substr(4+t[1].length)):UI.addChatMessage("Usage: /w player message");else if("spectate"===n){var s;null==(s=Players.getByName(G(t[1])))?UI.addChatMessage("Unknown player"):Network.sendCommand("spectate",s.id+"")}else"flag"===n||"flags"===n?2==t.length?Network.sendCommand("flag",e.substr(n.length+2)):UI.addChatMessage("Type /flag XX where XX is the 2-letter ISO code of a country",!0):"emotes"===n?UI.addChatMessage("Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage",!0):"help"===n?UI.toggleHelp():"debug"===n||(UI.isEmote(n)?Network.sendSay(":"+n+":"):Network.sendCommand(n,e.substr(n.length+2)));return!0},UI.addChatLine=function(e,n,r){if(!t[e.id]){i++;if(0==r)var o='<div id="chat-'+i+'" class="line"><span class="playersel" data-playerid="'+e.id+'"><span class="flag small flag-'+e.flag+'"></span><span class="nick">'+UI.escapeHTML(e.name)+'</span></span><span class="text">'+UI.escapeHTML(n)+"</span></div>";else if(1==r||2==r){var a=1==r?"TO":"FROM";2==r&&(T=j(e.name));o='<div id="chat-'+i+'" class="line"><span class="tag whisper">'+a+'</span><span class="playersel" data-playerid="'+e.id+'"><span class="nick green">'+UI.escapeHTML(e.name)+'</span></span><span class="text green">'+UI.escapeHTML(n)+"</span></div>";s=-1}else{o='<div id="chat-'+i+'" class="line"><span class="tag team">TEAM</span><span class="playersel" data-playerid="'+e.id+'"><span class="nick blue">'+UI.escapeHTML(e.name)+'</span></span><span class="text blue">'+UI.escapeHTML(n)+"</span></div>";s=-1}var c="#chat-"+(i-config.maxChatLines);if($(c).length&&$(c).remove(),$("#chatlines").append(o),l)u++,$("#chatunreadlines").html(u),1==u&&UI.show("#chatunreadlines",!0);else{var h=$("#chatbox");1!=r&&2!=r&&e.id!=game.myID&&h.is(":hover")||(h.perfectScrollbar("update"),h.scrollTop(h[0].scrollHeight))}}},UI.addChatMessage=function(e,t){a=0,s=-1;var n='<div id="chat-'+ ++i+'" class="line">'+(t?"":'<span class="nick">â </span>')+'<span class="text">'+e+"</span></div>",r="#chat-"+(i-config.maxChatLines);$(r).length&&$(r).remove(),$("#chatlines").append(n);var o=$("#chatbox");o.perfectScrollbar("update"),o.scrollTop(o[0].scrollHeight)},UI.showChatLevel=function(e){var t=null;2==e?t="Type /flag XX where XX is the 2-letter ISO code of a country":3==e?t="Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage":4==e&&(t="Flag Pack #1: communist confederate imperial rainbow jolly"),null!=t&&UI.addChatMessage(t,!0)},UI.updateStats=function(e){var t=e.playerstotal,n="";n+='<div class="item"><span class="icon-container"><div class="icon players"></div></span><span class="greyed">'+e.playersgame+"&nbsp;/&nbsp;</span>"+t+'<span class="icon-container padded"><div class="icon ping"></div></span>'+e.ping+'<span class="millis">ms</span></div>',$("#gameinfo").html(n),game.ping=e.ping},UI.sayLine=function(e){Players.say(e)},UI.escapeHTML=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/`/g,"&#x60;")};var F=function(){var e=window.innerWidth,t=window.innerHeight;e==game.screenX&&t==game.screenY||(clearTimeout(n),n=setTimeout(function(){Graphics.resizeRenderer(e,t)},250))};UI.controlKey=function(e,t,n){if(game.state!=Network.STATE.PLAYING)return!0;if(n)if(13!=e){if(27==e)return r&&UI.toggleChatBox(!1),void UI.closeAllPanels();if(191!=e)if(75!=e)switch(t){case"SHOWSCORE":UI.toggleScore();break;case"MAINMENU":UI.toggleMainMenu();break;case"SHOWGAMES":Games.toggleGames();break;case"FULLSCREEN":Graphics.toggleFullscreen(),Input.clearKeys();break;case"MINIMIZECHAT":UI.minimizeChat();break;case"MAXIMIZECHAT":UI.maximizeChat();break;case"SAY":UI.shortcutChat("/s ");break;case"TEAM":UI.shortcutChat("/t ");break;case"REPLY":null!=T&&UI.shortcutChat("/w "+T+" ");break;case"SPECTATE":Network.spectateForce();break;case"UPGRADE1":UI.selectUpgrade(1);break;case"UPGRADE2":UI.selectUpgrade(2);break;case"UPGRADE3":UI.selectUpgrade(3);break;case"UPGRADE4":UI.selectUpgrade(4);break;case"SOUND":Sound.toggle();break;case"HELP":UI.toggleHelp();break;case"INVITE":UI.toggleInvite();break;case"MOUSEMODE":Input.toggleMouse()}else Input.toggleKeybinds();else UI.shortcutChat("/")}else UI.toggleChatBox(!0)},UI.chatBoxOpen=function(){return r},UI.setupMinimap=function(){game.graphics.gui.minimap=Textures.init("minimap"),game.graphics.gui.minimap_box=Textures.init("minimapBox"),UI.resizeMinimap(),UI.visibilityMinimap(!1)},UI.visibilityMinimap=function(e){game.graphics.gui.minimap.visible=e,game.graphics.gui.minimap_box.visible=e},UI.resizeMinimap=function(){game.graphics.gui.minimap.scale.set(config.minimapSize/512),game.graphics.gui.minimap.position.set(game.screenX-config.minimapPaddingX,game.screenY-config.minimapPaddingY),game.graphics.gui.minimap_box.scale.set(.03+2*config.minimapSize*(game.screenX/game.scale/32768)/64,.03+config.minimapSize*(game.screenY/game.scale/16384)/64);for(var t in e)L(e[t]);Games.update(!0)},UI.setupHUD=function(){game.graphics.gui.hudHealth_shadow=Textures.init("hudHealth_shadow"),game.graphics.gui.hudHealth=Textures.init("hudHealth"),game.graphics.gui.hudHealth_mask=Textures.init("hudHealth_mask"),game.graphics.gui.hudHealth_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudHealth.rotation=-1.5,game.graphics.gui.hudHealth.position.set(330,174),game.graphics.gui.hudHealth_mask.position.set(330,174),game.graphics.gui.hudEnergy_shadow=Textures.init("hudEnergy_shadow"),game.graphics.gui.hudEnergy=Textures.init("hudEnergy"),game.graphics.gui.hudEnergy_mask=Textures.init("hudEnergy_mask"),game.graphics.gui.hudEnergy_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudEnergy.position.set(-250,174),game.graphics.gui.hudEnergy_mask.position.set(-250,174),UI.resizeHUD(),UI.visibilityHUD(!1)},UI.visibilityHUD=function(e){game.graphics.gui.hudHealth_shadow.visible=e,game.graphics.gui.hudHealth.visible=e,game.graphics.gui.hudEnergy_shadow.visible=e,game.graphics.gui.hudEnergy.visible=e},UI.resizeHUD=function(){var e=.5*game.scale,t=game.halfScreenX-30*game.scale,n=game.halfScreenX+30*game.scale;game.graphics.gui.hudHealth_shadow.scale.set(e),game.graphics.gui.hudEnergy_shadow.scale.set(e),game.graphics.gui.hudHealth_shadow.position.set(t,game.halfScreenY),game.graphics.gui.hudEnergy_shadow.position.set(n,game.halfScreenY),game.graphics.gui.hudSpriteHealth.scale.set(e),game.graphics.gui.hudSpriteHealth.position.set(t,game.halfScreenY),game.graphics.gui.hudSpriteEnergy.scale.set(e),game.graphics.gui.hudSpriteEnergy.position.set(n,game.halfScreenY)},UI.selectAircraft=function(e){Network.sendCommand("respawn",e+"")},UI.aircraftSelected=function(e){e=parseInt(e);for(var t=1;t<=5;t++)t==e?$("#selectaircraft-"+t).addClass("sel"):$("#selectaircraft-"+t).removeClass("sel")},UI.killed=function(e){var t=null==e.level?"":'<span class="level">'+e.level+"</span>";(game.time-C>1500||O.length>=6)&&(O=[]),C=game.time,O.push([e.flag,e.name,t]);for(var n="",r="",i=0;i<O.length;i++)r=O[i][1],1!=O.length&&r.length>10&&(r=r.substr(0,10)+"..."),n+='<span class="player"><span class="flag big flag-'+O[i][0]+'"></span>'+UI.escapeHTML(r)+O[i][2]+"</span>";M={type:"default",duration:3e3,msg:"You have destroyed"+n}},UI.killedBy=function(e){var t=null==e.level?"":'<span class="level">'+e.level+"</span>";M={type:"destroyed",duration:3e3,msg:'Destroyed by<span class="playerbig"><span class="flag big flag-'+e.flag+'"></span>'+UI.escapeHTML(e.name)+t+"</span>"}},UI.errorHandler=function(e){switch(e.error){case 1:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Packet flooding detected',2e4),Network.receivedError(e.error);break;case 2:UI.showMessage("alert",'<span class="info">BANNED</span>Packet flooding detected',2e4),Network.receivedError(e.error);break;case 3:UI.showMessage("alert",'<span class="info">BANNED</span>You have been globally banned',2e4),Network.receivedError(e.error);break;case 4:Network.receivedError(e.error),Games.redirRoot();break;case 5:UI.showMessage("alert",'<span class="info">RESPAWN</span>Full health and 2 seconds of inactivity required',3e3);break;case 6:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>AFK for more than 10 minutes<br><span class="button" onclick="Network.reconnect()">RECONNECT</span>',72e5),Network.receivedError(e.error);break;case 7:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>You have been kicked out',2e4),Network.receivedError(e.error);break;case 8:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Invalid login data',2e4),Network.receivedError(e.error);break;case 9:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Incorrect protocol level<br>Please clear your browser cache and refresh',2e4),Network.receivedError(e.error);break;case 10:UI.showMessage("alert",'<span class="info">BANNED</span>Account banned',2e4),Network.receivedError(e.error);break;case 11:UI.showMessage("alert",'<span class="info">DISCONNECTED</span>Account already logged in<br><span class="button" onclick="Network.reconnect()">RECONNECT</span>',2e4),Network.receivedError(e.error);break;case 12:UI.showMessage("alert",'<span class="info">RESPAWN</span>Cannot respawn or change aircraft in a Battle Royale game',3e3);break;case 13:UI.showMessage("alert",'<span class="info">SPECTATE</span>Full health and 2 seconds of inactivity required',3e3);break;case 20:UI.showMessage("information",'<span class="info">UPGRADE</span>Not enough upgrade points',3e3);break;case 30:UI.addChatMessage("Chat throttled to prevent spamming");break;case 31:UI.showMessage("alert",'<span class="info">THROTTLED</span>Flag change too fast');break;case 100:UI.addChatMessage("Unknown command")}},UI.showCommandReply=function(e){if(0==e.type)UI.addChatMessage(UI.escapeHTML(e.text));else{var t=JSON.stringify(JSON.parse(e.text),null,"    "),n='<div class="close" onclick="$(this).parent().remove()"></div><div class="text"><pre>'+UI.escapeHTML(t)+"</pre></div>";$("body").append('<div id="debugpopup" oncontextmenu="event.stopPropagation()">'+n+"</div>")}},UI.updateHUD=function(e,t,n){e=Tools.clamp(e,0,1),t=Tools.clamp(t,0,1),game.graphics.gui.hudHealth.rotation=-1.1*(1-e),game.graphics.gui.hudEnergy.rotation=Math.PI+1.1*(1-t),game.graphics.gui.hudHealth.tint=e>.5?Tools.colorLerp(13487404,2591785,2*(e-.5)):Tools.colorLerp(12201261,13487404,2*e);var r=3374821;n&&(r=t<config.ships[n.type].energyLight?2841755:3374821),game.graphics.gui.hudEnergy.tint=r},UI.minimizeChat=function(e){l||(r&&UI.toggleChatBox(),l=!0,u=0,UI.hide("#chatbox"),UI.hide("#chatunreadlines"),UI.show("#maximizechat"),e&&e.stopPropagation())},UI.maximizeChat=function(){if(l){l=!1,UI.hide("#maximizechat"),UI.hide("#chatunreadlines"),UI.show("#chatbox");var e=$("#chatbox");e.scrollTop(e[0].scrollHeight)}},UI.closeScore=function(){c&&(UI.hidePanel("#scoredetailed"),c=!1,clearInterval(h))},UI.openScore=function(){c||(UI.closeAllPanels("score"),UI.showPanel("#scoredetailed"),c=!0,Network.getScores(),clearInterval(h),h=setInterval(Network.getScores,5e3))},UI.toggleScore=function(){c?UI.closeScore():UI.openScore()},UI.openLogin=function(){_||(UI.showPanel("#loginselector"),_=!0,Games.closeDropdowns())},UI.closeLogin=function(){_&&(UI.hidePanel("#loginselector"),_=!1)},UI.showPanel=function(e){var t=.9,n=1;config.phone&&(t*=.7,n*=.7),$(e).css({display:"block",opacity:"0",transform:"scale("+t+")","pointer-events":"auto"}),$(e).width(),$(e).css({opacity:"1",transform:"scale("+n+")",transition:"all 0.75s cubic-bezier(0.23, 1, 0.32, 1)"}),"#custom-msg"!=e&&Sound.UIClick()},UI.hidePanel=function(e,t,n){if("#custom-msg"!=e||$("#custom-msg").length){var r=.9;config.phone&&(r*=.7),$(e).css({opacity:"0",transform:"scale("+r+")","pointer-events":"none"}),Sound.UIClick(),setTimeout(function(e){if(!("#mainmenu"===e?g:"#scoredetailed"===e?c:"#howtoplay"===e?f:"#invitefriends"===e?b:"#loginselector"===e?_:t)){if(n)return void $(e).remove();$(e).css({display:"none",transform:"none",transition:"none"})}},800,e)}},UI.openInvite=function(){b||(UI.closeAllPanels("invite"),game.inviteLink="https://airma.sh/#"+game.playRegion+"-"+game.playRoom,$("#invite-link").html(game.inviteLink),$("#invite-link").attr("href",game.inviteLink),UI.showPanel("#invitefriends"),b=!0)},UI.closeInvite=function(){b&&(UI.hidePanel("#invitefriends"),b=!1)},UI.toggleInvite=function(){b?UI.closeInvite():UI.openInvite()},UI.closeMainMenu=function(){g&&(UI.hidePanel("#mainmenu"),g=!1)},UI.updateMainMenuSettings=function(){config.settings.hidpi?$("#mainmenu-hidpi-tick").addClass("ticked"):$("#mainmenu-hidpi-tick").removeClass("ticked")},UI.openMainMenu=function(){g||(UI.closeAllPanels("mainmenu"),UI.updateMainMenuSettings(),UI.showPanel("#mainmenu"),g=!0)},UI.toggleMainMenu=function(){g?UI.closeMainMenu():UI.openMainMenu()},UI.closeAllPanels=function(e){"mainmenu"!==e&&UI.closeMainMenu(),"score"!==e&&UI.closeScore(),"help"!==e&&UI.hideHelp(),"games"!==e&&Games.closeGames(),"invite"!==e&&UI.closeInvite(),"login"!==e&&UI.closeLogin(),"keybinds"!==e&&Input.closeKeybinds(),$("#custom-msg").length&&UI.hidePanel("#custom-msg",!1,!0)};var B=function(e){return(e=Math.round(e))<1e3?e:e<1e5?(e/1e3).toFixed(1)+" K":e<1e6?Math.round(e/1e3)+" K":(e/1e6).toFixed(1)+" M"};UI.updateScore=function(e){if(c){var t=e.scores,n=["gold","silver","bronze"];t.sort(function(e,t){return t.score-e.score});var r=[["name","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["damage","Damage"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]];e.c==Network.SERVERPACKET.SCORE_DETAILED_BTR?r=[["name","&nbsp;"],["wins","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]:e.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(r=[["name","&nbsp;"],["captures","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]);for(var i="",o=0;o<r.length;o++)i+='<div class="'+r[o][0]+'">'+r[o][1]+"</div>";for(var s,a,l,u="",h="",d=-1,p=-1,f=0;f<t.length;f++)null!=(s=Players.get(t[f].id))&&(a=f<=2?'&nbsp;<div class="badge detail '+n[f]+'"></div>':f+1+".",l=s.me()?" sel":"",u=e.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" team-"+s.team:e.c!=Network.SERVERPACKET.SCORE_DETAILED_BTR||t[f].alive?"":" inactive",h+='<div class="item'+l+'"><div class="name"><div class="position">',h+=a+'</div><div class="flag small flag-'+s.flag+'"></div>',h+='<div class="player'+u+'">'+UI.escapeHTML(s.name)+"</div></div>",e.c==Network.SERVERPACKET.SCORE_DETAILED_BTR&&(0==t[f].wins?h+='<div class="wins">&nbsp;</div>':h+='<div class="wins">'+t[f].wins+'<div class="wins-container">&nbsp;<div class="wins-icon"></div></div></div>'),e.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(0==t[f].captures?h+='<div class="captures">&nbsp;</div>':h+='<div class="captures">'+t[f].captures+'<div class="captures-container">&nbsp;<div class="captures-icon"></div></div></div>'),h+='<div class="kills">'+t[f].kills+"</div>",h+='<div class="deaths">'+t[f].deaths+"</div>",e.c==Network.SERVERPACKET.SCORE_DETAILED&&(h+='<div class="damage">'+B(t[f].damage)+"</div>"),h+='<div class="bounty">'+t[f].score+"</div>",h+='<div class="rank">'+(0==t[f].level?"&nbsp;":t[f].level)+"</div>",h+='<div class="ping">'+t[f].ping+'<span class="ms">ms</span></div>',h+="</div>",e.c==Network.SERVERPACKET.SCORE_DETAILED?t[f].damage>d&&(d=t[f].damage,p=s):e.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?t[f].captures>d&&(d=t[f].captures,p=s):t[f].kills>d&&(d=t[f].kills,p=s));var g="",m="";if(t.length>1&&(g="&bull;&nbsp;&nbsp;"+t.length+" players",d>0)){if(e.c==Network.SERVERPACKET.SCORE_DETAILED)var v=B(d),y=" damage";else{v=d+"",y=e.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" capture":" kill";d>1&&(y+="s")}m='<div class="mvpbadge">MVP</div><div class="flag flag-'+p.flag+'"></div><div class="name">'+UI.escapeHTML(p.name)+'</div><div class="damage">&nbsp;&nbsp;&bull;&nbsp;&nbsp;'+v+y+"</div>"}$("#scoreplayers").html(g),$("#scoretable").html(i),$("#scorecontainer").html(h),$("#scoremvp").html(m)}},UI.popMenu=function(e,n){if(game.state==Network.STATE.LOGIN)return Games.closeDropdowns(),void UI.closeLogin();n||game.state!=Network.STATE.PLAYING||UI.closeAllPanels();var r=$(e.target).parent().data("playerid");if(null==r&&(r=$(e.target).data("playerid")),null!=r&&r!=game.myID){var i=Players.get(r);if(null==i)return!0;var o={left:"20px",top:$(e.target).parent()[0].getBoundingClientRect().top-166+"px"};d||(o.display="block",d=!0);var s=null==t[i.id]?"Ignore":"Unignore",a='<div class="header">'+UI.escapeHTML(i.name)+'</div><div class="item" onclick="UI.contextWhisper()">Whisper</div><div class="item" onclick="UI.context'+s+'()">'+s+'</div><div class="item" onclick="UI.contextVotemute()">Vote mute</div><div class="arrow"></div>';return $("#contextmenu").html(a),$("#contextmenu").css(o),p=i.id,e.stopPropagation(),!1}UI.closeMenu()};var j=function(e){return(e+"").replace(/&/g,"&a;").replace(/ /g,"&s;")},G=function(e){return(e+"").replace(/&s;/g," ").replace(/&a;/g,"&")};UI.chatWhisper=function(e,t){e=G(e);var n=Players.getByName(e);null!=n?Network.sendWhisper(n.id,t):UI.addChatMessage("Unknown player")},UI.chatIgnore=function(e){var n=Players.get(e);null!=n&&e!=game.myID&&null==t[n.id]&&(t[n.id]=!0,UI.addChatMessage("Ignoring player "+UI.escapeHTML(n.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;To unignore type /unignore "+UI.escapeHTML(j(n.name)),!0))},UI.chatUnignore=function(e){t[e.id]&&(delete t[e.id],UI.addChatMessage("Removed player "+UI.escapeHTML(e.name)+" from ignore list",!0))},UI.chatVotemute=function(e){if(e.id!=game.myID){Network.voteMute(e.id);var t=Math.floor(Math.sqrt(Players.count()[1]))+1;UI.addChatMessage("Voted to mute "+UI.escapeHTML(e.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+t+" total votes are required",!0)}},UI.chatVotemutePass=function(e){UI.addChatMessage("The vote to mute "+UI.escapeHTML(e.name)+" has passed",!0)},UI.chatMuted=function(){UI.addChatMessage("You have been muted")},UI.contextWhisper=function(){if(null!=p){var e=Players.get(p);null!=e&&p!=game.myID&&UI.shortcutChat("/w "+j(e.name)+" ")}},UI.contextIgnore=function(){null!=p&&p!=game.myID&&UI.chatIgnore(p)},UI.contextUnignore=function(){if(null!=p){var e=Players.get(p);null!=e&&p!=game.myID&&UI.chatUnignore(e)}},UI.contextVotemute=function(){if(null!=p){var e=Players.get(p);null!=e&&p!=game.myID&&UI.chatVotemute(e)}},UI.closeMenu=function(){d&&(UI.hide("#contextmenu"),d=!1)},UI.nameEntered=function(){var e=$("#playername").val().trim();e.length>0?(game.myOriginalName=e,Games.start(e,!0)):Games.highlightInput("#playername")},UI.selectUpgrade=function(e){Network.sendCommand("upgrade",e+"")};var X=function(){for(var e=["","speed","defense","energy","missile"],t=1;t<5;t++)t-1,A[e[t]]<5&&P.upgrades>0?$("#selectupgrade-"+t).addClass("lighted"):$("#selectupgrade-"+t).removeClass("lighted")};UI.updateUpgrades=function(e,t,n){for(var r,i=["","speed","defense","energy","missile"],o=1;o<5;o++)r=o-1,"",null!=A[i[o]]&&A[i[o]]==e[r]||(A[i[o]]=e[r],$("#selectupgrade-"+o+"-level").html(e[r]),m&&y-100==o&&UI.popTooltip(null,100+o));if(null!=n){if(0!=n){var s=["","Speed","Defense","Energy Regen","Missile Speed"],a="+"+Math.round(100*(config.upgrades[i[n]].factor[A[i[n]]]-1))+"% "+s[n];UI.showMessage("information",'<span class="info">UPGRADE</span>'+a,3e3),Sound.playerUpgrade()}P.upgrades=t,$("#score-upgrades").html(t)}X()},UI.resetUpgrades=function(){UI.updateUpgrades([0,0,0,0])},UI.popBigMsg=function(e){if(1==e)var t='<div id="big-message" onclick="UI.closeBigMsg()"><div class="msg">Mobile mode</div><div class="small">Mobile mode has touch controls and requires latest phone/tablet hardware.</div><div class="small nopadtop">For the full experience please play on a PC with a physical keyboard.</div><div class="greyed">Tap anywhere to close</div></div>';else t='<div id="big-message"><div class="msg">WebGL required</div><div class="small">This game requires a WebGL enabled browser in order to run.<br>Please allow WebGL for this domain to continue.</div>';$("body").append(t)},UI.closeBigMsg=function(){$("#big-message").remove()},UI.showHelp=function(e){f||(UI.closeAllPanels("help"),!0===e?$("#howtoplay").addClass("hide"):$("#howtoplay").removeClass("hide"),UI.showPanel("#howtoplay"),f=!0)},UI.hideHelp=function(){f&&(UI.hidePanel("#howtoplay"),f=!1)},UI.toggleHelp=function(){f?UI.hideHelp():UI.showHelp()},UI.updateSound=function(e){config.settings.sound?($("#settings-sound").addClass("soundon"),$("#settings-sound").removeClass("soundoff"),$("#mainmenu-sound-icon").addClass("soundon"),$("#mainmenu-sound-icon").removeClass("soundoff"),$("#mainmenu-sound-text").html("Disable Sound")):($("#settings-sound").addClass("soundoff"),$("#settings-sound").removeClass("soundon"),$("#mainmenu-sound-icon").addClass("soundoff"),$("#mainmenu-sound-icon").removeClass("soundon"),$("#mainmenu-sound-text").html("Enable Sound")),e&&UI.showMessage("alert",'<span class="info">SOUND</span>'+(config.settings.sound?"Enabled":"Disabled"),3e3)},UI.gameStart=function(e,t){t&&($("#login-ui").remove(),UI.show("#logosmall"),UI.show("#menu",!0),config.mobile||UI.show("#chatbox"),UI.show("#roomnamecontainer"),UI.show("#scoreboard"),UI.show("#scorebig"),UI.show("#settings"),UI.show("#sidebar"),config.mobile&&H(),config.settings.helpshown||(UI.showHelp(!0),config.settings.helpshown=!0,Tools.setSettings({helpshown:!0}))),UI.hide("#gamespecific"),$("#gameinfo").html("&nbsp;"),$("#gameinfo").addClass("ingame"),A={},UI.resetUpgrades(),UI.hideSpectator(),UI.resetPowerups(),$("#open-menu").html("Connecting..."),game.myName=e,Network.setup()};var H=function(){Y(),Graphics.toggleFullscreen(),Input.setupTouch()},Y=function(){$("#howtoplay").addClass("mobile"),$("#howtoplay").html('<div class="header">HOW TO PLAY</div><div class="mobile-graphic"></div><div class="commands">For the best game experience play on a PC</div>')};UI.reconnection=function(){i=0,s=-1,P={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},M=!1,A={},t={},UI.resetUpgrades(),UI.resetPowerups(),UI.hideSpectator(),UI.wipeAllMinimapMobs(),UI.wipeAllMessages(),Games.wipe(),$("#gameinfo").html("&nbsp;"),$("#scoreboard").html(""),$("#chatlines").html(""),$("#score-score").html("&nbsp;"),$("#score-upgrades").html("&nbsp;"),$("#score-rank").html("-"),$("#roomname").html("&nbsp;"),$("#open-menu").html("Switching Game...")},UI.loggedIn=function(e){$("#roomname").html(game.roomName),$("#scoreheader").html(game.roomName+"&nbsp;&nbsp;"),$("#open-menu").html('<span class="arrowdown"></span>'+game.roomName+'&nbsp;&nbsp;<span class="region">&bull;&nbsp;&nbsp;'+game.regionName+"</span>"),UI.visibilityHUD(!0),UI.visibilityMinimap(!0),UI.updateHUD(1,1)},UI.popTooltip=function(e,t){if(null==t)var n=e.data.t,r=e.currentTarget.getBoundingClientRect();else n=t;var i="";if(n<100){var o=R[n],s=["","Agility","Defense","Regen","Damage"];i+='<div class="header">'+o[0]+"</div>";for(var a=1;a<=4;a++)i+='<div class="item"><div class="name">'+s[a]+'</div><div class="val">&nbsp;<div class="bar"><div class="progress" style="width: '+o[a]+'%"></div></div></div></div>';i+='<div class="item"><div class="special">'+o[5]+'</div><div class="desc">'+o[6]+"</div></div>",i+='<div class="item"><div class="clickto">Click to respawn</div></div>'}else{var l=["","speed","defense","energy","missile"],u=n-100,c=A[l[u]],h="+"+Math.round(100*(config.upgrades[l[u]].factor[A[l[u]]]-1))+"%";if(i+='<div class="header">'+R[n][0]+"</div>",i+='<div class="item"><div class="level">'+c+" / "+(config.upgrades[l[u]].factor.length-1)+"</div>",c>0&&(i+='<div class="percent">'+h+"</div></div>"),c<config.upgrades[l[u]].factor.length-1){i+='<div class="item smaller"><div class="requires">Requires 1 upgrade point</div></div>';i+='<div class="item smaller"><div class="clickto">Click to upgrade to '+(h="+"+Math.round(100*(config.upgrades[l[u]].factor[A[l[u]]+1]-1))+"%")+"</div></div>"}else i+='<div class="item smaller"><div class="clickto">Max upgrade reached</div></div>'}i+='<div class="arrow"></div>',null==t&&$("#tooltip").css({left:Math.round(r.left+60)+"px",top:Math.round(r.top-10)+"px"}),$("#tooltip").html(i),y=n,null!=v&&clearTimeout(v),m||(m=!0,UI.show("#tooltip"))},UI.closeTooltip=function(){m&&(null!=v&&clearTimeout(v),v=setTimeout(function(){m&&(UI.hide("#tooltip"),$("#tooltip").html(""),m=!1,v=null)},250))},UI.startDragChat=function(e){E.x=e.originalEvent.pageX,E.y=e.originalEvent.pageY,E.width=$("#chatbox").width()+16,E.height=$("#chatbox").height()+16,$("#chatbox").addClass("hovered"),$(window).on("mousemove",UI.dragChat),$(window).on("mouseup",UI.endDragChat)},UI.dragChat=function(e){var t=e.originalEvent.pageX,n=e.originalEvent.pageY;if(0!=t&&0!=n){game.screenY-n<100&&(n=game.screenY-100);var r=t-E.x,i=n-E.y;$("#chatbox").css({width:E.width+r+"px",height:E.height-i+"px"}),$("#minimizechatcontainer").css({width:E.width+r+"px",bottom:E.height-i+"px"}),$("#chatinput").css({width:E.width+r-12+"px",bottom:E.height-i+20+"px"})}},UI.endDragChat=function(e){$("#chatbox").removeClass("hovered"),$(window).off("mousemove",UI.dragChat),$(window).off("mouseup",UI.endDragChat)},UI.setup=function(){$(window).resize(F),$(window).on("orientationchange",F),$(window).on("contextmenu",function(e){return UI.popMenu(e,!0),e.preventDefault(),!1}),$(window).on("focus",Input.gameFocus),$(window).on("blur",Input.gameBlur),$(window).on("click",UI.popMenu),$("#minimizechat").on("click",UI.minimizeChat),$("#maximizechat").on("click",UI.maximizeChat),$("#viewscore").on("click",function(e){game.state==Network.STATE.PLAYING&&(UI.openScore(),e.stopPropagation())}),$("#selectaircraft-1").on("click",function(){UI.selectAircraft(1)}),$("#selectaircraft-2").on("click",function(){UI.selectAircraft(2)}),$("#selectaircraft-3").on("click",function(){UI.selectAircraft(3)}),$("#selectaircraft-4").on("click",function(){UI.selectAircraft(4)}),$("#selectaircraft-5").on("click",function(){UI.selectAircraft(5)}),$("#mainmenu-fullscreen").on("click",Graphics.toggleFullscreen),$("#mainmenu-invite").on("click",UI.openInvite),$("#mainmenu-score").on("click",UI.openScore),$("#mainmenu-game").on("click",Games.popGames),$("#mainmenu-hidpi").on("click",Graphics.toggleHiDPI),$("#mainmenu-sound").on("click",Sound.toggle),config.mobile?($("#mainmenu-keybinds-text").html("<br>How To Play"),$("#mainmenu-keybinds").on("click",UI.toggleHelp),$(".keybind").css({display:"none"})):$("#mainmenu-keybinds").on("click",Input.openKeybinds),$("#settings-mainmenu").on("click",function(e){UI.toggleMainMenu(),e.stopPropagation()}),$("#settings-sound").on("click",function(e){Sound.toggle(),e.stopPropagation()}),$("#mainmenu").on("click",function(e){e.stopPropagation()}),$("#scoredetailed").on("click",function(e){e.stopPropagation()}),$("#invitefriends").on("click",function(e){e.stopPropagation()}),$("#keybinds").on("click",function(e){e.stopPropagation()}),$("#invite-link").on("contextmenu",function(e){e.stopPropagation()}),$("#resetbinds").on("click",Input.resetBinds),config.mobile||($("#chatbox").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#chatinput").on("blur",function(){r&&UI.toggleChatBox(!1)}),$("#resizechat").on("mousedown",UI.startDragChat)),$("#scorecontainer").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#selectupgrade-1").on("click",function(){UI.selectUpgrade(1)}),$("#selectupgrade-2").on("click",function(){UI.selectUpgrade(2)}),$("#selectupgrade-3").on("click",function(){UI.selectUpgrade(3)}),$("#selectupgrade-4").on("click",function(){UI.selectUpgrade(4)});var e;for(e=1;e<=5;e++)$("#selectaircraft-"+e).on("mouseenter",{t:e},UI.popTooltip),$("#selectaircraft-"+e).on("mouseleave",UI.closeTooltip);for(e=1;e<=4;e++)$("#selectupgrade-"+e).on("mouseenter",{t:100+e},UI.popTooltip),$("#selectupgrade-"+e).on("mouseleave",UI.closeTooltip);$("#playbutton").on("click",function(){Sound.UIClick(),UI.nameEntered()}),$("#playername").on("keypress",function(e){13===e.which&&UI.nameEntered()}),window.onerror=function(e,t,n,r,i){game.state!==Network.STATE.PLAYING&&game.state!==Network.STATE.CONNECTING||Tools.handleError({msg:e,url:t,lineNo:n,columnNo:r,error:i})}}}(),function(){var e=!1,t=!1,n=!1,r=["","Free For All","Capture The Flag","Battle Royale"],i=["","ffa","ctf","br"],o=0,s={},a=0,l=null,u=null,c=!1,h=!1,d=null,p=[],f=!1,g={},m={},v=null,y=!1,b={radius:0,pos:Vector.zero(),speed:0},_={2:"Custom country flags",3:"Emotes",4:"Flag Pack #1"};Games.setup=function(){$("#playregion").on("click",function(e){Games.updateRegion(!0,e)}),$("#playtype").on("click",function(e){Games.updateType(!0,e)}),$("#open-menu").on("click",function(e){Games.popGames(),e.stopPropagation()}),$("#gameselector").on("click",function(e){e.stopPropagation()}),$("#invite-copy").on("click",Games.copyInviteLink),$("#loginbutton").on("click",function(e){UI.openLogin(),e.stopPropagation()}),$("#login-facebook").on("click",function(){Games.popupLogin(1)}),$("#login-google").on("click",function(){Games.popupLogin(2)}),$("#login-twitter").on("click",function(){Games.popupLogin(3)}),$("#login-reddit").on("click",function(){Games.popupLogin(4)}),$("#login-twitch").on("click",function(){Games.popupLogin(5)}),$("#loginselector").on("click",function(e){e.stopPropagation()}),$("#gotomainpage").on("click",Games.redirRoot),$("#lifetime-signin").on("click",Games.redirRoot),null!=config.settings.session?Games.playerAuth():Games.playerGuest(),w(function(){if(h=!0,T(),DEVELOPMENT&&"#tony"==window.location.hash)return game.playRegion="eu",game.playRoom="ffa1",game.playInvited=!0,game.myOriginalName=window.location.hash.substr(1),void Games.start(game.myOriginalName,!0);f||(I(),Games.updateRegion(!1),Games.updateType(!1),C())},!0)},Games.popupLogin=function(e){x("/auth_"+["","facebook","google","twitter","reddit","twitch"][e],"Login",4==e?900:500,500)};var x=function(e,t,n,r){var i=void 0!=window.screenLeft?window.screenLeft:window.screenX,o=void 0!=window.screenTop?window.screenTop:window.screenY,s=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-n/2+i,a=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-r/2+o;window.open(e,t,"width="+n+", height="+r+", top="+a+", left="+s)};window.loginSuccess=function(e){config.settings.session=e,Tools.setSettings({session:e}),Tools.removeSetting("flag"),Games.playerAuth(),UI.closeLogin()},window.loginFailure=function(){},Games.playerGuest=function(){UI.show("#playbutton",!0),UI.show("#loginbutton",!0)},Games.playerAuth=function(){Tools.ajaxPost("/auth",{session:config.settings.session},function(e){if(null!=e){game.loggedIn=!0,game.myUserID=e.user;var t=UI.escapeHTML(e.authName.substr(0,30))+'<span class="grey">('+["","Facebook","Google","Twitter","Reddit","Twitch"][e.authType]+")</span>",n=t+'<span class="link" onclick="Games.logout()">Logout</span>',r="Logged in as "+t+'<span class="button" onclick="Games.logout()">LOG OUT</span>';null!=e.name&&$("#playername").val(e.name),$("#logout").html(n),$("#logout-mainmenu").html(r),$("#loginbutton").remove(),$("#lifetime-account").remove(),$("#playbutton").html("PLAY"),UI.show("#playbutton",!0)}else Games.playerGuest()})},Games.logout=function(){Tools.removeSetting("session"),Tools.removeSetting("name"),Tools.removeSetting("flag"),window.location="/"};var w=function(e,t){var n="/games";t&&(n+="?main=1"),$.ajax({url:n,dataType:"json",cache:!1,success:function(n){try{p=JSON.parse(n.data)}catch(e){return}if("xx"==game.myFlag&&(game.myFlag=n.country),t&&game.protocol!=n.protocol){if("#reload"!==window.location.hash)return void Tools.ajaxPost("/clienterror",{type:"protocol"},function(e){UI.showMessage("alert",'<span class="mainerror">Protocol update<br>Your client is being updated to the new version</span>',3e4),setTimeout(function(){window.location="/?"+Tools.randomID(10)+"#reload"},5e3)});Tools.ajaxPost("/clienterror",{type:"protocolretry"})}e()},error:function(){}})},T=function(){o=0;for(var e=0,t=0;t<p.length;t++)for(var n=0;n<p[t].games.length;n++)o+=p[t].games[n].players,e++;if(0==e)f=!0,UI.showMessage("alert",'<span class="mainerror">We are currently performing server maintenance<br>Please try again in a few minutes</span>',3e4);else{var r='<div class="item smallerpad">'+o+"</div>player"+(o>1?"s":"")+" online";$("#gameinfo").html(r)}},E=function(e){if("closest"===e)return{name:"Closest"};for(var t=0;t<p.length;t++)if(p[t].id===e)return p[t];return game.playRegion="closest",{name:"Closest"}},S=function(e,t){var n=E(e);if(null==n)return null;if(null==n.games)return null;for(var o=0;o<n.games.length;o++)if(n.games[o].id===t)return n.games[o];var s=i.indexOf(t);if(-1!=s)for(o=0;o<n.games.length;o++)if(n.games[o].type==s)return{name:r[s]};return null},I=function(){var e=window.location.hash;if(history.replaceState(null,null,"/"),"#reload"!==e&&null!=e&&!(e.length<4||e.length>20)){var t=(e=e.substr(1)).indexOf("-");if(-1!=t){var n=e.substr(0,t),r=e.substr(t+1);null!=S(n,r)&&(game.playRegion=n,game.playRoom=r,game.playInvited=!0)}}};Games.selectRegion=function(e,t){e.stopPropagation(),Sound.UIClick(),game.playRegion=t,Games.updateRegion(!1),Games.updateType()},Games.selectGame=function(e,t){e.stopPropagation(),Sound.UIClick(),game.playRoom=t,Games.updateType(!1)},Games.closeDropdowns=function(){t&&Games.updateType(!1),e&&Games.updateRegion(!1)},Games.updateRegion=function(n,r){var i="",o=null;if(h&&!f){if(null!=r&&(r.stopPropagation(),e||Sound.UIClick()),n&&UI.closeLogin(),null==n&&(n=e),n){t&&Games.updateType(!1),i+='<div class="item"><div class="region header">REGION</div><div class="players header">PLAYERS</div><div class="ping header">PING</div><div class="clear"></div></div>';var s="";null!=u&&(s='<span class="autoregion">('+p[u].name+")</span>"),i+='<div class="item selectable'+("closest"===game.playRegion?" sel":"")+'" onclick="Games.selectRegion(event, &quot;closest&quot;)"><div class="region chooser">Closest'+s+'</div><div class="clear"></div></div>';for(var a=0;a<p.length;a++){for(var l=0,c=0;c<p[a].games.length;c++)l+=p[a].games[c].players;var d;d=null==p[a].ping?"&nbsp;":Math.round(p[a].ping)+'<span class="ms">ms</span>',i+='<div class="item selectable'+(game.playRegion===p[a].id?" sel":"")+'" onclick="Games.selectRegion(event, &quot;'+p[a].id+'&quot;)"><div class="region chooser">'+p[a].name+'</div><div class="players number">'+l+'</div><div class="ping chooser nopadding">'+d+'</div><div class="clear"></div></div>'}i+='<div class="item"></div>',o={width:"240px",height:"auto","z-index":"2"},$("#playregion").removeClass("hoverable")}else{i+='<div class="arrowdown"></div>',i+='<div class="playtop">REGION</div>';i+='<div class="playbottom">'+E(game.playRegion).name+"</div>",o={width:"130px",height:"40px","z-index":"auto"},$("#playregion").addClass("hoverable")}$("#playregion").html(i),$("#playregion").css(o),e=n}};var P=function(){var e=game.playRegion;if("closest"===e){if(null==u)return null;e=p[u].id}return e},M=function(e){var t='<div class="infott">';return 1==e?t+="Everyone versus everyone deathmatch. No teams.":2==e?t+="Players split into 2 teams. 2 flags are placed inside each base. The objective is to move the enemy flag from their base to your base.":3==e&&(t+="Players spawn at random locations all across the map. Destroyed players will not respawn. Last player standing wins."),t+='<div class="arrow"></div></div>'};Games.updateType=function(n,o){var s="",a=null;if(h&&!f){if(null!=o&&(o.stopPropagation(),t||Sound.UIClick()),n&&UI.closeLogin(),null==n&&(n=t),n){e&&Games.updateRegion(!1),s+='<div class="item"><div class="gametype header">GAME</div><div class="players header">PLAYERS</div><div class="clear"></div></div>';if(null==(p=P()))return;null==S(p,game.playRoom)&&(game.playRoom=i[1]);var l,u,c=E(p).games,d=[[],[],[],[],[],[],[],[],[]];for(l=0;l<c.length;l++)d[c[l].type].push(c[l]);for(l=1;l<d.length;l++)if(0!=d[l].length)for(s+='<div class="item selectable'+(i[l]===game.playRoom?" sel":"")+'" onclick="Games.selectGame(event, &quot;'+i[l]+'&quot;)"><div class="gametype chooser">'+r[l]+'<span class="infocontainer">&nbsp;<div class="infoicon">'+M(l)+'</div></span></div><div class="clear"></div></div>',u=0;u<d[l].length;u++)s+='<div class="item selectable'+(d[l][u].id===game.playRoom?" sel":"")+'" onclick="Games.selectGame(event, &quot;'+d[l][u].id+'&quot;)"><div class="gametype chooser">'+d[l][u].nameShort+'</div><div class="players number">'+d[l][u].players+'</div><div class="clear"></div></div>';s+='<div class="item"></div>',a={width:"240px",height:"auto","z-index":"2"},$("#playtype").removeClass("hoverable")}else{s+='<div class="arrowdown"></div>',s+='<div class="playtop">GAME</div>';var p;if(null==(p=P()))return;var g=S(p,game.playRoom);null==g?(name=r[1],game.playRoom=i[1]):name=g.name,s+='<div class="playbottom">'+name+"</div>",a={width:"190px",height:"40px","z-index":"auto"},$("#playtype").addClass("hoverable")}$("#playtype").html(s),$("#playtype").css(a),t=n}},Games.popGames=function(){if(!n){UI.closeAllPanels("games");var e=A();UI.hide("#menu"),$("#gameselector").html(e),UI.show("#gameselector"),n=!0,O(),Sound.UIClick()}};var A=function(){var e="";e+='<div class="header">'+game.roomName+'<span class="region">&nbsp;&nbsp;&bull;&nbsp;&nbsp;'+game.regionName+'</span></div><div class="buttons"><div class="button" onclick="Games.redirRoot()">CHANGE REGION</div></div>';var t,n,i=E(game.playRegion).games,o=[[],[],[],[],[],[],[],[],[]];for(t=0;t<i.length;t++)o[i[t].type].push(i[t]);var s,a;for(t=1;t<o.length;t++)if(0!=o[t].length)for(e+='<div class="item head"><div class="gametype chooser section">'+r[t]+'<span class="infocontainer">&nbsp;<div class="infoicon">'+M(t)+'</div></span></div><div class="clear"></div></div>',n=0;n<o[t].length;n++)o[t][n].id===game.playRoom?(s=" sel",a=""):(s=" selectable",a=' onclick="Games.switchGame(&quot;'+o[t][n].id+'&quot;)"'),e+='<div class="item'+s+'"'+a+'><div class="gametype chooser">'+o[t][n].nameShort+'</div><div class="players number">'+o[t][n].players+'</div><div class="clear"></div></div>';return e};Games.redirRoot=function(){game.reloading=!0,window.location="/"};var O=function(){w(function(){var e=A();$("#gameselector").html(e)})};Games.closeGames=function(){n&&(UI.hide("#gameselector"),UI.show("#menu"),n=!1,Sound.UIClick())},Games.toggleGames=function(){n?Games.closeGames():Games.popGames()},Games.switchGame=function(e){Games.closeGames(),null!=e&&(game.playRoom=e),game.myScore=0,game.state=Network.STATE.CONNECTING,Network.shutdown(),Particles.wipe(),Players.wipe(),Mobs.wipe(),UI.reconnection(),Games.start(game.myOriginalName)};var C=function(){s={},a=0;for(var e,t=0;t<p.length;t++)e=p[t].games[Tools.randInt(0,p[t].games.length-1)].host,null==s[e]&&(s[e]={ping:9999,num:0,threshold:0,server:t});Games.performPing(),Games.performPing(),Games.performPing(),l=setInterval(Games.performPing,300)};Games.performPing=function(){if(!(a>3||c)){var e=9999,t=null;for(var n in s)s[n].num<e&&(e=s[n].num,t=n);if(e>6)null!=l&&clearInterval(l);else{s[t].num++;var r;r=DEVELOPMENT?"/ping":"https://game-"+t+".airma.sh/ping",R(t,r,function(){R(t,r)})}}};var R=function(e,t,n){if(null!=s[e]&&!c){a++;var r=performance.now();$.ajax({url:t,dataType:"json",cache:!1,timeout:2e3,success:function(t){if(!c&&(a--,1==t.pong&&null!=s[e])){var i=performance.now()-r;if(Math.abs(s[e].ping-i)<.1*i&&s[e].threshold++,s[e].threshold>=2)return i<s[e].ping&&(p[s[e].server].ping=i,Games.findClosest(),Games.updateRegion()),void delete s[e];i<s[e].ping&&(s[e].ping=i,p[s[e].server].ping=i,Games.findClosest(),Games.updateRegion(),null!=n&&n())}},error:function(){a--}})}};Games.findClosest=function(){for(var e=9999,t=!1,n=0;n<p.length;n++)null!=p[n].ping&&p[n].ping<e&&(e=p[n].ping,u=n,t=!0);t&&"closest"===game.playRegion&&Games.updateType()},Games.highlightInput=function(e){$(e).css({transition:"none",transform:"scale(1.1)","background-color":"rgb(90, 30, 30)"}),$(e).width(),$(e).css({transition:"all 0.5s ease-in-out",transform:"scale(1)","background-color":"rgb(30, 30, 30)"}),setTimeout(function(){$(e).focus()},200)},Games.copyInviteLink=function(){D(game.inviteLink)&&(UI.show("#invite-copied"),null!=d&&clearTimeout(d),d=setTimeout(function(){UI.hide("#invite-copied")},2e3))};var D=function(e){var t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre";var n=document.createElement("iframe");n.sandbox="allow-same-origin",document.body.appendChild(n);var r=n.contentWindow;r.document.body.appendChild(t);var i=r.getSelection();i||(i=(r=window).getSelection(),document.body.appendChild(t));var o=r.document.createRange();i.removeAllRanges(),o.selectNode(t),i.addRange(o);var s=!1;try{s=r.document.execCommand("copy")}catch(e){}return i.removeAllRanges(),t.remove(),n.remove(),s};Games.start=function(e,t){if(!(f||t&&game.state==Network.STATE.CONNECTING)){var n=game.playRegion,r=P();if(null!=r){game.playRegion=r,null!=l&&clearInterval(l),c=!0;var o=game.playRoom,s=i.indexOf(o);if(-1!=s){for(var a=E(game.playRegion).games,u=[],h=0;h<a.length;h++)a[h].type==s&&u.push(a[h].id);o=u[Tools.randInt(0,u.length-1)]}var d=S(game.playRegion,o);game.playHost=d.host,game.playPath=d.id,game.regionName=E(game.playRegion).name,game.playRoom=o,game.state==Network.STATE.LOGIN&&Tools.wipeReel(),game.state=Network.STATE.CONNECTING;var p={name:e};game.playInvited||(p.region=n),Tools.setSettings(p),UI.gameStart(e,t),t&&Tools.ajaxPost("/enter",{id:config.settings.id,name:e,game:game.playRegion+"-"+game.playRoom,source:null!=document.referrer?document.referrer:"",mode:config.mobile?1:0})}}},Games.prep=function(){if(Games.wipe(),2==game.gameType){$("#gamespecific").html('<div class="blueflag"></div><div id="blueflag-name" class="blueflag-player">&nbsp;</div><div class="redflag"></div><div id="redflag-name" class="redflag-player">&nbsp;</div>'),UI.show("#gamespecific"),g={flagBlue:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(-9669,-1471),sprite:Textures.init("ctfFlagBlue",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:.4*1.1,visible:!1}),minimapSprite:Textures.init("minimapFlagBlue"),minimapBase:Textures.init("minimapBaseBlue")},flagRed:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(8602,-944),sprite:Textures.init("ctfFlagRed",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:.4*1.1,visible:!1}),minimapSprite:Textures.init("minimapFlagRed"),minimapBase:Textures.init("minimapBaseRed")}},Graphics.minimapMob(g.flagBlue.minimapBase,g.flagBlue.basePos.x,g.flagBlue.basePos.y),Graphics.minimapMob(g.flagRed.minimapBase,g.flagRed.basePos.x,g.flagRed.basePos.y)}else 3==game.gameType&&($("#gamespecific").html(""),UI.show("#gamespecific"))},Games.wipe=function(){L(),g.flagBlue&&g.flagRed&&(game.graphics.layers.flags.removeChild(g.flagBlue.sprite),game.graphics.layers.flags.removeChild(g.flagRed.sprite),game.graphics.layers.shadows.removeChild(g.flagBlue.spriteShadow),game.graphics.layers.shadows.removeChild(g.flagRed.spriteShadow),game.graphics.layers.ui3.removeChild(g.flagBlue.minimapSprite),game.graphics.layers.ui3.removeChild(g.flagRed.minimapSprite),game.graphics.layers.ui2.removeChild(g.flagBlue.minimapBase),game.graphics.layers.ui2.removeChild(g.flagRed.minimapBase),g.flagBlue.sprite.destroy(),g.flagRed.sprite.destroy(),g.flagBlue.spriteShadow.destroy(),g.flagRed.spriteShadow.destroy(),g.flagBlue.minimapSprite.destroy(),g.flagRed.minimapSprite.destroy(),g.flagBlue.minimapBase.destroy(),g.flagRed.minimapBase.destroy())},Games.networkFlag=function(e){var t=1==e.flag?g.flagBlue:g.flagRed,n=1==e.flag?"#blueflag-name":"#redflag-name",r=1==e.flag?e.blueteam:e.redteam;t.momentum=0,t.direction=1,t.sprite.scale.x=.4,t.sprite.rotation=0,t.spriteShadow.scale.x=.4*1.1,t.spriteShadow.rotation=0;var i='<span class="rounds">'+r+'<span class="divider">/</span>3</span>';if(1==e.type){t.playerId=null,t.position.x=e.posX,t.position.y=e.posY,t.sprite.position.set(e.posX,e.posY);var o=Graphics.shadowCoords(new Vector(e.posX,e.posY));t.spriteShadow.position.set(o.x,o.y),Graphics.minimapMob(t.minimapSprite,e.posX,e.posY),$(n).html(i)}else{t.playerId=e.id;var s=Players.get(e.id);null!=s&&(1==e.flag?i=UI.escapeHTML(s.name)+i:i+=UI.escapeHTML(s.name)),t.diffX=s.pos.x,$(n).html(i)}k(t,!1)};var k=function(e,t){if(t&&(Graphics.minimapMob(e.minimapSprite,e.position.x,e.position.y),Graphics.minimapMob(e.minimapBase,e.basePos.x,e.basePos.y)),null!=e.playerId){var n=Players.get(e.playerId);if(null!=n&&(n.render!=e.visible&&(e.visible=n.render,e.sprite.visible=n.render,e.spriteShadow.visible=n.render,n.render&&(e.momentum=0,e.direction=1,e.diffX=n.pos.x)),n.render?Graphics.minimapMob(e.minimapSprite,n.pos.x,n.pos.y):Graphics.minimapMob(e.minimapSprite,n.lowResPos.x,n.lowResPos.y),e.visible)){e.position.x=n.pos.x,e.position.y=n.pos.y,e.sprite.position.set(n.pos.x,n.pos.y);var r=Graphics.shadowCoords(n.pos);e.spriteShadow.position.set(r.x,r.y),e.momentum=Tools.clamp(e.momentum+(n.pos.x-e.diffX)*game.timeFactor,-40,40);var i=e.momentum>0?.1:-.1;e.direction=Tools.clamp(e.direction-i*game.timeFactor,-.4,.4),e.sprite.scale.x=e.direction,e.spriteShadow.scale.x=1.1*e.direction;var o=.04*-(n.pos.x-e.diffX)*game.timeFactor;e.sprite.rotation=o,e.spriteShadow.rotation=o,e.diffX=n.pos.x}}else{var s=Graphics.inScreen(e.position,128);s!=e.visible&&(e.visible=s,e.sprite.visible=s,e.spriteShadow.visible=s)}};Games.spectate=function(e){null==game.spectatingID&&3!=game.gameType&&UI.showMessage("alert",'<span class="info">SPECTATOR MODE</span>Click on Respawn to resume playing',4e3),game.spectatingID=e;var t=Players.get(e),n='<div id="spectator-tag" class="spectating">Spectating '+(null==t?"":UI.escapeHTML(t.name))+'</div><div class="buttons"><div onclick="Network.spectateNext()" class="changeplayer left"><div class="arrow"></div></div><div onclick="Network.spectatePrev()" class="changeplayer right"><div class="arrow"></div></div></div>';UI.showSpectator(n)},Games.spectatorSwitch=function(e){setTimeout(function(){e==game.spectatingID&&Network.spectateNext()},2e3)},Games.playersAlive=function(e){var t="";e>1&&(t='<div class="playersalive">'+e+" players alive</div>"),$("#gamespecific").html(t)},Games.showBTRWin=function(e){if(!$("#custom-msg").length){var t='<div id="custom-msg" class="btrwin"><div class="trophy"></div><div class="winner"><div class="player"><span class="flag big flag-'+e.f+'"></span>'+UI.escapeHTML(e.p)+'</div></div><div class="bounty"><span class="stat">'+e.k+" KILL"+(1==e.k?"":"S")+"</span>+"+e.b+" BOUNTY</div></div>";$("body").append(t),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*e.t),Sound.gameComplete()}},Games.showCTFWin=function(e){if(!$("#custom-msg").length){var t='<div id="custom-msg" class="ctfwin"><div class="trophy"></div><div class="winner">'+(1==e.w?'<div class="player blue">BLUE TEAM</div>':'<div class="player red">RED TEAM</div>')+'</div><div class="bounty">+'+e.b+" BOUNTY</div></div>";$("body").append(t),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*e.t),Sound.gameComplete()}},Games.showLevelUP=function(e){$("#custom-msg").length&&$("#custom-msg").remove();var t="",n=" lvlsmaller";null!=_[e+""]&&(n="",t='<div class="unlocked">FEATURE UNLOCKED<br><div class="unlockedtext">'+_[e+""]+"</div></div>");var r='<div id="custom-msg" class="levelup'+n+'"><div class="leveltext">NEW LEVEL REACHED</div><div class="levelbadge"></div><div class="levelnum">'+e+"</div>"+t+"</div>";$("body").append(r),UI.showPanel("#custom-msg"),Sound.levelUp(),UI.showChatLevel(e)},Games.popFirewall=function(e,t){t<=0&&(t=0),y||(y=!0,v=new PIXI.Graphics,game.graphics.gui.minimap.mask=v),v.clear(),v.beginFill(16777215),v.drawCircle(game.screenX-config.minimapPaddingX-config.minimapSize*(16384-e.x)/32768,game.screenY-config.minimapPaddingY-config.minimapSize/2*(8192-e.y)/16384,2*t/(256/config.minimapSize*256)),v.endFill();var n=Graphics.getCamera(),r=Math.ceil((game.halfScreenX+64)/game.scale/64),i=Math.ceil((game.halfScreenY+64)/game.scale/64),o=0,s=0,a="",l={},u=0,c=0,h=new Vector(n.x-game.halfScreenX/game.scale-64,n.y-game.halfScreenY/game.scale-64),d=new Vector(n.x+game.halfScreenX/game.scale+64,n.y-game.halfScreenY/game.scale-64),p=new Vector(n.x-game.halfScreenX/game.scale-64,n.y+game.halfScreenY/game.scale+64),f=new Vector(n.x+game.halfScreenX/game.scale+64,n.y+game.halfScreenY/game.scale+64);if(Tools.distance(e.x,e.y,h.x,h.y)>t||Tools.distance(e.x,e.y,d.x,d.y)>t||Tools.distance(e.x,e.y,p.x,p.y)>t||Tools.distance(e.x,e.y,f.x,f.y)>t)for(var g=-r;g<=r;g++)for(var b=-i;b<=i;b++)if(o=64*(Math.floor(n.x/64)+.5)+64*g,s=64*(Math.floor(n.y/64)+.5)+64*b,!((u=Tools.distance(o,s,e.x,e.y))<t)&&(a=o+"_"+s,l[a]=!0,null==m[a])){var _=Textures.sprite("hotsmoke_"+Tools.randInt(1,4));_.scale.set(Tools.rand(1.5,2.5)),_.anchor.set(.5,.5),_.position.set(o,s),c=1,Tools.rand(0,1)>.5&&(_.blendMode=PIXI.BLEND_MODES.ADD,c=.5),game.graphics.layers.powerups.addChild(_),m[a]={sprite:_,rotation:Tools.rand(0,100),rotationSpeed:Tools.rand(-.0025,.0025),opacity:0,maxOpacity:c,opacitySpeed:u-t>=64?.02:.0035,color:Tools.rand(0,1),colorDir:Tools.rand(0,1)<.5?-1:1}}for(var x in m)null!=l[x]?(m[x].rotation+=m[x].rotationSpeed*game.timeFactor,m[x].opacity+=m[x].opacitySpeed*game.timeFactor,m[x].opacity>m[x].maxOpacity&&(m[x].opacity=m[x].maxOpacity),m[x].color+=.005*m[x].colorDir*game.timeFactor,m[x].color<0&&(m[x].colorDir=1),m[x].color>1&&(m[x].colorDir=-1),m[x].sprite.rotation=m[x].rotation,m[x].sprite.alpha=m[x].opacity,m[x].sprite.tint=Tools.colorLerp(16427014,16404230,m[x].color)):(game.graphics.layers.powerups.removeChild(m[x].sprite),m[x].sprite.destroy(),delete m[x])};var L=function(){if(y){for(var e in m)game.graphics.layers.powerups.removeChild(m[e].sprite),m[e].sprite.destroy();m={},game.graphics.gui.minimap.mask=null,null!=v&&(v.destroy(),v=null),y=!1}};Games.handleFirewall=function(e){0==e.status?L():(b.radius=e.radius,b.pos.x=e.posX,b.pos.y=e.posY,b.speed=e.speed,Games.popFirewall(b.pos,b.radius))},Games.update=function(e){2==game.gameType&&g.flagBlue&&(k(g.flagBlue,e),k(g.flagRed,e)),3==game.gameType&&y&&(b.radius+=b.speed/60*game.timeFactor,Games.popFirewall(b.pos,b.radius))}}(),function(){var e={},t={},n={},r=0,i=0,o={},s=0,a=0,l={},u=.3,c=1,h=.3,d=.06,p=.08,f=.05,g=.25,m=.3,v=[0,.7,1,.4,0,.7,.4,.7],y=[0,.7,1,.4,0,.7,1,.7],b=[0,.8,.5,1,0,.8,.5,.8],_=[0,.8,1,.7,.8,.8],x=[0,1.5,1.2,.8,1.35,1.7],w=[0,1,1,.35,1,1],T=[0,.8,.5,1,0,.8,.8,.8],E=[0,1.5,.8,2,1,1.5],S={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},I={},P={src:["assets/sounds.mp3?4"],volume:0,sprite:{chopper:[0,3206.1451247165533,!0],click:[5e3,374.9886621315195],complete:[7e3,1910.9750566893417],explosion1:[1e4,4137.460317460316],explosion2:[16e3,4155.44217687075],explosion3:[22e3,4168.367346938776],explosion4:[28e3,4580.272108843537],explosion5:[34e3,4144.943310657595],explosion6:[4e4,4191.360544217688],impact:[46e3,3730.7709750566855],launch1:[51e3,1492.4943310657568],launch2:[54e3,1511.2244897959215],levelup:[57e3,1886.4172335600883],missile:[6e4,8335.351473922898,!0],powerup_rampage:[7e4,7423.083900226758],powerup_shield:[79e3,2070.4761904761854],powerup_upgrade:[83e3,1640.8616780045406],repel:[86e3,2e3],respawn:[89e3,1315.9410430838961],thruster:[92e3,9499.841269841269,!0],upgrade:[103e3,2062.517006802722]}};Sound.setup=function(){var n={};for(var r in I){if(n={src:["/assets/sounds/"+r+".wav"]},Object.keys(I[r]).length>0)for(var i in I[r])n[i]=I[r][i];t[r]=new Howl(n)}e=new Howl(P)},Sound.toggle=function(){config.settings.sound=!config.settings.sound,Tools.setSettings({sound:config.settings.sound}),UI.updateSound(!0),M()};var M=function(){config.settings.sound||e.stop()},A=function(e){var t=S[e];return null==t?1:t};Sound.mobExplosion=function(e,t){var n=v[t]*u,r=k(e)*n,i="explosion"+Tools.randInt(1,6);r<.01||O("mobexplosions",4)||C(i,r,e,Tools.rand(.8,1.2))},Sound.playerKill=function(e){var t=_[e.type]*c,n=k(e.pos)*t,r="explosion"+Tools.randInt(1,6);n<.01||O("playerkills",3)||C(r,n,e.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!O("upgrades",1)){var e=A("upgrade");C("upgrade",e)}},Sound.playerRespawn=function(e){var t=A("respawn")*(e.me()?1:k(e.pos)),n=e.me()?null:e.pos;C("respawn",t,n)},Sound.gameComplete=function(){var e=A("complete");C("complete",e)},Sound.levelUp=function(){var e=A("levelup");C("levelup",e)},Sound.UIClick=function(){if(!O("uiclick",1,200)){var e=A("click");C("click",e)}},Sound.effectRepel=function(e){var t=k(e)*m;C("repel",t,e,1.5)},Sound.powerup=function(e,t){var n=(null==t?1:k(t))*g,r="";4==e?r="powerup_upgrade":8==e?r="powerup_shield":9==e&&(r="powerup_rampage"),C(r,n*A(r),t)},Sound.missileLaunch=function(e,t){var n=y[t]*h,r=k(e)*n,i=b[t],o="launch"+Tools.randInt(1,2);r<.01||O("launches",5)||C(o,r,e,i)},Sound.playerImpact=function(e,t,n){var r=f*Tools.clamp(n,0,1),i=k(e)*r,o=E[t];C("impact",i,e,o)},Sound.update=function(){if(!(game.time-a<100)){var e=game.focus?300:1e3;for(var t in n)game.time-n[t].last>e&&Sound.clearThruster(t);for(var r in o)game.time>=o[r].time&&(D(o[r].id,o[r].sound),delete o[r]);a=game.time}};var O=function(e,t,n){if(null==l[e])return l[e]={num:1,time:game.time},!1;var r=null!=n?n:1e3;return game.time-l[e].time>r?(l[e].num=1,l[e].time=game.time,!1):(l[e].num++,l[e].num>t)},C=function(n,r,i,o,s,a){if(config.settings.sound){if(a){if(null==t[n])return;var l=t[n]}else l=e;if(!(null!=r&&r<.01)){var u=l.play(a?void 0:n);if("thruster"===n||"missile"===n||"chopper"===n){var c=l.seek(null,u);l.seek(c+Tools.rand(0,1),u)}return R(u,n,r,i,o,s,a),u}}},R=function(n,r,i,o,s,a,l){if(config.settings.sound){if(l){if(null==t[r])return;var u=t[r]}else u=e;null!=i&&u.volume(i,n),null!=a&&u.fade(a[0],a[1],a[2],n,4==a.length||null),null!=s&&u.rate(s,n),null==o||config.ios||u.stereo(L(o),n)}},D=function(n,r,i){if(i){if(null==t[r])return;var o=t[r]}else o=e;o.stop(n)};Sound.clearThruster=function(e){if(null!=n[e]){var t=n[e].soundId,a=n[e].vol;R(t,n[e].sound,null,null,null,[a,0,200,!0]),function(e,t,n){o[++s]={id:e,sound:t,time:game.time+n}}(t,n[e].sound,300),0==n[e].type?r--:i--,delete n[e]}},Sound.updateThruster=function(e,t,o){if(config.settings.sound){if(0==e){if(3==t.type){o=t.render;var s="chopper"}else{o=t.keystate.UP||t.keystate.DOWN;s="thruster"}var a="player_"+t.id+"_"+t.type}else{s="missile";a="mob_"+t.id}if(o)if(null==n[a]){if(0==e){if(!t.me()&&r>=5)return}else if(i>=5)return;var l=k(t.pos);if(0==e)var u=l*w[t.type]*d,c=x[t.type];else u=l*p,c=T[t.type];if(u<.01)return;var h=C(s,null,t.pos,c,[0,u,200]);n[a]={type:e,started:game.time,last:game.time,sound:s,soundId:h,vol:u},0==e?r++:i++}else{if(game.time-n[a].last<100)return;l=k(t.pos);if(0==e){u=l*w[t.type]*d;t.boost&&(u*=3)}else u=l*p;if(u<.01)return void Sound.clearThruster(a);c=null;if(0==e&&3==t.type&&(c=x[t.type]+t.speed.length()/20),game.time-n[a].started<250)return;R(n[a].soundId,n[a].sound,null,t.pos,c,[n[a].vol,u,100,!0]),n[a].last=game.time,n[a].vol=u}else null!=n[a]&&Sound.clearThruster(a)}};var k=function(e){var t=Graphics.getCamera(),n=Tools.length(e.x-t.x,e.y-t.y),r=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-n/r),0,1)},L=function(e){var t=Graphics.getCamera(),n=e.x-t.x,r=game.halfScreenX/game.scale;return Tools.clamp(.8*n/r,-1,1)}}();